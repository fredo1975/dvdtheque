2021-12-30 14:34:20,526 INFO org.hibernate.validator.internal.util.Version [background-preinit] HV000001: Hibernate Validator 6.2.0.Final
2021-12-30 14:34:21,340 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Fetching config from server at : http://localhost:8888
2021-12-30 14:34:21,961 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Located environment: name=dvdtheque-batch, profiles=[local], label=develop, version=39431780f8dbd3d16e105d455db6fea5845bcdcf, state=null
2021-12-30 14:34:21,961 INFO org.springframework.cloud.bootstrap.config.PropertySourceBootstrapConfiguration [main] Located property source: [BootstrapPropertySource {name='bootstrapProperties-configClient'}, BootstrapPropertySource {name='bootstrapProperties-https://github.com/fredo1975/spring-cloud-server-config.git/file:C:\Users\fredo\AppData\Local\Temp\config-repo-6509514101851484087\dvdtheque-batch-local.yml'}]
2021-12-30 14:34:21,981 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: local
2021-12-30 14:34:23,160 INFO org.springframework.cloud.context.scope.GenericScope [main] BeanFactory id=f45aa8dc-8b51-32ca-a121-e209a717e395
2021-12-30 14:34:23,749 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8089 (http)
2021-12-30 14:34:23,761 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8089"]
2021-12-30 14:34:23,763 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2021-12-30 14:34:23,764 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.56]
2021-12-30 14:34:23,960 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2021-12-30 14:34:23,960 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1962 ms
2021-12-30 14:34:24,323 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsJob
2021-12-30 14:34:24,326 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsStep
2021-12-30 14:34:24,331 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### ListItemReader
2021-12-30 14:34:24,526 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### excelFilmWriter
2021-12-30 14:34:24,582 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsJob
2021-12-30 14:34:24,585 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsStep
2021-12-30 14:34:25,236 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@210c1b9d, org.springframework.security.web.context.SecurityContextPersistenceFilter@2faf6e4a, org.springframework.security.web.header.HeaderWriterFilter@52d63b7e, org.springframework.security.web.csrf.CsrfFilter@36665c11, org.springframework.security.web.authentication.logout.LogoutFilter@35ceec81, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@43756cb, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@4e5364a3, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@70ecf57b, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@738a39cc, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@69bc4024, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@644947ee, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4491eaeb, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3578a45b, org.springframework.security.oauth2.client.web.OAuth2AuthorizationCodeGrantFilter@20f63ddc, org.springframework.security.web.session.SessionManagementFilter@1827fc4e, org.springframework.security.web.access.ExceptionTranslationFilter@6bf0f70a, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@40ac0a56]
2021-12-30 14:34:25,260 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2021-12-30 14:34:25,417 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2021-12-30 14:34:25,440 INFO org.springframework.batch.core.repository.support.JobRepositoryFactoryBean [main] No database type set, using meta data indicating: MYSQL
2021-12-30 14:34:25,490 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher [main] No TaskExecutor has been set, defaulting to synchronous executor.
2021-12-30 14:34:25,504 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsJob
2021-12-30 14:34:25,507 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsStep
2021-12-30 14:34:25,508 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### ListItemReader
2021-12-30 14:34:25,547 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### excelFilmWriter
2021-12-30 14:34:25,804 INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver [main] Exposing 15 endpoint(s) beneath base path '/actuator'
2021-12-30 14:34:25,860 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8089"]
2021-12-30 14:34:25,880 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8089 (http) with context path ''
2021-12-30 14:34:26,009 INFO org.springframework.boot.StartupInfoLogger [main] Started BatchApplication in 6.261 seconds (JVM running for 6.857)
2021-12-30 14:34:26,078 INFO org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner [main] Running default command line with: []
2021-12-30 14:34:26,226 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{INPUT_FILE_PATH=/opt/dvdtheque_rest_service/tmpFileDir/1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx, run.id=9, TIMESTAMP=1638865538201}]
2021-12-30 14:34:26,670 INFO org.apache.activemq.broker.BrokerService [main] Loaded the Bouncy Castle security provider.
2021-12-30 14:34:26,726 INFO org.apache.activemq.broker.BrokerService [main] Using Persistence Adapter: MemoryPersistenceAdapter
2021-12-30 14:34:26,766 INFO org.apache.activemq.broker.jmx.ManagementContext$1 [JMX connector] JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi
2021-12-30 14:34:26,883 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-1197-1640871266746-0:1) is starting
2021-12-30 14:34:26,888 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-1197-1640871266746-0:1) started
2021-12-30 14:34:26,888 INFO org.apache.activemq.broker.BrokerService [main] For help or more information please see: http://activemq.apache.org
2021-12-30 14:34:26,892 WARN org.apache.activemq.broker.BrokerService [main] Temporary Store limit is 51200 mb (current store usage is 0 mb). The data directory: D:\dev\eclipse-06-2021\workspace\dvdtheque\dvdtheque-batch only has 9203 mb of usable space. - resetting to maximum available disk space: 9203 mb
2021-12-30 14:34:26,914 INFO org.apache.activemq.broker.TransportConnector [main] Connector vm://localhost started
2021-12-30 14:34:27,036 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [cleanDBStep]
2021-12-30 14:34:27,184 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [cleanDBStep] executed in 148ms
2021-12-30 14:34:27,254 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [importFilmsStep]
2021-12-30 14:34:27,296 ERROR org.springframework.batch.core.step.AbstractStep [main] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.batch.item.ItemStreamException: Failed to initialize the reader
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:153)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader$$FastClassBySpringCGLIB$$ebb633d0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:137)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
	at org.springframework.batch.item.file.FlatFileItemReader$$EnhancerBySpringCGLIB$$16435ba8.open(<generated>)
	at org.springframework.batch.item.support.CompositeItemStream.open(CompositeItemStream.java:104)
	at org.springframework.batch.core.step.tasklet.TaskletStep.open(TaskletStep.java:311)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:205)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy106.run(Unknown Source)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:173)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:160)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:155)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:150)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:793)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:783)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:345)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at fr.fredos.dvdtheque.batch.BatchApplication.main(BatchApplication.java:14)
Caused by: java.lang.IllegalStateException: Input resource must exist (reader is in 'strict' mode): file [D:\opt\dvdtheque_rest_service\tmpFileDir\1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx]
	at org.springframework.batch.item.file.FlatFileItemReader.doOpen(FlatFileItemReader.java:257)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:150)
	... 43 common frames omitted
2021-12-30 14:34:27,300 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [importFilmsStep] executed in 45ms
2021-12-30 14:34:27,324 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{INPUT_FILE_PATH=/opt/dvdtheque_rest_service/tmpFileDir/1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx, run.id=9, TIMESTAMP=1638865538201}] and the following status: [FAILED] in 1s78ms
2021-12-30 14:34:27,404 INFO org.apache.juli.logging.DirectJDKLog [main] Pausing ProtocolHandler ["http-nio-8089"]
2021-12-30 14:34:27,404 INFO org.apache.juli.logging.DirectJDKLog [main] Stopping service [Tomcat]
2021-12-30 14:34:27,409 INFO org.apache.juli.logging.DirectJDKLog [main] Stopping ProtocolHandler ["http-nio-8089"]
2021-12-30 14:34:27,410 INFO org.apache.juli.logging.DirectJDKLog [main] Destroying ProtocolHandler ["http-nio-8089"]
2021-12-30 14:34:27,419 INFO org.apache.activemq.broker.TransportConnector [main] Connector vm://localhost stopped
2021-12-30 14:34:27,420 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-1197-1640871266746-0:1) is shutting down
2021-12-30 14:34:27,429 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-1197-1640871266746-0:1) uptime 0.742 seconds
2021-12-30 14:34:27,429 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-1197-1640871266746-0:1) is shutdown
2021-12-30 14:34:27,430 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2021-12-30 14:34:27,440 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2021-12-30 14:35:55,058 INFO org.hibernate.validator.internal.util.Version [background-preinit] HV000001: Hibernate Validator 6.2.0.Final
2021-12-30 14:35:55,918 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Fetching config from server at : http://localhost:8888
2021-12-30 14:35:56,453 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Located environment: name=dvdtheque-batch, profiles=[local], label=develop, version=39431780f8dbd3d16e105d455db6fea5845bcdcf, state=null
2021-12-30 14:35:56,456 INFO org.springframework.cloud.bootstrap.config.PropertySourceBootstrapConfiguration [main] Located property source: [BootstrapPropertySource {name='bootstrapProperties-configClient'}, BootstrapPropertySource {name='bootstrapProperties-https://github.com/fredo1975/spring-cloud-server-config.git/file:C:\Users\fredo\AppData\Local\Temp\config-repo-6509514101851484087\dvdtheque-batch-local.yml'}]
2021-12-30 14:35:56,486 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: local
2021-12-30 14:35:57,711 INFO org.springframework.cloud.context.scope.GenericScope [main] BeanFactory id=f45aa8dc-8b51-32ca-a121-e209a717e395
2021-12-30 14:35:58,287 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8089 (http)
2021-12-30 14:35:58,300 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8089"]
2021-12-30 14:35:58,301 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2021-12-30 14:35:58,302 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.56]
2021-12-30 14:35:58,476 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2021-12-30 14:35:58,477 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1973 ms
2021-12-30 14:35:58,839 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsJob
2021-12-30 14:35:58,842 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsStep
2021-12-30 14:35:58,851 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### ListItemReader
2021-12-30 14:35:59,029 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### excelFilmWriter
2021-12-30 14:35:59,091 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsJob
2021-12-30 14:35:59,093 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsStep
2021-12-30 14:35:59,772 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@20184ade, org.springframework.security.web.context.SecurityContextPersistenceFilter@38e46765, org.springframework.security.web.header.HeaderWriterFilter@1255de25, org.springframework.security.web.csrf.CsrfFilter@74830d73, org.springframework.security.web.authentication.logout.LogoutFilter@389008d1, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@2fcc5f49, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@22361e23, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@6f4d2294, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@be616f0, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@35fb3209, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4cd5fc46, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@32c0fecc, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5855b0ed, org.springframework.security.oauth2.client.web.OAuth2AuthorizationCodeGrantFilter@26aee0a6, org.springframework.security.web.session.SessionManagementFilter@5891b7c5, org.springframework.security.web.access.ExceptionTranslationFilter@62158991, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6cd66f6a]
2021-12-30 14:35:59,795 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2021-12-30 14:36:00,014 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2021-12-30 14:36:00,026 INFO org.springframework.batch.core.repository.support.JobRepositoryFactoryBean [main] No database type set, using meta data indicating: MYSQL
2021-12-30 14:36:00,058 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher [main] No TaskExecutor has been set, defaulting to synchronous executor.
2021-12-30 14:36:00,349 INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver [main] Exposing 15 endpoint(s) beneath base path '/actuator'
2021-12-30 14:36:00,397 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8089"]
2021-12-30 14:36:00,417 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8089 (http) with context path ''
2021-12-30 14:36:00,565 INFO org.springframework.boot.StartupInfoLogger [main] Started BatchApplication in 6.348 seconds (JVM running for 6.941)
2021-12-30 14:36:00,654 INFO org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner [main] Running default command line with: []
2021-12-30 14:36:00,819 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{INPUT_FILE_PATH=/opt/dvdtheque_rest_service/tmpFileDir/1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx, run.id=10, TIMESTAMP=1638865538201}]
2021-12-30 14:36:01,278 INFO org.apache.activemq.broker.BrokerService [main] Loaded the Bouncy Castle security provider.
2021-12-30 14:36:01,336 INFO org.apache.activemq.broker.BrokerService [main] Using Persistence Adapter: MemoryPersistenceAdapter
2021-12-30 14:36:01,374 INFO org.apache.activemq.broker.jmx.ManagementContext$1 [JMX connector] JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi
2021-12-30 14:36:01,481 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-1226-1640871361354-0:1) is starting
2021-12-30 14:36:01,487 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-1226-1640871361354-0:1) started
2021-12-30 14:36:01,488 INFO org.apache.activemq.broker.BrokerService [main] For help or more information please see: http://activemq.apache.org
2021-12-30 14:36:01,491 WARN org.apache.activemq.broker.BrokerService [main] Temporary Store limit is 51200 mb (current store usage is 0 mb). The data directory: D:\dev\eclipse-06-2021\workspace\dvdtheque\dvdtheque-batch only has 9203 mb of usable space. - resetting to maximum available disk space: 9203 mb
2021-12-30 14:36:01,513 INFO org.apache.activemq.broker.TransportConnector [main] Connector vm://localhost started
2021-12-30 14:36:01,628 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [cleanDBStep]
2021-12-30 14:36:01,712 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [cleanDBStep] executed in 83ms
2021-12-30 14:36:01,748 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [importFilmsStep]
2021-12-30 14:36:01,780 ERROR org.springframework.batch.core.step.AbstractStep [main] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.batch.item.ItemStreamException: Failed to initialize the reader
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:153)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader$$FastClassBySpringCGLIB$$ebb633d0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:137)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
	at org.springframework.batch.item.file.FlatFileItemReader$$EnhancerBySpringCGLIB$$b41a5362.open(<generated>)
	at org.springframework.batch.item.support.CompositeItemStream.open(CompositeItemStream.java:104)
	at org.springframework.batch.core.step.tasklet.TaskletStep.open(TaskletStep.java:311)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:205)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy106.run(Unknown Source)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:173)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:160)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:155)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:150)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:793)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:783)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:345)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at fr.fredos.dvdtheque.batch.BatchApplication.main(BatchApplication.java:14)
Caused by: java.lang.IllegalStateException: Input resource must exist (reader is in 'strict' mode): file [D:\opt\dvdtheque_rest_service\tmpFileDir\1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx]
	at org.springframework.batch.item.file.FlatFileItemReader.doOpen(FlatFileItemReader.java:257)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:150)
	... 43 common frames omitted
2021-12-30 14:36:01,784 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [importFilmsStep] executed in 36ms
2021-12-30 14:36:01,810 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{INPUT_FILE_PATH=/opt/dvdtheque_rest_service/tmpFileDir/1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx, run.id=10, TIMESTAMP=1638865538201}] and the following status: [FAILED] in 970ms
2021-12-30 14:36:01,899 INFO org.apache.juli.logging.DirectJDKLog [main] Pausing ProtocolHandler ["http-nio-8089"]
2021-12-30 14:36:01,900 INFO org.apache.juli.logging.DirectJDKLog [main] Stopping service [Tomcat]
2021-12-30 14:36:01,904 INFO org.apache.juli.logging.DirectJDKLog [main] Stopping ProtocolHandler ["http-nio-8089"]
2021-12-30 14:36:01,906 INFO org.apache.juli.logging.DirectJDKLog [main] Destroying ProtocolHandler ["http-nio-8089"]
2021-12-30 14:36:01,915 INFO org.apache.activemq.broker.TransportConnector [main] Connector vm://localhost stopped
2021-12-30 14:36:01,916 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-1226-1640871361354-0:1) is shutting down
2021-12-30 14:36:01,925 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-1226-1640871361354-0:1) uptime 0.630 seconds
2021-12-30 14:36:01,925 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-1226-1640871361354-0:1) is shutdown
2021-12-30 14:36:01,926 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2021-12-30 14:36:01,936 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2021-12-30 14:53:36,828 INFO org.hibernate.validator.internal.util.Version [background-preinit] HV000001: Hibernate Validator 6.2.0.Final
2021-12-30 14:53:37,559 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Fetching config from server at : http://localhost:8888
2021-12-30 14:53:38,087 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Located environment: name=dvdtheque-batch, profiles=[local], label=develop, version=39431780f8dbd3d16e105d455db6fea5845bcdcf, state=null
2021-12-30 14:53:38,088 INFO org.springframework.cloud.bootstrap.config.PropertySourceBootstrapConfiguration [main] Located property source: [BootstrapPropertySource {name='bootstrapProperties-configClient'}, BootstrapPropertySource {name='bootstrapProperties-https://github.com/fredo1975/spring-cloud-server-config.git/file:C:\Users\fredo\AppData\Local\Temp\config-repo-6509514101851484087\dvdtheque-batch-local.yml'}]
2021-12-30 14:53:38,123 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: local
2021-12-30 14:53:39,393 INFO org.springframework.cloud.context.scope.GenericScope [main] BeanFactory id=f45aa8dc-8b51-32ca-a121-e209a717e395
2021-12-30 14:53:39,929 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8089 (http)
2021-12-30 14:53:39,943 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8089"]
2021-12-30 14:53:39,944 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2021-12-30 14:53:39,945 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.56]
2021-12-30 14:53:40,143 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2021-12-30 14:53:40,143 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1989 ms
2021-12-30 14:53:40,507 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsJob
2021-12-30 14:53:40,509 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsStep
2021-12-30 14:53:40,514 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### ListItemReader
2021-12-30 14:53:40,599 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### excelFilmWriter
2021-12-30 14:53:40,630 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsJob
2021-12-30 14:53:40,635 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsStep
2021-12-30 14:53:41,392 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@340b4f07, org.springframework.security.web.context.SecurityContextPersistenceFilter@1f5d7fd5, org.springframework.security.web.header.HeaderWriterFilter@d13379e, org.springframework.security.web.csrf.CsrfFilter@78e043e4, org.springframework.security.web.authentication.logout.LogoutFilter@70f98f7a, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@92fd091, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@57fce8b, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@72a33316, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@22c29aa8, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@e994ca, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@37c87fcc, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@42b43a6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5a205ee5, org.springframework.security.oauth2.client.web.OAuth2AuthorizationCodeGrantFilter@416c8bb5, org.springframework.security.web.session.SessionManagementFilter@498e41a4, org.springframework.security.web.access.ExceptionTranslationFilter@32c0fecc, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@218f2f51]
2021-12-30 14:53:41,415 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2021-12-30 14:53:41,573 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2021-12-30 14:53:41,584 INFO org.springframework.batch.core.repository.support.JobRepositoryFactoryBean [main] No database type set, using meta data indicating: MYSQL
2021-12-30 14:53:41,607 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher [main] No TaskExecutor has been set, defaulting to synchronous executor.
2021-12-30 14:53:41,949 INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver [main] Exposing 15 endpoint(s) beneath base path '/actuator'
2021-12-30 14:53:42,004 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8089"]
2021-12-30 14:53:42,023 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8089 (http) with context path ''
2021-12-30 14:53:42,153 INFO org.springframework.boot.StartupInfoLogger [main] Started BatchApplication in 6.145 seconds (JVM running for 6.769)
2021-12-30 14:53:42,238 INFO org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner [main] Running default command line with: []
2021-12-30 14:53:42,360 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] launched with the following parameters: [{run.id=4, TIMESTAMP=1640819171000}]
2021-12-30 14:53:42,407 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [exportFilms]
2021-12-30 14:53:42,830 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [exportFilms] executed in 422ms
2021-12-30 14:53:43,103 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] completed with the following parameters: [{run.id=4, TIMESTAMP=1640819171000}] and the following status: [COMPLETED] in 708ms
2021-12-30 14:53:43,173 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{INPUT_FILE_PATH=/opt/dvdtheque_rest_service/tmpFileDir/1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx, run.id=11, TIMESTAMP=1638865538201}]
2021-12-30 14:53:43,497 INFO org.apache.activemq.broker.BrokerService [main] Loaded the Bouncy Castle security provider.
2021-12-30 14:53:43,550 INFO org.apache.activemq.broker.BrokerService [main] Using Persistence Adapter: MemoryPersistenceAdapter
2021-12-30 14:53:43,585 INFO org.apache.activemq.broker.jmx.ManagementContext$1 [JMX connector] JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi
2021-12-30 14:53:43,716 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-14003-1640872423569-0:1) is starting
2021-12-30 14:53:43,723 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-14003-1640872423569-0:1) started
2021-12-30 14:53:43,724 INFO org.apache.activemq.broker.BrokerService [main] For help or more information please see: http://activemq.apache.org
2021-12-30 14:53:43,727 WARN org.apache.activemq.broker.BrokerService [main] Temporary Store limit is 51200 mb (current store usage is 0 mb). The data directory: D:\dev\eclipse-06-2021\workspace\dvdtheque\dvdtheque-batch only has 9203 mb of usable space. - resetting to maximum available disk space: 9203 mb
2021-12-30 14:53:43,751 INFO org.apache.activemq.broker.TransportConnector [main] Connector vm://localhost started
2021-12-30 14:53:43,854 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [cleanDBStep]
2021-12-30 14:53:43,918 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [cleanDBStep] executed in 64ms
2021-12-30 14:53:43,960 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [importFilmsStep]
2021-12-30 14:53:44,036 ERROR org.springframework.batch.core.step.AbstractStep [main] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.batch.item.ItemStreamException: Failed to initialize the reader
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:153)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader$$FastClassBySpringCGLIB$$ebb633d0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:137)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
	at org.springframework.batch.item.file.FlatFileItemReader$$EnhancerBySpringCGLIB$$70ffbb5a.open(<generated>)
	at org.springframework.batch.item.support.CompositeItemStream.open(CompositeItemStream.java:104)
	at org.springframework.batch.core.step.tasklet.TaskletStep.open(TaskletStep.java:311)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:205)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy107.run(Unknown Source)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:173)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:160)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:155)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:150)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:793)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:783)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:345)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at fr.fredos.dvdtheque.batch.BatchApplication.main(BatchApplication.java:14)
Caused by: java.lang.IllegalStateException: Input resource must exist (reader is in 'strict' mode): file [D:\opt\dvdtheque_rest_service\tmpFileDir\1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx]
	at org.springframework.batch.item.file.FlatFileItemReader.doOpen(FlatFileItemReader.java:257)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:150)
	... 43 common frames omitted
2021-12-30 14:53:44,044 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [importFilmsStep] executed in 83ms
2021-12-30 14:53:44,068 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{INPUT_FILE_PATH=/opt/dvdtheque_rest_service/tmpFileDir/1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx, run.id=11, TIMESTAMP=1638865538201}] and the following status: [FAILED] in 885ms
2021-12-30 14:53:44,199 INFO org.apache.juli.logging.DirectJDKLog [main] Pausing ProtocolHandler ["http-nio-8089"]
2021-12-30 14:53:44,200 INFO org.apache.juli.logging.DirectJDKLog [main] Stopping service [Tomcat]
2021-12-30 14:53:44,205 INFO org.apache.juli.logging.DirectJDKLog [main] Stopping ProtocolHandler ["http-nio-8089"]
2021-12-30 14:53:44,206 INFO org.apache.juli.logging.DirectJDKLog [main] Destroying ProtocolHandler ["http-nio-8089"]
2021-12-30 14:53:44,212 WARN org.springframework.beans.factory.support.DisposableBeanAdapter [main] Custom destroy method 'close' on bean with name 'excelFilmWriter' threw an exception: org.springframework.batch.item.ItemStreamException: Error writing to output file
2021-12-30 14:53:44,222 INFO org.apache.activemq.broker.TransportConnector [main] Connector vm://localhost stopped
2021-12-30 14:53:44,222 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-14003-1640872423569-0:1) is shutting down
2021-12-30 14:53:44,230 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-14003-1640872423569-0:1) uptime 0.717 seconds
2021-12-30 14:53:44,230 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-14003-1640872423569-0:1) is shutdown
2021-12-30 14:53:44,231 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2021-12-30 14:53:44,241 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2021-12-30 14:55:55,187 INFO org.hibernate.validator.internal.util.Version [background-preinit] HV000001: Hibernate Validator 6.2.0.Final
2021-12-30 14:55:55,972 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Fetching config from server at : http://localhost:8888
2021-12-30 14:55:56,856 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Located environment: name=dvdtheque-batch, profiles=[local], label=develop, version=aa78cb418a677f296ea0bafead281328aaf85a4e, state=null
2021-12-30 14:55:56,857 INFO org.springframework.cloud.bootstrap.config.PropertySourceBootstrapConfiguration [main] Located property source: [BootstrapPropertySource {name='bootstrapProperties-configClient'}, BootstrapPropertySource {name='bootstrapProperties-https://github.com/fredo1975/spring-cloud-server-config.git/file:C:\Users\fredo\AppData\Local\Temp\config-repo-6509514101851484087\dvdtheque-batch-local.yml'}]
2021-12-30 14:55:56,894 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: local
2021-12-30 14:55:58,128 INFO org.springframework.cloud.context.scope.GenericScope [main] BeanFactory id=f45aa8dc-8b51-32ca-a121-e209a717e395
2021-12-30 14:55:58,622 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8089 (http)
2021-12-30 14:55:58,634 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8089"]
2021-12-30 14:55:58,635 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2021-12-30 14:55:58,636 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.56]
2021-12-30 14:55:58,822 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2021-12-30 14:55:58,822 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1893 ms
2021-12-30 14:55:59,275 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsJob
2021-12-30 14:55:59,277 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsStep
2021-12-30 14:55:59,282 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### ListItemReader
2021-12-30 14:55:59,355 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### excelFilmWriter
2021-12-30 14:55:59,390 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsJob
2021-12-30 14:55:59,395 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsStep
2021-12-30 14:56:00,167 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@552bee2f, org.springframework.security.web.context.SecurityContextPersistenceFilter@11bfd751, org.springframework.security.web.header.HeaderWriterFilter@eb1d475, org.springframework.security.web.csrf.CsrfFilter@35ceec81, org.springframework.security.web.authentication.logout.LogoutFilter@4392362c, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@8ef1d58, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@350342e0, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@457692cb, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@681d704e, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@6a543e09, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2152fde5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@21540255, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2d0f548a, org.springframework.security.oauth2.client.web.OAuth2AuthorizationCodeGrantFilter@43fe2008, org.springframework.security.web.session.SessionManagementFilter@718f3088, org.springframework.security.web.access.ExceptionTranslationFilter@129b69b2, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@65e05005]
2021-12-30 14:56:00,190 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2021-12-30 14:56:00,344 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2021-12-30 14:56:00,355 INFO org.springframework.batch.core.repository.support.JobRepositoryFactoryBean [main] No database type set, using meta data indicating: MYSQL
2021-12-30 14:56:00,377 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher [main] No TaskExecutor has been set, defaulting to synchronous executor.
2021-12-30 14:56:00,639 INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver [main] Exposing 15 endpoint(s) beneath base path '/actuator'
2021-12-30 14:56:00,688 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8089"]
2021-12-30 14:56:00,709 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8089 (http) with context path ''
2021-12-30 14:56:00,836 INFO org.springframework.boot.StartupInfoLogger [main] Started BatchApplication in 6.381 seconds (JVM running for 6.957)
2021-12-30 14:56:00,906 INFO org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner [main] Running default command line with: []
2021-12-30 14:56:01,110 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] launched with the following parameters: [{run.id=5, TIMESTAMP=1640819171000}]
2021-12-30 14:56:01,169 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [exportFilms]
2021-12-30 14:56:01,587 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [exportFilms] executed in 418ms
2021-12-30 14:56:01,759 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] completed with the following parameters: [{run.id=5, TIMESTAMP=1640819171000}] and the following status: [COMPLETED] in 626ms
2021-12-30 14:56:01,830 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{INPUT_FILE_PATH=/opt/dvdtheque_rest_service/tmpFileDir/1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx, run.id=12, TIMESTAMP=1638865538201}]
2021-12-30 14:56:02,275 INFO org.apache.activemq.broker.BrokerService [main] Loaded the Bouncy Castle security provider.
2021-12-30 14:56:02,329 INFO org.apache.activemq.broker.BrokerService [main] Using Persistence Adapter: MemoryPersistenceAdapter
2021-12-30 14:56:02,363 INFO org.apache.activemq.broker.jmx.ManagementContext$1 [JMX connector] JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi
2021-12-30 14:56:02,490 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-14070-1640872562348-0:1) is starting
2021-12-30 14:56:02,497 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-14070-1640872562348-0:1) started
2021-12-30 14:56:02,497 INFO org.apache.activemq.broker.BrokerService [main] For help or more information please see: http://activemq.apache.org
2021-12-30 14:56:02,501 WARN org.apache.activemq.broker.BrokerService [main] Temporary Store limit is 51200 mb (current store usage is 0 mb). The data directory: D:\dev\eclipse-06-2021\workspace\dvdtheque\dvdtheque-batch only has 9203 mb of usable space. - resetting to maximum available disk space: 9203 mb
2021-12-30 14:56:02,529 INFO org.apache.activemq.broker.TransportConnector [main] Connector vm://localhost started
2021-12-30 14:56:02,667 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [cleanDBStep]
2021-12-30 14:56:02,733 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [cleanDBStep] executed in 66ms
2021-12-30 14:56:02,766 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [importFilmsStep]
2021-12-30 14:56:02,809 ERROR org.springframework.batch.core.step.AbstractStep [main] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.batch.item.ItemStreamException: Failed to initialize the reader
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:153)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader$$FastClassBySpringCGLIB$$ebb633d0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:137)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
	at org.springframework.batch.item.file.FlatFileItemReader$$EnhancerBySpringCGLIB$$b7a40d04.open(<generated>)
	at org.springframework.batch.item.support.CompositeItemStream.open(CompositeItemStream.java:104)
	at org.springframework.batch.core.step.tasklet.TaskletStep.open(TaskletStep.java:311)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:205)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy107.run(Unknown Source)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:173)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:160)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:155)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:150)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:793)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:783)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:345)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at fr.fredos.dvdtheque.batch.BatchApplication.main(BatchApplication.java:14)
Caused by: java.lang.IllegalStateException: Input resource must exist (reader is in 'strict' mode): file [D:\opt\dvdtheque_rest_service\tmpFileDir\1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx]
	at org.springframework.batch.item.file.FlatFileItemReader.doOpen(FlatFileItemReader.java:257)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:150)
	... 43 common frames omitted
2021-12-30 14:56:02,815 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [importFilmsStep] executed in 49ms
2021-12-30 14:56:02,874 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{INPUT_FILE_PATH=/opt/dvdtheque_rest_service/tmpFileDir/1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx, run.id=12, TIMESTAMP=1638865538201}] and the following status: [FAILED] in 1s28ms
2021-12-30 14:56:02,973 INFO org.apache.juli.logging.DirectJDKLog [main] Pausing ProtocolHandler ["http-nio-8089"]
2021-12-30 14:56:02,974 INFO org.apache.juli.logging.DirectJDKLog [main] Stopping service [Tomcat]
2021-12-30 14:56:02,978 INFO org.apache.juli.logging.DirectJDKLog [main] Stopping ProtocolHandler ["http-nio-8089"]
2021-12-30 14:56:02,980 INFO org.apache.juli.logging.DirectJDKLog [main] Destroying ProtocolHandler ["http-nio-8089"]
2021-12-30 14:56:02,987 WARN org.springframework.beans.factory.support.DisposableBeanAdapter [main] Custom destroy method 'close' on bean with name 'excelFilmWriter' threw an exception: org.springframework.batch.item.ItemStreamException: Error writing to output file
2021-12-30 14:56:02,994 INFO org.apache.activemq.broker.TransportConnector [main] Connector vm://localhost stopped
2021-12-30 14:56:02,995 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-14070-1640872562348-0:1) is shutting down
2021-12-30 14:56:03,004 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-14070-1640872562348-0:1) uptime 0.712 seconds
2021-12-30 14:56:03,004 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-14070-1640872562348-0:1) is shutdown
2021-12-30 14:56:03,006 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2021-12-30 14:56:03,017 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2021-12-30 14:56:17,737 INFO org.hibernate.validator.internal.util.Version [background-preinit] HV000001: Hibernate Validator 6.2.0.Final
2021-12-30 14:56:18,551 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Fetching config from server at : http://localhost:8888
2021-12-30 14:56:19,111 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Located environment: name=dvdtheque-batch, profiles=[local], label=develop, version=aa78cb418a677f296ea0bafead281328aaf85a4e, state=null
2021-12-30 14:56:19,112 INFO org.springframework.cloud.bootstrap.config.PropertySourceBootstrapConfiguration [main] Located property source: [BootstrapPropertySource {name='bootstrapProperties-configClient'}, BootstrapPropertySource {name='bootstrapProperties-https://github.com/fredo1975/spring-cloud-server-config.git/file:C:\Users\fredo\AppData\Local\Temp\config-repo-6509514101851484087\dvdtheque-batch-local.yml'}]
2021-12-30 14:56:19,131 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: local
2021-12-30 14:56:20,368 INFO org.springframework.cloud.context.scope.GenericScope [main] BeanFactory id=f45aa8dc-8b51-32ca-a121-e209a717e395
2021-12-30 14:56:20,869 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8089 (http)
2021-12-30 14:56:20,881 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8089"]
2021-12-30 14:56:20,881 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2021-12-30 14:56:20,883 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.56]
2021-12-30 14:56:21,148 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2021-12-30 14:56:21,149 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1999 ms
2021-12-30 14:56:21,516 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsJob
2021-12-30 14:56:21,518 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsStep
2021-12-30 14:56:21,525 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### ListItemReader
2021-12-30 14:56:21,605 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### excelFilmWriter
2021-12-30 14:56:21,644 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsJob
2021-12-30 14:56:21,650 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsStep
2021-12-30 14:56:22,434 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@58f50dd0, org.springframework.security.web.context.SecurityContextPersistenceFilter@1d622556, org.springframework.security.web.header.HeaderWriterFilter@ca2be53, org.springframework.security.web.csrf.CsrfFilter@1255de25, org.springframework.security.web.authentication.logout.LogoutFilter@1e8bccfb, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@3a9c11fb, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@5a205ee5, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@e994ca, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@11bfd751, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@3620eab, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@70ee1963, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@12be4f83, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@8ef1d58, org.springframework.security.oauth2.client.web.OAuth2AuthorizationCodeGrantFilter@5256fbc, org.springframework.security.web.session.SessionManagementFilter@70697478, org.springframework.security.web.access.ExceptionTranslationFilter@cf08c97, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4e96cb04]
2021-12-30 14:56:22,458 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2021-12-30 14:56:22,624 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2021-12-30 14:56:22,634 INFO org.springframework.batch.core.repository.support.JobRepositoryFactoryBean [main] No database type set, using meta data indicating: MYSQL
2021-12-30 14:56:22,656 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher [main] No TaskExecutor has been set, defaulting to synchronous executor.
2021-12-30 14:56:22,921 INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver [main] Exposing 15 endpoint(s) beneath base path '/actuator'
2021-12-30 14:56:22,968 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8089"]
2021-12-30 14:56:22,991 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8089 (http) with context path ''
2021-12-30 14:56:23,214 INFO org.springframework.boot.StartupInfoLogger [main] Started BatchApplication in 6.193 seconds (JVM running for 6.795)
2021-12-30 14:56:23,300 INFO org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner [main] Running default command line with: []
2021-12-30 14:56:23,443 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] launched with the following parameters: [{run.id=6, TIMESTAMP=1640819171000}]
2021-12-30 14:56:23,495 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [exportFilms]
2021-12-30 14:56:23,920 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [exportFilms] executed in 425ms
2021-12-30 14:56:24,199 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] completed with the following parameters: [{run.id=6, TIMESTAMP=1640819171000}] and the following status: [COMPLETED] in 732ms
2021-12-30 14:56:24,257 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{INPUT_FILE_PATH=/opt/dvdtheque_rest_service/tmpFileDir/1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx, run.id=13, TIMESTAMP=1638865538201}]
2021-12-30 14:56:24,607 INFO org.apache.activemq.broker.BrokerService [main] Loaded the Bouncy Castle security provider.
2021-12-30 14:56:24,659 INFO org.apache.activemq.broker.BrokerService [main] Using Persistence Adapter: MemoryPersistenceAdapter
2021-12-30 14:56:24,695 INFO org.apache.activemq.broker.jmx.ManagementContext$1 [JMX connector] JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi
2021-12-30 14:56:24,827 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-14095-1640872584686-0:1) is starting
2021-12-30 14:56:24,833 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-14095-1640872584686-0:1) started
2021-12-30 14:56:24,834 INFO org.apache.activemq.broker.BrokerService [main] For help or more information please see: http://activemq.apache.org
2021-12-30 14:56:24,837 WARN org.apache.activemq.broker.BrokerService [main] Temporary Store limit is 51200 mb (current store usage is 0 mb). The data directory: D:\dev\eclipse-06-2021\workspace\dvdtheque\dvdtheque-batch only has 9203 mb of usable space. - resetting to maximum available disk space: 9203 mb
2021-12-30 14:56:24,860 INFO org.apache.activemq.broker.TransportConnector [main] Connector vm://localhost started
2021-12-30 14:56:24,977 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [cleanDBStep]
2021-12-30 14:56:25,060 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [cleanDBStep] executed in 83ms
2021-12-30 14:56:25,130 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [importFilmsStep]
2021-12-30 14:56:25,225 ERROR org.springframework.batch.core.step.AbstractStep [main] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.batch.item.ItemStreamException: Failed to initialize the reader
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:153)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader$$FastClassBySpringCGLIB$$ebb633d0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:137)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
	at org.springframework.batch.item.file.FlatFileItemReader$$EnhancerBySpringCGLIB$$aaa82517.open(<generated>)
	at org.springframework.batch.item.support.CompositeItemStream.open(CompositeItemStream.java:104)
	at org.springframework.batch.core.step.tasklet.TaskletStep.open(TaskletStep.java:311)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:205)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy107.run(Unknown Source)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:173)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:160)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:155)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:150)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:793)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:783)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:345)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at fr.fredos.dvdtheque.batch.BatchApplication.main(BatchApplication.java:14)
Caused by: java.lang.IllegalStateException: Input resource must exist (reader is in 'strict' mode): file [D:\opt\dvdtheque_rest_service\tmpFileDir\1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx]
	at org.springframework.batch.item.file.FlatFileItemReader.doOpen(FlatFileItemReader.java:257)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:150)
	... 43 common frames omitted
2021-12-30 14:56:25,235 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [importFilmsStep] executed in 103ms
2021-12-30 14:56:25,262 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{INPUT_FILE_PATH=/opt/dvdtheque_rest_service/tmpFileDir/1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx, run.id=13, TIMESTAMP=1638865538201}] and the following status: [FAILED] in 993ms
2021-12-30 14:56:25,343 INFO org.apache.juli.logging.DirectJDKLog [main] Pausing ProtocolHandler ["http-nio-8089"]
2021-12-30 14:56:25,344 INFO org.apache.juli.logging.DirectJDKLog [main] Stopping service [Tomcat]
2021-12-30 14:56:25,348 INFO org.apache.juli.logging.DirectJDKLog [main] Stopping ProtocolHandler ["http-nio-8089"]
2021-12-30 14:56:25,349 INFO org.apache.juli.logging.DirectJDKLog [main] Destroying ProtocolHandler ["http-nio-8089"]
2021-12-30 14:56:25,355 WARN org.springframework.beans.factory.support.DisposableBeanAdapter [main] Custom destroy method 'close' on bean with name 'excelFilmWriter' threw an exception: org.springframework.batch.item.ItemStreamException: Error writing to output file
2021-12-30 14:56:25,362 INFO org.apache.activemq.broker.TransportConnector [main] Connector vm://localhost stopped
2021-12-30 14:56:25,362 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-14095-1640872584686-0:1) is shutting down
2021-12-30 14:56:25,371 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-14095-1640872584686-0:1) uptime 0.749 seconds
2021-12-30 14:56:25,372 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-14095-1640872584686-0:1) is shutdown
2021-12-30 14:56:25,373 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2021-12-30 14:56:25,382 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2021-12-30 18:30:47,156 INFO org.hibernate.validator.internal.util.Version [background-preinit] HV000001: Hibernate Validator 6.2.0.Final
2021-12-30 18:30:47,960 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Fetching config from server at : http://localhost:8888
2021-12-30 18:30:48,578 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Located environment: name=dvdtheque-batch, profiles=[local], label=develop, version=aa78cb418a677f296ea0bafead281328aaf85a4e, state=null
2021-12-30 18:30:48,579 INFO org.springframework.cloud.bootstrap.config.PropertySourceBootstrapConfiguration [main] Located property source: [BootstrapPropertySource {name='bootstrapProperties-configClient'}, BootstrapPropertySource {name='bootstrapProperties-https://github.com/fredo1975/spring-cloud-server-config.git/file:C:\Users\fredo\AppData\Local\Temp\config-repo-6509514101851484087\dvdtheque-batch-local.yml'}]
2021-12-30 18:30:48,597 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: local
2021-12-30 18:30:49,890 INFO org.springframework.cloud.context.scope.GenericScope [main] BeanFactory id=abfec860-0e0f-3fac-b618-addd63298313
2021-12-30 18:30:50,034 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@61cda923' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 18:30:50,041 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 18:30:50,514 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8089 (http)
2021-12-30 18:30:50,526 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8089"]
2021-12-30 18:30:50,527 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2021-12-30 18:30:50,528 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.56]
2021-12-30 18:30:50,705 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2021-12-30 18:30:50,705 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2093 ms
2021-12-30 18:30:51,160 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsJob
2021-12-30 18:30:51,162 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsStep
2021-12-30 18:30:51,167 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### ListItemReader
2021-12-30 18:30:51,246 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### excelFilmWriter
2021-12-30 18:30:51,278 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsJob
2021-12-30 18:30:51,282 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsStep
2021-12-30 18:30:51,966 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2021-12-30 18:30:52,121 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2021-12-30 18:30:52,131 INFO org.springframework.batch.core.repository.support.JobRepositoryFactoryBean [main] No database type set, using meta data indicating: MYSQL
2021-12-30 18:30:52,152 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher [main] No TaskExecutor has been set, defaulting to synchronous executor.
2021-12-30 18:30:52,369 WARN org.springframework.context.support.AbstractApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method 'springSecurityFilterChain' threw exception; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.oauth2.jwt.JwtDecoder' available
2021-12-30 18:30:52,373 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2021-12-30 18:30:52,384 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2021-12-30 18:30:52,389 INFO org.apache.juli.logging.DirectJDKLog [main] Stopping service [Tomcat]
2021-12-30 18:30:52,414 INFO org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLoggingListener [main] 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2021-12-30 18:30:52,436 ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter [main] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Method springSecurityFilterChain in org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration required a bean of type 'org.springframework.security.oauth2.jwt.JwtDecoder' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.oauth2.jwt.JwtDecoder' in your configuration.

2021-12-30 18:33:10,351 INFO org.hibernate.validator.internal.util.Version [background-preinit] HV000001: Hibernate Validator 6.2.0.Final
2021-12-30 18:33:11,303 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Fetching config from server at : http://localhost:8888
2021-12-30 18:33:11,969 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Located environment: name=dvdtheque-batch, profiles=[local], label=develop, version=aa78cb418a677f296ea0bafead281328aaf85a4e, state=null
2021-12-30 18:33:11,970 INFO org.springframework.cloud.bootstrap.config.PropertySourceBootstrapConfiguration [main] Located property source: [BootstrapPropertySource {name='bootstrapProperties-configClient'}, BootstrapPropertySource {name='bootstrapProperties-https://github.com/fredo1975/spring-cloud-server-config.git/file:C:\Users\fredo\AppData\Local\Temp\config-repo-6509514101851484087\dvdtheque-batch-local.yml'}]
2021-12-30 18:33:11,990 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: local
2021-12-30 18:33:13,286 INFO org.springframework.cloud.context.scope.GenericScope [main] BeanFactory id=abfec860-0e0f-3fac-b618-addd63298313
2021-12-30 18:33:13,432 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@8f40022' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 18:33:13,439 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 18:33:13,918 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8089 (http)
2021-12-30 18:33:13,930 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8089"]
2021-12-30 18:33:13,930 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2021-12-30 18:33:13,931 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.56]
2021-12-30 18:33:14,144 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2021-12-30 18:33:14,144 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2140 ms
2021-12-30 18:33:14,669 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsJob
2021-12-30 18:33:14,671 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsStep
2021-12-30 18:33:14,677 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### ListItemReader
2021-12-30 18:33:14,760 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### excelFilmWriter
2021-12-30 18:33:14,797 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsJob
2021-12-30 18:33:14,801 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsStep
2021-12-30 18:33:15,386 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2021-12-30 18:33:15,536 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2021-12-30 18:33:15,546 INFO org.springframework.batch.core.repository.support.JobRepositoryFactoryBean [main] No database type set, using meta data indicating: MYSQL
2021-12-30 18:33:15,644 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher [main] No TaskExecutor has been set, defaulting to synchronous executor.
2021-12-30 18:33:15,882 WARN org.springframework.context.support.AbstractApplicationContext [main] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method 'springSecurityFilterChain' threw exception; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.oauth2.jwt.JwtDecoder' available
2021-12-30 18:33:15,886 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Shutdown initiated...
2021-12-30 18:33:15,899 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Shutdown completed.
2021-12-30 18:33:15,904 INFO org.apache.juli.logging.DirectJDKLog [main] Stopping service [Tomcat]
2021-12-30 18:33:15,931 INFO org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLoggingListener [main] 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2021-12-30 18:33:15,955 ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter [main] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Method springSecurityFilterChain in org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration required a bean of type 'org.springframework.security.oauth2.jwt.JwtDecoder' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.oauth2.jwt.JwtDecoder' in your configuration.

2021-12-30 18:36:00,120 INFO org.hibernate.validator.internal.util.Version [background-preinit] HV000001: Hibernate Validator 6.2.0.Final
2021-12-30 18:36:00,893 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Fetching config from server at : http://localhost:8888
2021-12-30 18:36:01,732 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Located environment: name=dvdtheque-batch, profiles=[local], label=develop, version=1565f9bae5c1bde661c1404cdaa56c4f46d3fc30, state=null
2021-12-30 18:36:01,733 INFO org.springframework.cloud.bootstrap.config.PropertySourceBootstrapConfiguration [main] Located property source: [BootstrapPropertySource {name='bootstrapProperties-configClient'}, BootstrapPropertySource {name='bootstrapProperties-https://github.com/fredo1975/spring-cloud-server-config.git/file:C:\Users\fredo\AppData\Local\Temp\config-repo-6509514101851484087\dvdtheque-batch-local.yml'}]
2021-12-30 18:36:01,768 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: local
2021-12-30 18:36:03,165 INFO org.springframework.cloud.context.scope.GenericScope [main] BeanFactory id=eb7b8341-4ad2-3821-b3d2-ec04a3a6b206
2021-12-30 18:36:03,329 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@37a0ec3c' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 18:36:03,336 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 18:36:03,736 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8089 (http)
2021-12-30 18:36:03,750 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8089"]
2021-12-30 18:36:03,751 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2021-12-30 18:36:03,752 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.56]
2021-12-30 18:36:03,982 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2021-12-30 18:36:03,982 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2174 ms
2021-12-30 18:36:04,533 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsJob
2021-12-30 18:36:04,535 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsStep
2021-12-30 18:36:04,542 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### ListItemReader
2021-12-30 18:36:04,635 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### excelFilmWriter
2021-12-30 18:36:04,685 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsJob
2021-12-30 18:36:04,696 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsStep
2021-12-30 18:36:05,508 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2021-12-30 18:36:05,657 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2021-12-30 18:36:05,670 INFO org.springframework.batch.core.repository.support.JobRepositoryFactoryBean [main] No database type set, using meta data indicating: MYSQL
2021-12-30 18:36:05,691 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher [main] No TaskExecutor has been set, defaulting to synchronous executor.
2021-12-30 18:36:06,121 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6ca367aa, org.springframework.security.web.context.SecurityContextPersistenceFilter@813ab53, org.springframework.security.web.header.HeaderWriterFilter@4f356b98, org.springframework.security.web.csrf.CsrfFilter@7131d668, org.springframework.security.web.authentication.logout.LogoutFilter@33e4068, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@5bb39285, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@2b0d85bd, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@b340615, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@30ed4034, org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter@7b8d6c66, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@62c47480, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1554eaa4, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1700d089, org.springframework.security.web.session.SessionManagementFilter@504c415c, org.springframework.security.web.access.ExceptionTranslationFilter@8585cdd, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@1ead3c67]
2021-12-30 18:36:06,393 INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver [main] Exposing 15 endpoint(s) beneath base path '/actuator'
2021-12-30 18:36:06,447 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8089"]
2021-12-30 18:36:06,467 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8089 (http) with context path ''
2021-12-30 18:36:06,593 INFO org.springframework.boot.StartupInfoLogger [main] Started BatchApplication in 7.305 seconds (JVM running for 8.009)
2021-12-30 18:36:06,634 INFO org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner [main] Running default command line with: []
2021-12-30 18:36:06,765 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] launched with the following parameters: [{run.id=7, TIMESTAMP=1640819171000}]
2021-12-30 18:36:06,812 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [exportFilms]
2021-12-30 18:36:07,253 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [exportFilms] executed in 440ms
2021-12-30 18:36:07,535 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] completed with the following parameters: [{run.id=7, TIMESTAMP=1640819171000}] and the following status: [COMPLETED] in 748ms
2021-12-30 18:36:07,629 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{INPUT_FILE_PATH=/opt/dvdtheque_rest_service/tmpFileDir/1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx, run.id=14, TIMESTAMP=1638865538201}]
2021-12-30 18:36:08,044 INFO org.apache.activemq.broker.BrokerService [main] Loaded the Bouncy Castle security provider.
2021-12-30 18:36:08,099 INFO org.apache.activemq.broker.BrokerService [main] Using Persistence Adapter: MemoryPersistenceAdapter
2021-12-30 18:36:08,132 INFO org.apache.activemq.broker.jmx.ManagementContext$1 [JMX connector] JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi
2021-12-30 18:36:08,247 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-31636-1640885768118-0:1) is starting
2021-12-30 18:36:08,253 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-31636-1640885768118-0:1) started
2021-12-30 18:36:08,253 INFO org.apache.activemq.broker.BrokerService [main] For help or more information please see: http://activemq.apache.org
2021-12-30 18:36:08,256 WARN org.apache.activemq.broker.BrokerService [main] Temporary Store limit is 51200 mb (current store usage is 0 mb). The data directory: D:\dev\eclipse-06-2021\workspace\dvdtheque\dvdtheque-batch only has 9202 mb of usable space. - resetting to maximum available disk space: 9202 mb
2021-12-30 18:36:08,279 INFO org.apache.activemq.broker.TransportConnector [main] Connector vm://localhost started
2021-12-30 18:36:08,458 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [cleanDBStep]
2021-12-30 18:36:08,524 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [cleanDBStep] executed in 65ms
2021-12-30 18:36:08,558 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [importFilmsStep]
2021-12-30 18:36:08,597 ERROR org.springframework.batch.core.step.AbstractStep [main] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.batch.item.ItemStreamException: Failed to initialize the reader
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:153)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader$$FastClassBySpringCGLIB$$ebb633d0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:137)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
	at org.springframework.batch.item.file.FlatFileItemReader$$EnhancerBySpringCGLIB$$7701aef9.open(<generated>)
	at org.springframework.batch.item.support.CompositeItemStream.open(CompositeItemStream.java:104)
	at org.springframework.batch.core.step.tasklet.TaskletStep.open(TaskletStep.java:311)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:205)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy107.run(Unknown Source)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:173)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:160)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:155)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:150)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:793)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:783)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:345)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at fr.fredos.dvdtheque.batch.BatchApplication.main(BatchApplication.java:17)
Caused by: java.lang.IllegalStateException: Input resource must exist (reader is in 'strict' mode): file [D:\opt\dvdtheque_rest_service\tmpFileDir\1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx]
	at org.springframework.batch.item.file.FlatFileItemReader.doOpen(FlatFileItemReader.java:257)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:150)
	... 43 common frames omitted
2021-12-30 18:36:08,603 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [importFilmsStep] executed in 45ms
2021-12-30 18:36:08,634 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{INPUT_FILE_PATH=/opt/dvdtheque_rest_service/tmpFileDir/1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx, run.id=14, TIMESTAMP=1638865538201}] and the following status: [FAILED] in 988ms
2021-12-30 18:37:11,976 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-8089-exec-1] Exception Processing /dvdtheque-batch-service/invokejob/importFilmsJob
java.lang.RuntimeException: Must set 'realm' in config
	at org.keycloak.adapters.KeycloakDeploymentBuilder.internalBuild(KeycloakDeploymentBuilder.java:57)
	at org.keycloak.adapters.KeycloakDeploymentBuilder.build(KeycloakDeploymentBuilder.java:202)
	at org.keycloak.adapters.springboot.KeycloakSpringBootConfigResolver.resolve(KeycloakSpringBootConfigResolver.java:41)
	at org.keycloak.adapters.springsecurity.config.KeycloakSpringConfigResolverWrapper.resolve(KeycloakSpringConfigResolverWrapper.java:40)
	at org.keycloak.adapters.AdapterDeploymentContext.resolveDeployment(AdapterDeploymentContext.java:89)
	at org.keycloak.adapters.PreAuthActionsHandler.preflightCors(PreAuthActionsHandler.java:100)
	at org.keycloak.adapters.PreAuthActionsHandler.handleRequest(PreAuthActionsHandler.java:75)
	at org.keycloak.adapters.tomcat.AbstractKeycloakAuthenticatorValve.invoke(AbstractKeycloakAuthenticatorValve.java:177)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2021-12-30 18:37:11,991 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8089-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-30 18:37:11,992 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Initializing Servlet 'dispatcherServlet'
2021-12-30 18:37:11,996 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Completed initialization in 4 ms
2021-12-30 18:37:12,318 WARN org.apache.juli.logging.DirectJDKLog [http-nio-8089-exec-1] Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [236] milliseconds.
2021-12-30 18:37:29,805 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-8089-exec-3] Exception Processing /dvdtheque-batch-service/invokejob/importFilmsJob
java.lang.RuntimeException: Must set 'realm' in config
	at org.keycloak.adapters.KeycloakDeploymentBuilder.internalBuild(KeycloakDeploymentBuilder.java:57)
	at org.keycloak.adapters.KeycloakDeploymentBuilder.build(KeycloakDeploymentBuilder.java:202)
	at org.keycloak.adapters.springboot.KeycloakSpringBootConfigResolver.resolve(KeycloakSpringBootConfigResolver.java:41)
	at org.keycloak.adapters.springsecurity.config.KeycloakSpringConfigResolverWrapper.resolve(KeycloakSpringConfigResolverWrapper.java:40)
	at org.keycloak.adapters.AdapterDeploymentContext.resolveDeployment(AdapterDeploymentContext.java:89)
	at org.keycloak.adapters.PreAuthActionsHandler.preflightCors(PreAuthActionsHandler.java:100)
	at org.keycloak.adapters.PreAuthActionsHandler.handleRequest(PreAuthActionsHandler.java:75)
	at org.keycloak.adapters.tomcat.AbstractKeycloakAuthenticatorValve.invoke(AbstractKeycloakAuthenticatorValve.java:177)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2021-12-30 18:39:13,672 INFO org.hibernate.validator.internal.util.Version [background-preinit] HV000001: Hibernate Validator 6.2.0.Final
2021-12-30 18:39:14,492 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Fetching config from server at : http://localhost:8888
2021-12-30 18:39:15,287 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Located environment: name=dvdtheque-batch, profiles=[local], label=develop, version=a143f44cff2eba1ad61b0b7efe54f4c0a756e082, state=null
2021-12-30 18:39:15,288 INFO org.springframework.cloud.bootstrap.config.PropertySourceBootstrapConfiguration [main] Located property source: [BootstrapPropertySource {name='bootstrapProperties-configClient'}, BootstrapPropertySource {name='bootstrapProperties-https://github.com/fredo1975/spring-cloud-server-config.git/file:C:\Users\fredo\AppData\Local\Temp\config-repo-6509514101851484087\dvdtheque-batch-local.yml'}]
2021-12-30 18:39:15,317 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: local
2021-12-30 18:39:16,585 INFO org.springframework.cloud.context.scope.GenericScope [main] BeanFactory id=eb7b8341-4ad2-3821-b3d2-ec04a3a6b206
2021-12-30 18:39:16,735 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@42ea7565' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 18:39:16,743 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 18:39:17,143 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8089 (http)
2021-12-30 18:39:17,220 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8089"]
2021-12-30 18:39:17,222 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2021-12-30 18:39:17,224 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.56]
2021-12-30 18:39:17,448 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2021-12-30 18:39:17,448 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2116 ms
2021-12-30 18:39:17,892 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsJob
2021-12-30 18:39:17,895 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsStep
2021-12-30 18:39:17,900 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### ListItemReader
2021-12-30 18:39:17,982 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### excelFilmWriter
2021-12-30 18:39:18,013 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsJob
2021-12-30 18:39:18,018 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsStep
2021-12-30 18:39:18,791 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2021-12-30 18:39:18,940 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2021-12-30 18:39:18,952 INFO org.springframework.batch.core.repository.support.JobRepositoryFactoryBean [main] No database type set, using meta data indicating: MYSQL
2021-12-30 18:39:18,974 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher [main] No TaskExecutor has been set, defaulting to synchronous executor.
2021-12-30 18:39:19,360 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2b0d85bd, org.springframework.security.web.context.SecurityContextPersistenceFilter@46a97805, org.springframework.security.web.header.HeaderWriterFilter@1ed52f44, org.springframework.security.web.csrf.CsrfFilter@30a791a6, org.springframework.security.web.authentication.logout.LogoutFilter@6c9e74f3, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@2de7fe0e, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@2ff8d39b, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@54e18a46, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@102ecb61, org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter@5bb39285, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@af04f09, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@67d180e4, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1fd0ae78, org.springframework.security.web.session.SessionManagementFilter@3abadb65, org.springframework.security.web.access.ExceptionTranslationFilter@66456506, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@349aeec4]
2021-12-30 18:39:19,531 INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver [main] Exposing 15 endpoint(s) beneath base path '/actuator'
2021-12-30 18:39:19,588 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8089"]
2021-12-30 18:39:19,606 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8089 (http) with context path ''
2021-12-30 18:39:19,735 INFO org.springframework.boot.StartupInfoLogger [main] Started BatchApplication in 6.806 seconds (JVM running for 7.368)
2021-12-30 18:39:19,779 INFO org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner [main] Running default command line with: []
2021-12-30 18:39:19,909 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] launched with the following parameters: [{run.id=8, TIMESTAMP=1640819171000}]
2021-12-30 18:39:19,953 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [exportFilms]
2021-12-30 18:39:20,459 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [exportFilms] executed in 505ms
2021-12-30 18:39:20,639 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] completed with the following parameters: [{run.id=8, TIMESTAMP=1640819171000}] and the following status: [COMPLETED] in 707ms
2021-12-30 18:39:20,709 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{INPUT_FILE_PATH=/opt/dvdtheque_rest_service/tmpFileDir/1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx, run.id=15, TIMESTAMP=1638865538201}]
2021-12-30 18:39:21,038 INFO org.apache.activemq.broker.BrokerService [main] Loaded the Bouncy Castle security provider.
2021-12-30 18:39:21,088 INFO org.apache.activemq.broker.BrokerService [main] Using Persistence Adapter: MemoryPersistenceAdapter
2021-12-30 18:39:21,125 INFO org.apache.activemq.broker.jmx.ManagementContext$1 [JMX connector] JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi
2021-12-30 18:39:21,247 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-31684-1640885961110-0:1) is starting
2021-12-30 18:39:21,252 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-31684-1640885961110-0:1) started
2021-12-30 18:39:21,253 INFO org.apache.activemq.broker.BrokerService [main] For help or more information please see: http://activemq.apache.org
2021-12-30 18:39:21,255 WARN org.apache.activemq.broker.BrokerService [main] Temporary Store limit is 51200 mb (current store usage is 0 mb). The data directory: D:\dev\eclipse-06-2021\workspace\dvdtheque\dvdtheque-batch only has 9202 mb of usable space. - resetting to maximum available disk space: 9202 mb
2021-12-30 18:39:21,279 INFO org.apache.activemq.broker.TransportConnector [main] Connector vm://localhost started
2021-12-30 18:39:21,463 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [cleanDBStep]
2021-12-30 18:39:21,530 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [cleanDBStep] executed in 67ms
2021-12-30 18:39:21,563 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [importFilmsStep]
2021-12-30 18:39:21,598 ERROR org.springframework.batch.core.step.AbstractStep [main] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.batch.item.ItemStreamException: Failed to initialize the reader
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:153)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader$$FastClassBySpringCGLIB$$ebb633d0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:137)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
	at org.springframework.batch.item.file.FlatFileItemReader$$EnhancerBySpringCGLIB$$616daa8f.open(<generated>)
	at org.springframework.batch.item.support.CompositeItemStream.open(CompositeItemStream.java:104)
	at org.springframework.batch.core.step.tasklet.TaskletStep.open(TaskletStep.java:311)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:205)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy107.run(Unknown Source)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:173)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:160)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:155)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:150)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:793)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:783)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:345)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at fr.fredos.dvdtheque.batch.BatchApplication.main(BatchApplication.java:17)
Caused by: java.lang.IllegalStateException: Input resource must exist (reader is in 'strict' mode): file [D:\opt\dvdtheque_rest_service\tmpFileDir\1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx]
	at org.springframework.batch.item.file.FlatFileItemReader.doOpen(FlatFileItemReader.java:257)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:150)
	... 43 common frames omitted
2021-12-30 18:39:21,602 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [importFilmsStep] executed in 39ms
2021-12-30 18:39:21,626 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{INPUT_FILE_PATH=/opt/dvdtheque_rest_service/tmpFileDir/1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx, run.id=15, TIMESTAMP=1638865538201}] and the following status: [FAILED] in 905ms
2021-12-30 18:39:26,333 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-8089-exec-2] Exception Processing /dvdtheque-batch-service/invokejob/importFilmsJob
java.lang.RuntimeException: Must set 'realm' in config
	at org.keycloak.adapters.KeycloakDeploymentBuilder.internalBuild(KeycloakDeploymentBuilder.java:57)
	at org.keycloak.adapters.KeycloakDeploymentBuilder.build(KeycloakDeploymentBuilder.java:202)
	at org.keycloak.adapters.springboot.KeycloakSpringBootConfigResolver.resolve(KeycloakSpringBootConfigResolver.java:41)
	at org.keycloak.adapters.springsecurity.config.KeycloakSpringConfigResolverWrapper.resolve(KeycloakSpringConfigResolverWrapper.java:40)
	at org.keycloak.adapters.AdapterDeploymentContext.resolveDeployment(AdapterDeploymentContext.java:89)
	at org.keycloak.adapters.PreAuthActionsHandler.preflightCors(PreAuthActionsHandler.java:100)
	at org.keycloak.adapters.PreAuthActionsHandler.handleRequest(PreAuthActionsHandler.java:75)
	at org.keycloak.adapters.tomcat.AbstractKeycloakAuthenticatorValve.invoke(AbstractKeycloakAuthenticatorValve.java:177)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2021-12-30 18:39:26,345 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8089-exec-2] Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-30 18:39:26,346 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-2] Initializing Servlet 'dispatcherServlet'
2021-12-30 18:39:26,349 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-2] Completed initialization in 3 ms
2021-12-30 18:39:26,505 WARN org.apache.juli.logging.DirectJDKLog [http-nio-8089-exec-2] Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [123] milliseconds.
2021-12-30 18:42:28,899 INFO org.hibernate.validator.internal.util.Version [background-preinit] HV000001: Hibernate Validator 6.2.0.Final
2021-12-30 18:42:29,972 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Fetching config from server at : http://localhost:8888
2021-12-30 18:42:30,884 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Located environment: name=dvdtheque-batch-service, profiles=[local], label=develop, version=808cf33b6c63dd2783782a4236085eb8f2e6e212, state=null
2021-12-30 18:42:30,885 INFO org.springframework.cloud.bootstrap.config.PropertySourceBootstrapConfiguration [main] Located property source: [BootstrapPropertySource {name='bootstrapProperties-configClient'}, BootstrapPropertySource {name='bootstrapProperties-https://github.com/fredo1975/spring-cloud-server-config.git/file:C:\Users\fredo\AppData\Local\Temp\config-repo-6509514101851484087\dvdtheque-batch-service-local.yml'}]
2021-12-30 18:42:30,903 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: local
2021-12-30 18:42:32,282 INFO org.springframework.cloud.context.scope.GenericScope [main] BeanFactory id=eb7b8341-4ad2-3821-b3d2-ec04a3a6b206
2021-12-30 18:42:32,428 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@5232e3f1' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 18:42:32,434 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 18:42:32,834 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8089 (http)
2021-12-30 18:42:32,845 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8089"]
2021-12-30 18:42:32,846 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2021-12-30 18:42:32,847 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.56]
2021-12-30 18:42:33,050 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2021-12-30 18:42:33,051 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2131 ms
2021-12-30 18:42:33,578 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsJob
2021-12-30 18:42:33,581 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsStep
2021-12-30 18:42:33,586 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### ListItemReader
2021-12-30 18:42:33,670 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### excelFilmWriter
2021-12-30 18:42:33,703 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsJob
2021-12-30 18:42:33,708 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsStep
2021-12-30 18:42:34,454 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2021-12-30 18:42:34,607 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2021-12-30 18:42:34,619 INFO org.springframework.batch.core.repository.support.JobRepositoryFactoryBean [main] No database type set, using meta data indicating: MYSQL
2021-12-30 18:42:34,643 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher [main] No TaskExecutor has been set, defaulting to synchronous executor.
2021-12-30 18:42:34,919 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@15d0b458, org.springframework.security.web.context.SecurityContextPersistenceFilter@3e55eeb9, org.springframework.security.web.header.HeaderWriterFilter@3c6b300a, org.springframework.security.web.csrf.CsrfFilter@6b33892a, org.springframework.security.web.authentication.logout.LogoutFilter@12d35bc9, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@4a2dbcfc, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@7b8d6c66, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@5807ea46, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@72a0a60d, org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter@38caad07, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1253b822, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3a589eed, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@65930e02, org.springframework.security.web.session.SessionManagementFilter@7074da1d, org.springframework.security.web.access.ExceptionTranslationFilter@1554eaa4, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4258106]
2021-12-30 18:42:35,112 INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver [main] Exposing 15 endpoint(s) beneath base path '/actuator'
2021-12-30 18:42:35,188 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8089"]
2021-12-30 18:42:35,247 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8089 (http) with context path ''
2021-12-30 18:42:35,456 INFO org.springframework.boot.StartupInfoLogger [main] Started BatchApplication in 7.28 seconds (JVM running for 7.968)
2021-12-30 18:42:35,499 INFO org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner [main] Running default command line with: []
2021-12-30 18:42:35,625 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] launched with the following parameters: [{run.id=9, TIMESTAMP=1640819171000}]
2021-12-30 18:42:35,671 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [exportFilms]
2021-12-30 18:42:36,082 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [exportFilms] executed in 410ms
2021-12-30 18:42:36,250 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] completed with the following parameters: [{run.id=9, TIMESTAMP=1640819171000}] and the following status: [COMPLETED] in 604ms
2021-12-30 18:42:36,478 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{INPUT_FILE_PATH=/opt/dvdtheque_rest_service/tmpFileDir/1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx, run.id=16, TIMESTAMP=1638865538201}]
2021-12-30 18:42:36,799 INFO org.apache.activemq.broker.BrokerService [main] Loaded the Bouncy Castle security provider.
2021-12-30 18:42:36,856 INFO org.apache.activemq.broker.BrokerService [main] Using Persistence Adapter: MemoryPersistenceAdapter
2021-12-30 18:42:36,890 INFO org.apache.activemq.broker.jmx.ManagementContext$1 [JMX connector] JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi
2021-12-30 18:42:37,004 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-31722-1640886156879-0:1) is starting
2021-12-30 18:42:37,010 INFO org.apache.activemq.broker.BrokerService [main] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-31722-1640886156879-0:1) started
2021-12-30 18:42:37,010 INFO org.apache.activemq.broker.BrokerService [main] For help or more information please see: http://activemq.apache.org
2021-12-30 18:42:37,013 WARN org.apache.activemq.broker.BrokerService [main] Temporary Store limit is 51200 mb (current store usage is 0 mb). The data directory: D:\dev\eclipse-06-2021\workspace\dvdtheque\dvdtheque-batch only has 9202 mb of usable space. - resetting to maximum available disk space: 9202 mb
2021-12-30 18:42:37,036 INFO org.apache.activemq.broker.TransportConnector [main] Connector vm://localhost started
2021-12-30 18:42:37,133 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [cleanDBStep]
2021-12-30 18:42:37,205 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [cleanDBStep] executed in 72ms
2021-12-30 18:42:37,239 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [importFilmsStep]
2021-12-30 18:42:37,273 ERROR org.springframework.batch.core.step.AbstractStep [main] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.batch.item.ItemStreamException: Failed to initialize the reader
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:153)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader$$FastClassBySpringCGLIB$$ebb633d0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:137)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
	at org.springframework.batch.item.file.FlatFileItemReader$$EnhancerBySpringCGLIB$$7f36860b.open(<generated>)
	at org.springframework.batch.item.support.CompositeItemStream.open(CompositeItemStream.java:104)
	at org.springframework.batch.core.step.tasklet.TaskletStep.open(TaskletStep.java:311)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:205)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy108.run(Unknown Source)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:173)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:160)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:155)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:150)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:793)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:783)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:345)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at fr.fredos.dvdtheque.batch.BatchApplication.main(BatchApplication.java:19)
Caused by: java.lang.IllegalStateException: Input resource must exist (reader is in 'strict' mode): file [D:\opt\dvdtheque_rest_service\tmpFileDir\1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx]
	at org.springframework.batch.item.file.FlatFileItemReader.doOpen(FlatFileItemReader.java:257)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:150)
	... 43 common frames omitted
2021-12-30 18:42:37,278 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [importFilmsStep] executed in 39ms
2021-12-30 18:42:37,302 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{INPUT_FILE_PATH=/opt/dvdtheque_rest_service/tmpFileDir/1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx, run.id=16, TIMESTAMP=1638865538201}] and the following status: [FAILED] in 812ms
2021-12-30 18:46:25,337 INFO org.hibernate.validator.internal.util.Version [background-preinit] HV000001: Hibernate Validator 6.2.0.Final
2021-12-30 18:46:26,057 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Fetching config from server at : http://localhost:8888
2021-12-30 18:46:26,581 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Located environment: name=dvdtheque-batch-service, profiles=[local], label=develop, version=808cf33b6c63dd2783782a4236085eb8f2e6e212, state=null
2021-12-30 18:46:26,582 INFO org.springframework.cloud.bootstrap.config.PropertySourceBootstrapConfiguration [main] Located property source: [BootstrapPropertySource {name='bootstrapProperties-configClient'}, BootstrapPropertySource {name='bootstrapProperties-https://github.com/fredo1975/spring-cloud-server-config.git/file:C:\Users\fredo\AppData\Local\Temp\config-repo-6509514101851484087\dvdtheque-batch-service-local.yml'}]
2021-12-30 18:46:26,609 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: local
2021-12-30 18:46:28,039 INFO org.springframework.cloud.context.scope.GenericScope [main] BeanFactory id=14cdece2-f8e4-36be-9023-51d68ff07111
2021-12-30 18:46:28,411 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@1cd2143b' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 18:46:28,425 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 18:46:28,837 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8089 (http)
2021-12-30 18:46:28,848 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8089"]
2021-12-30 18:46:28,849 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2021-12-30 18:46:28,850 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.56]
2021-12-30 18:46:29,009 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2021-12-30 18:46:29,010 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2380 ms
2021-12-30 18:46:29,526 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsJob
2021-12-30 18:46:29,529 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsStep
2021-12-30 18:46:29,535 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### ListItemReader
2021-12-30 18:46:29,619 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### excelFilmWriter
2021-12-30 18:46:29,652 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsJob
2021-12-30 18:46:29,656 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsStep
2021-12-30 18:46:30,634 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2021-12-30 18:46:30,865 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2021-12-30 18:46:30,875 INFO org.springframework.batch.core.repository.support.JobRepositoryFactoryBean [main] No database type set, using meta data indicating: MYSQL
2021-12-30 18:46:30,896 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher [main] No TaskExecutor has been set, defaulting to synchronous executor.
2021-12-30 18:46:31,144 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@169d1f92, org.springframework.security.web.context.SecurityContextPersistenceFilter@1cfb7450, org.springframework.security.web.header.HeaderWriterFilter@1ddc8fc, org.springframework.security.web.csrf.CsrfFilter@3892802b, org.springframework.security.web.authentication.logout.LogoutFilter@25d23478, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@19540247, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@acb1c9c, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@3cab07dd, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@7fcbc336, org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter@6be2b567, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1d1deb11, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@18bc1064, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1fe7fa16, org.springframework.security.web.session.SessionManagementFilter@1e288c76, org.springframework.security.web.access.ExceptionTranslationFilter@221961af, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@641e67fa]
2021-12-30 18:46:31,296 INFO org.springframework.cloud.netflix.eureka.config.DiscoveryClientOptionalArgsConfiguration [main] Eureka HTTP Client uses RestTemplate.
2021-12-30 18:46:31,371 WARN org.springframework.cloud.loadbalancer.config.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger [main] Spring Cloud LoadBalancer is currently working with the default cache. You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2021-12-30 18:46:31,378 INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver [main] Exposing 16 endpoint(s) beneath base path '/actuator'
2021-12-30 18:46:31,451 INFO org.springframework.cloud.netflix.eureka.InstanceInfoFactory [main] Setting initial instance status as: STARTING
2021-12-30 18:46:31,610 INFO com.netflix.discovery.DiscoveryClient [main] Initializing Eureka in region us-east-1
2021-12-30 18:46:31,616 INFO com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver [main] Resolving eureka endpoints via configuration
2021-12-30 18:46:31,642 INFO com.netflix.discovery.DiscoveryClient [main] Disable delta property : false
2021-12-30 18:46:31,643 INFO com.netflix.discovery.DiscoveryClient [main] Single vip registry refresh property : null
2021-12-30 18:46:31,643 INFO com.netflix.discovery.DiscoveryClient [main] Force full registry fetch : false
2021-12-30 18:46:31,643 INFO com.netflix.discovery.DiscoveryClient [main] Application is null : false
2021-12-30 18:46:31,644 INFO com.netflix.discovery.DiscoveryClient [main] Registered Applications size is zero : true
2021-12-30 18:46:31,644 INFO com.netflix.discovery.DiscoveryClient [main] Application version is -1: true
2021-12-30 18:46:31,644 INFO com.netflix.discovery.DiscoveryClient [main] Getting all instance registry info from the eureka server
2021-12-30 18:46:31,884 INFO com.netflix.discovery.DiscoveryClient [main] The response status is 200
2021-12-30 18:46:31,889 INFO com.netflix.discovery.DiscoveryClient [main] Starting heartbeat executor: renew interval is: 2
2021-12-30 18:46:31,893 INFO com.netflix.discovery.InstanceInfoReplicator [main] InstanceInfoReplicator onDemand update allowed rate per min is 4
2021-12-30 18:46:31,899 INFO com.netflix.discovery.DiscoveryClient [main] Discovery Client initialized at timestamp 1640886391898 with initial instances count: 4
2021-12-30 18:46:31,903 INFO org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry [main] Registering application DVDTHEQUE-BATCH-SERVICE with eureka with status UP
2021-12-30 18:46:31,904 INFO com.netflix.discovery.DiscoveryClient$3 [main] Saw local status change event StatusChangeEvent [timestamp=1640886391904, current=UP, previous=STARTING]
2021-12-30 18:46:31,905 WARN com.netflix.discovery.InstanceInfoReplicator [main] Ignoring onDemand update due to rate limiter
2021-12-30 18:46:31,906 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8089"]
2021-12-30 18:46:31,928 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8089 (http) with context path ''
2021-12-30 18:46:31,931 INFO org.springframework.cloud.netflix.eureka.serviceregistry.EurekaAutoServiceRegistration [main] Updating port to 8089
2021-12-30 18:46:32,108 INFO org.springframework.boot.StartupInfoLogger [main] Started BatchApplication in 7.571 seconds (JVM running for 8.201)
2021-12-30 18:46:32,119 INFO org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner [main] Running default command line with: []
2021-12-30 18:46:32,297 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Loaded the Bouncy Castle security provider.
2021-12-30 18:46:32,301 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] launched with the following parameters: [{run.id=10, TIMESTAMP=1640819171000}]
2021-12-30 18:46:32,348 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [exportFilms]
2021-12-30 18:46:32,381 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Using Persistence Adapter: MemoryPersistenceAdapter
2021-12-30 18:46:32,440 INFO org.apache.activemq.broker.jmx.ManagementContext$1 [JMX connector] JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi
2021-12-30 18:46:32,603 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-31767-1640886392409-0:1) is starting
2021-12-30 18:46:32,621 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-31767-1640886392409-0:1) started
2021-12-30 18:46:32,624 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] For help or more information please see: http://activemq.apache.org
2021-12-30 18:46:32,631 WARN org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Temporary Store limit is 51200 mb (current store usage is 0 mb). The data directory: D:\dev\eclipse-06-2021\workspace\dvdtheque\dvdtheque-batch only has 9202 mb of usable space. - resetting to maximum available disk space: 9202 mb
2021-12-30 18:46:32,657 INFO org.apache.activemq.broker.TransportConnector [DiscoveryClient-InstanceInfoReplicator-0] Connector vm://localhost started
2021-12-30 18:46:32,721 INFO com.netflix.discovery.DiscoveryClient [DiscoveryClient-InstanceInfoReplicator-0] DiscoveryClient_DVDTHEQUE-BATCH-SERVICE/dvdtheque-batch-service:a1f201972b1fb21d5495829df603e7e2: registering service...
2021-12-30 18:46:32,758 INFO com.netflix.discovery.DiscoveryClient [DiscoveryClient-InstanceInfoReplicator-0] DiscoveryClient_DVDTHEQUE-BATCH-SERVICE/dvdtheque-batch-service:a1f201972b1fb21d5495829df603e7e2 - registration status: 204
2021-12-30 18:46:32,946 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [exportFilms] executed in 596ms
2021-12-30 18:46:33,142 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] completed with the following parameters: [{run.id=10, TIMESTAMP=1640819171000}] and the following status: [COMPLETED] in 819ms
2021-12-30 18:46:33,217 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{INPUT_FILE_PATH=/opt/dvdtheque_rest_service/tmpFileDir/1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx, run.id=17, TIMESTAMP=1638865538201}]
2021-12-30 18:46:33,295 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [cleanDBStep]
2021-12-30 18:46:33,539 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [cleanDBStep] executed in 244ms
2021-12-30 18:46:33,648 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [importFilmsStep]
2021-12-30 18:46:33,683 ERROR org.springframework.batch.core.step.AbstractStep [main] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.batch.item.ItemStreamException: Failed to initialize the reader
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:153)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader$$FastClassBySpringCGLIB$$ebb633d0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:137)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
	at org.springframework.batch.item.file.FlatFileItemReader$$EnhancerBySpringCGLIB$$13ac6365.open(<generated>)
	at org.springframework.batch.item.support.CompositeItemStream.open(CompositeItemStream.java:104)
	at org.springframework.batch.core.step.tasklet.TaskletStep.open(TaskletStep.java:311)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:205)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy115.run(Unknown Source)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:173)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:160)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:155)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:150)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:793)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:783)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:345)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at fr.fredos.dvdtheque.batch.BatchApplication.main(BatchApplication.java:19)
Caused by: java.lang.IllegalStateException: Input resource must exist (reader is in 'strict' mode): file [D:\opt\dvdtheque_rest_service\tmpFileDir\1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx]
	at org.springframework.batch.item.file.FlatFileItemReader.doOpen(FlatFileItemReader.java:257)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:150)
	... 43 common frames omitted
2021-12-30 18:46:33,687 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [importFilmsStep] executed in 39ms
2021-12-30 18:46:33,714 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{INPUT_FILE_PATH=/opt/dvdtheque_rest_service/tmpFileDir/1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx, run.id=17, TIMESTAMP=1638865538201}] and the following status: [FAILED] in 484ms
2021-12-30 18:48:34,196 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-8089-exec-1] Exception Processing /dvdtheque-batch-service/invokejob/importFilmsJob
java.lang.RuntimeException: Must set 'realm' in config
	at org.keycloak.adapters.KeycloakDeploymentBuilder.internalBuild(KeycloakDeploymentBuilder.java:57)
	at org.keycloak.adapters.KeycloakDeploymentBuilder.build(KeycloakDeploymentBuilder.java:202)
	at org.keycloak.adapters.springboot.KeycloakSpringBootConfigResolver.resolve(KeycloakSpringBootConfigResolver.java:41)
	at org.keycloak.adapters.springsecurity.config.KeycloakSpringConfigResolverWrapper.resolve(KeycloakSpringConfigResolverWrapper.java:40)
	at org.keycloak.adapters.AdapterDeploymentContext.resolveDeployment(AdapterDeploymentContext.java:89)
	at org.keycloak.adapters.PreAuthActionsHandler.preflightCors(PreAuthActionsHandler.java:100)
	at org.keycloak.adapters.PreAuthActionsHandler.handleRequest(PreAuthActionsHandler.java:75)
	at org.keycloak.adapters.tomcat.AbstractKeycloakAuthenticatorValve.invoke(AbstractKeycloakAuthenticatorValve.java:177)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2021-12-30 18:48:34,333 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8089-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-30 18:48:34,333 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Initializing Servlet 'dispatcherServlet'
2021-12-30 18:48:34,340 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Completed initialization in 7 ms
2021-12-30 18:48:34,501 WARN org.apache.juli.logging.DirectJDKLog [http-nio-8089-exec-1] Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [114] milliseconds.
2021-12-30 18:48:46,757 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-8089-exec-2] Exception Processing /dvdtheque-batch-service/invokejob/importFilmsJob
java.lang.RuntimeException: Must set 'realm' in config
	at org.keycloak.adapters.KeycloakDeploymentBuilder.internalBuild(KeycloakDeploymentBuilder.java:57)
	at org.keycloak.adapters.KeycloakDeploymentBuilder.build(KeycloakDeploymentBuilder.java:202)
	at org.keycloak.adapters.springboot.KeycloakSpringBootConfigResolver.resolve(KeycloakSpringBootConfigResolver.java:41)
	at org.keycloak.adapters.springsecurity.config.KeycloakSpringConfigResolverWrapper.resolve(KeycloakSpringConfigResolverWrapper.java:40)
	at org.keycloak.adapters.AdapterDeploymentContext.resolveDeployment(AdapterDeploymentContext.java:89)
	at org.keycloak.adapters.PreAuthActionsHandler.preflightCors(PreAuthActionsHandler.java:100)
	at org.keycloak.adapters.PreAuthActionsHandler.handleRequest(PreAuthActionsHandler.java:75)
	at org.keycloak.adapters.tomcat.AbstractKeycloakAuthenticatorValve.invoke(AbstractKeycloakAuthenticatorValve.java:177)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2021-12-30 18:50:18,164 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-8089-exec-4] Exception Processing /dvdtheque-batch-service/invokejob/importFilmsJob
java.lang.RuntimeException: Must set 'realm' in config
	at org.keycloak.adapters.KeycloakDeploymentBuilder.internalBuild(KeycloakDeploymentBuilder.java:57)
	at org.keycloak.adapters.KeycloakDeploymentBuilder.build(KeycloakDeploymentBuilder.java:202)
	at org.keycloak.adapters.springboot.KeycloakSpringBootConfigResolver.resolve(KeycloakSpringBootConfigResolver.java:41)
	at org.keycloak.adapters.springsecurity.config.KeycloakSpringConfigResolverWrapper.resolve(KeycloakSpringConfigResolverWrapper.java:40)
	at org.keycloak.adapters.AdapterDeploymentContext.resolveDeployment(AdapterDeploymentContext.java:89)
	at org.keycloak.adapters.PreAuthActionsHandler.preflightCors(PreAuthActionsHandler.java:100)
	at org.keycloak.adapters.PreAuthActionsHandler.handleRequest(PreAuthActionsHandler.java:75)
	at org.keycloak.adapters.tomcat.AbstractKeycloakAuthenticatorValve.invoke(AbstractKeycloakAuthenticatorValve.java:177)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2021-12-30 18:51:31,653 INFO com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver [AsyncResolver-bootstrap-executor-0] Resolving eureka endpoints via configuration
2021-12-30 18:52:31,069 INFO org.hibernate.validator.internal.util.Version [background-preinit] HV000001: Hibernate Validator 6.2.0.Final
2021-12-30 18:52:31,849 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Fetching config from server at : http://localhost:8888
2021-12-30 18:52:32,647 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Located environment: name=dvdtheque-batch-service, profiles=[local], label=develop, version=5a84e492aa29c05fc0b6c883e92047f6e3946907, state=null
2021-12-30 18:52:32,648 INFO org.springframework.cloud.bootstrap.config.PropertySourceBootstrapConfiguration [main] Located property source: [BootstrapPropertySource {name='bootstrapProperties-configClient'}, BootstrapPropertySource {name='bootstrapProperties-https://github.com/fredo1975/spring-cloud-server-config.git/file:C:\Users\fredo\AppData\Local\Temp\config-repo-6509514101851484087\dvdtheque-batch-service-local.yml'}]
2021-12-30 18:52:32,667 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: local
2021-12-30 18:52:34,110 INFO org.springframework.cloud.context.scope.GenericScope [main] BeanFactory id=bc2e1bb8-4398-313f-bc5e-657a509050a1
2021-12-30 18:52:34,403 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@1cd2143b' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 18:52:34,411 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 18:52:34,891 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8089 (http)
2021-12-30 18:52:34,903 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8089"]
2021-12-30 18:52:34,904 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2021-12-30 18:52:34,904 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.56]
2021-12-30 18:52:35,088 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2021-12-30 18:52:35,088 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2406 ms
2021-12-30 18:52:35,504 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsJob
2021-12-30 18:52:35,506 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsStep
2021-12-30 18:52:35,511 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### ListItemReader
2021-12-30 18:52:36,830 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### excelFilmWriter
2021-12-30 18:52:36,864 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsJob
2021-12-30 18:52:36,868 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsStep
2021-12-30 18:52:37,812 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2021-12-30 18:52:38,011 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2021-12-30 18:52:38,023 INFO org.springframework.batch.core.repository.support.JobRepositoryFactoryBean [main] No database type set, using meta data indicating: MYSQL
2021-12-30 18:52:38,046 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher [main] No TaskExecutor has been set, defaulting to synchronous executor.
2021-12-30 18:52:38,298 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@fe38c0e, org.springframework.security.web.context.SecurityContextPersistenceFilter@1c22642d, org.springframework.security.web.header.HeaderWriterFilter@68a94e58, org.springframework.security.web.csrf.CsrfFilter@3fad8636, org.springframework.security.web.authentication.logout.LogoutFilter@709d2a6c, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@43f7f48d, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@1cca2e9d, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@6f6a2ac8, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@6167c42f, org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter@22846a1d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@736f8837, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@656302c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2cbc2db2, org.springframework.security.web.session.SessionManagementFilter@4a49919c, org.springframework.security.web.access.ExceptionTranslationFilter@4a1934e2, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@331ad6eb]
2021-12-30 18:52:38,478 INFO org.springframework.cloud.netflix.eureka.config.DiscoveryClientOptionalArgsConfiguration [main] Eureka HTTP Client uses RestTemplate.
2021-12-30 18:52:38,587 WARN org.springframework.cloud.loadbalancer.config.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger [main] Spring Cloud LoadBalancer is currently working with the default cache. You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2021-12-30 18:52:38,602 INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver [main] Exposing 16 endpoint(s) beneath base path '/actuator'
2021-12-30 18:52:38,698 INFO org.springframework.cloud.netflix.eureka.InstanceInfoFactory [main] Setting initial instance status as: STARTING
2021-12-30 18:52:38,859 INFO com.netflix.discovery.DiscoveryClient [main] Initializing Eureka in region us-east-1
2021-12-30 18:52:38,868 INFO com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver [main] Resolving eureka endpoints via configuration
2021-12-30 18:52:38,911 INFO com.netflix.discovery.DiscoveryClient [main] Disable delta property : false
2021-12-30 18:52:38,912 INFO com.netflix.discovery.DiscoveryClient [main] Single vip registry refresh property : null
2021-12-30 18:52:38,913 INFO com.netflix.discovery.DiscoveryClient [main] Force full registry fetch : false
2021-12-30 18:52:38,913 INFO com.netflix.discovery.DiscoveryClient [main] Application is null : false
2021-12-30 18:52:38,914 INFO com.netflix.discovery.DiscoveryClient [main] Registered Applications size is zero : true
2021-12-30 18:52:38,914 INFO com.netflix.discovery.DiscoveryClient [main] Application version is -1: true
2021-12-30 18:52:38,916 INFO com.netflix.discovery.DiscoveryClient [main] Getting all instance registry info from the eureka server
2021-12-30 18:52:39,230 INFO com.netflix.discovery.DiscoveryClient [main] The response status is 200
2021-12-30 18:52:39,236 INFO com.netflix.discovery.DiscoveryClient [main] Starting heartbeat executor: renew interval is: 2
2021-12-30 18:52:39,240 INFO com.netflix.discovery.InstanceInfoReplicator [main] InstanceInfoReplicator onDemand update allowed rate per min is 4
2021-12-30 18:52:39,247 INFO com.netflix.discovery.DiscoveryClient [main] Discovery Client initialized at timestamp 1640886759246 with initial instances count: 5
2021-12-30 18:52:39,251 INFO org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry [main] Registering application DVDTHEQUE-BATCH-SERVICE with eureka with status UP
2021-12-30 18:52:39,253 INFO com.netflix.discovery.DiscoveryClient$3 [main] Saw local status change event StatusChangeEvent [timestamp=1640886759253, current=UP, previous=STARTING]
2021-12-30 18:52:39,257 WARN com.netflix.discovery.InstanceInfoReplicator [main] Ignoring onDemand update due to rate limiter
2021-12-30 18:52:39,260 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8089"]
2021-12-30 18:52:39,298 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8089 (http) with context path ''
2021-12-30 18:52:39,300 INFO org.springframework.cloud.netflix.eureka.serviceregistry.EurekaAutoServiceRegistration [main] Updating port to 8089
2021-12-30 18:52:39,484 INFO org.springframework.boot.StartupInfoLogger [main] Started BatchApplication in 9.182 seconds (JVM running for 9.76)
2021-12-30 18:52:39,490 INFO org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner [main] Running default command line with: []
2021-12-30 18:52:39,622 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] launched with the following parameters: [{run.id=11, TIMESTAMP=1640819171000}]
2021-12-30 18:52:39,682 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [exportFilms]
2021-12-30 18:52:39,764 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Loaded the Bouncy Castle security provider.
2021-12-30 18:52:40,064 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Using Persistence Adapter: MemoryPersistenceAdapter
2021-12-30 18:52:40,180 INFO org.apache.activemq.broker.jmx.ManagementContext$1 [JMX connector] JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi
2021-12-30 18:52:40,380 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-1093-1640886760156-0:1) is starting
2021-12-30 18:52:40,388 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-1093-1640886760156-0:1) started
2021-12-30 18:52:40,389 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] For help or more information please see: http://activemq.apache.org
2021-12-30 18:52:40,394 WARN org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Temporary Store limit is 51200 mb (current store usage is 0 mb). The data directory: D:\dev\eclipse-06-2021\workspace\dvdtheque\dvdtheque-batch only has 9202 mb of usable space. - resetting to maximum available disk space: 9202 mb
2021-12-30 18:52:40,429 INFO org.apache.activemq.broker.TransportConnector [DiscoveryClient-InstanceInfoReplicator-0] Connector vm://localhost started
2021-12-30 18:52:40,495 INFO com.netflix.discovery.DiscoveryClient [DiscoveryClient-InstanceInfoReplicator-0] DiscoveryClient_DVDTHEQUE-BATCH-SERVICE/dvdtheque-batch-service:40f317d7085a03acf6667d9aa0309843: registering service...
2021-12-30 18:52:40,531 INFO com.netflix.discovery.DiscoveryClient [DiscoveryClient-InstanceInfoReplicator-0] DiscoveryClient_DVDTHEQUE-BATCH-SERVICE/dvdtheque-batch-service:40f317d7085a03acf6667d9aa0309843 - registration status: 204
2021-12-30 18:52:40,655 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [exportFilms] executed in 971ms
2021-12-30 18:52:41,027 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] completed with the following parameters: [{run.id=11, TIMESTAMP=1640819171000}] and the following status: [COMPLETED] in 1s384ms
2021-12-30 18:52:41,085 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{INPUT_FILE_PATH=/opt/dvdtheque_rest_service/tmpFileDir/1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx, run.id=18, TIMESTAMP=1638865538201}]
2021-12-30 18:52:41,191 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [cleanDBStep]
2021-12-30 18:52:41,282 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [cleanDBStep] executed in 91ms
2021-12-30 18:52:41,333 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [importFilmsStep]
2021-12-30 18:52:41,402 ERROR org.springframework.batch.core.step.AbstractStep [main] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.batch.item.ItemStreamException: Failed to initialize the reader
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:153)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader$$FastClassBySpringCGLIB$$ebb633d0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:137)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
	at org.springframework.batch.item.file.FlatFileItemReader$$EnhancerBySpringCGLIB$$69bd96c5.open(<generated>)
	at org.springframework.batch.item.support.CompositeItemStream.open(CompositeItemStream.java:104)
	at org.springframework.batch.core.step.tasklet.TaskletStep.open(TaskletStep.java:311)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:205)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy115.run(Unknown Source)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:173)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:160)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:155)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:150)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:793)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:783)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:345)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at fr.fredos.dvdtheque.batch.BatchApplication.main(BatchApplication.java:19)
Caused by: java.lang.IllegalStateException: Input resource must exist (reader is in 'strict' mode): file [D:\opt\dvdtheque_rest_service\tmpFileDir\1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx]
	at org.springframework.batch.item.file.FlatFileItemReader.doOpen(FlatFileItemReader.java:257)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:150)
	... 43 common frames omitted
2021-12-30 18:52:41,407 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [importFilmsStep] executed in 73ms
2021-12-30 18:52:41,438 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{INPUT_FILE_PATH=/opt/dvdtheque_rest_service/tmpFileDir/1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx, run.id=18, TIMESTAMP=1638865538201}] and the following status: [FAILED] in 338ms
2021-12-30 18:53:05,462 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-8089-exec-1] Exception Processing /dvdtheque-batch-service/invokejob/importFilmsJob
java.lang.RuntimeException: Must set 'realm' in config
	at org.keycloak.adapters.KeycloakDeploymentBuilder.internalBuild(KeycloakDeploymentBuilder.java:57)
	at org.keycloak.adapters.KeycloakDeploymentBuilder.build(KeycloakDeploymentBuilder.java:202)
	at org.keycloak.adapters.springboot.KeycloakSpringBootConfigResolver.resolve(KeycloakSpringBootConfigResolver.java:41)
	at org.keycloak.adapters.springsecurity.config.KeycloakSpringConfigResolverWrapper.resolve(KeycloakSpringConfigResolverWrapper.java:40)
	at org.keycloak.adapters.AdapterDeploymentContext.resolveDeployment(AdapterDeploymentContext.java:89)
	at org.keycloak.adapters.PreAuthActionsHandler.preflightCors(PreAuthActionsHandler.java:100)
	at org.keycloak.adapters.PreAuthActionsHandler.handleRequest(PreAuthActionsHandler.java:75)
	at org.keycloak.adapters.tomcat.AbstractKeycloakAuthenticatorValve.invoke(AbstractKeycloakAuthenticatorValve.java:177)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2021-12-30 18:53:05,473 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8089-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-30 18:53:05,473 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Initializing Servlet 'dispatcherServlet'
2021-12-30 18:53:05,476 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Completed initialization in 3 ms
2021-12-30 18:53:05,638 WARN org.apache.juli.logging.DirectJDKLog [http-nio-8089-exec-1] Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [120] milliseconds.
2021-12-30 18:57:38,919 INFO com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver [AsyncResolver-bootstrap-executor-0] Resolving eureka endpoints via configuration
2021-12-30 18:58:30,066 INFO org.hibernate.validator.internal.util.Version [background-preinit] HV000001: Hibernate Validator 6.2.0.Final
2021-12-30 18:58:31,949 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Fetching config from server at : http://localhost:8888
2021-12-30 18:58:32,492 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Located environment: name=dvdtheque-batch-service, profiles=[local], label=develop, version=5a84e492aa29c05fc0b6c883e92047f6e3946907, state=null
2021-12-30 18:58:32,494 INFO org.springframework.cloud.bootstrap.config.PropertySourceBootstrapConfiguration [main] Located property source: [BootstrapPropertySource {name='bootstrapProperties-configClient'}, BootstrapPropertySource {name='bootstrapProperties-https://github.com/fredo1975/spring-cloud-server-config.git/file:C:\Users\fredo\AppData\Local\Temp\config-repo-6509514101851484087\dvdtheque-batch-service-local.yml'}]
2021-12-30 18:58:32,514 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: local
2021-12-30 18:58:34,060 INFO org.springframework.cloud.context.scope.GenericScope [main] BeanFactory id=0c1151a1-d259-3920-9b8b-e9eb47a1c358
2021-12-30 18:58:34,376 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@6b27b2d0' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 18:58:34,383 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 18:58:34,925 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8089 (http)
2021-12-30 18:58:34,936 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8089"]
2021-12-30 18:58:34,937 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2021-12-30 18:58:34,938 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.56]
2021-12-30 18:58:35,096 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2021-12-30 18:58:35,097 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2568 ms
2021-12-30 18:58:35,614 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsJob
2021-12-30 18:58:35,617 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsStep
2021-12-30 18:58:35,623 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### ListItemReader
2021-12-30 18:58:36,889 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### excelFilmWriter
2021-12-30 18:58:36,940 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsJob
2021-12-30 18:58:36,944 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsStep
2021-12-30 18:58:38,054 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2021-12-30 18:58:38,216 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2021-12-30 18:58:38,258 INFO org.springframework.batch.core.repository.support.JobRepositoryFactoryBean [main] No database type set, using meta data indicating: MYSQL
2021-12-30 18:58:38,292 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher [main] No TaskExecutor has been set, defaulting to synchronous executor.
2021-12-30 18:58:38,535 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1e36baca, org.springframework.security.web.context.SecurityContextPersistenceFilter@12eaa2cd, org.springframework.security.web.header.HeaderWriterFilter@54d46c8, org.springframework.security.web.csrf.CsrfFilter@696ce057, org.springframework.security.web.authentication.logout.LogoutFilter@44e4cf8a, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@2bda7a5b, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@47374fa5, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@54530644, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@3dfa2f64, org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter@62581ef6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2b06681c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5f32ab17, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@60484429, org.springframework.security.web.session.SessionManagementFilter@5c34b0f2, org.springframework.security.web.access.ExceptionTranslationFilter@438a2d3, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2ec156fb]
2021-12-30 18:58:38,771 INFO org.springframework.cloud.netflix.eureka.config.DiscoveryClientOptionalArgsConfiguration [main] Eureka HTTP Client uses RestTemplate.
2021-12-30 18:58:38,847 WARN org.springframework.cloud.loadbalancer.config.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger [main] Spring Cloud LoadBalancer is currently working with the default cache. You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2021-12-30 18:58:38,854 INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver [main] Exposing 16 endpoint(s) beneath base path '/actuator'
2021-12-30 18:58:38,923 INFO org.springframework.cloud.netflix.eureka.InstanceInfoFactory [main] Setting initial instance status as: STARTING
2021-12-30 18:58:39,003 INFO com.netflix.discovery.DiscoveryClient [main] Initializing Eureka in region us-east-1
2021-12-30 18:58:39,009 INFO com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver [main] Resolving eureka endpoints via configuration
2021-12-30 18:58:39,039 INFO com.netflix.discovery.DiscoveryClient [main] Disable delta property : false
2021-12-30 18:58:39,039 INFO com.netflix.discovery.DiscoveryClient [main] Single vip registry refresh property : null
2021-12-30 18:58:39,039 INFO com.netflix.discovery.DiscoveryClient [main] Force full registry fetch : false
2021-12-30 18:58:39,040 INFO com.netflix.discovery.DiscoveryClient [main] Application is null : false
2021-12-30 18:58:39,040 INFO com.netflix.discovery.DiscoveryClient [main] Registered Applications size is zero : true
2021-12-30 18:58:39,040 INFO com.netflix.discovery.DiscoveryClient [main] Application version is -1: true
2021-12-30 18:58:39,040 INFO com.netflix.discovery.DiscoveryClient [main] Getting all instance registry info from the eureka server
2021-12-30 18:58:39,309 INFO com.netflix.discovery.DiscoveryClient [main] The response status is 200
2021-12-30 18:58:39,312 INFO com.netflix.discovery.DiscoveryClient [main] Starting heartbeat executor: renew interval is: 2
2021-12-30 18:58:39,317 INFO com.netflix.discovery.InstanceInfoReplicator [main] InstanceInfoReplicator onDemand update allowed rate per min is 4
2021-12-30 18:58:39,323 INFO com.netflix.discovery.DiscoveryClient [main] Discovery Client initialized at timestamp 1640887119322 with initial instances count: 7
2021-12-30 18:58:39,326 INFO org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry [main] Registering application DVDTHEQUE-BATCH-SERVICE with eureka with status UP
2021-12-30 18:58:39,327 INFO com.netflix.discovery.DiscoveryClient$3 [main] Saw local status change event StatusChangeEvent [timestamp=1640887119327, current=UP, previous=STARTING]
2021-12-30 18:58:39,328 WARN com.netflix.discovery.InstanceInfoReplicator [main] Ignoring onDemand update due to rate limiter
2021-12-30 18:58:39,330 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8089"]
2021-12-30 18:58:39,352 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8089 (http) with context path ''
2021-12-30 18:58:39,353 INFO org.springframework.cloud.netflix.eureka.serviceregistry.EurekaAutoServiceRegistration [main] Updating port to 8089
2021-12-30 18:58:39,538 INFO org.springframework.boot.StartupInfoLogger [main] Started BatchApplication in 11.021 seconds (JVM running for 12.143)
2021-12-30 18:58:39,545 INFO org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner [main] Running default command line with: []
2021-12-30 18:58:39,761 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] launched with the following parameters: [{run.id=12, TIMESTAMP=1640819171000}]
2021-12-30 18:58:39,815 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [exportFilms]
2021-12-30 18:58:39,819 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Loaded the Bouncy Castle security provider.
2021-12-30 18:58:39,898 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Using Persistence Adapter: MemoryPersistenceAdapter
2021-12-30 18:58:39,943 INFO org.apache.activemq.broker.jmx.ManagementContext$1 [JMX connector] JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi
2021-12-30 18:58:40,056 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-1302-1640887119919-0:1) is starting
2021-12-30 18:58:40,064 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-1302-1640887119919-0:1) started
2021-12-30 18:58:40,064 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] For help or more information please see: http://activemq.apache.org
2021-12-30 18:58:40,067 WARN org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Temporary Store limit is 51200 mb (current store usage is 0 mb). The data directory: D:\dev\eclipse-06-2021\workspace\dvdtheque\dvdtheque-batch only has 9200 mb of usable space. - resetting to maximum available disk space: 9200 mb
2021-12-30 18:58:40,090 INFO org.apache.activemq.broker.TransportConnector [DiscoveryClient-InstanceInfoReplicator-0] Connector vm://localhost started
2021-12-30 18:58:40,150 INFO com.netflix.discovery.DiscoveryClient [DiscoveryClient-InstanceInfoReplicator-0] DiscoveryClient_DVDTHEQUE-BATCH-SERVICE/dvdtheque-batch-service:8b3907b6b77c6509a7655a1e0d96e21d: registering service...
2021-12-30 18:58:40,197 INFO com.netflix.discovery.DiscoveryClient [DiscoveryClient-InstanceInfoReplicator-0] DiscoveryClient_DVDTHEQUE-BATCH-SERVICE/dvdtheque-batch-service:8b3907b6b77c6509a7655a1e0d96e21d - registration status: 204
2021-12-30 18:58:40,316 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [exportFilms] executed in 499ms
2021-12-30 18:58:40,507 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] completed with the following parameters: [{run.id=12, TIMESTAMP=1640819171000}] and the following status: [COMPLETED] in 725ms
2021-12-30 18:58:40,566 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{INPUT_FILE_PATH=/opt/dvdtheque_rest_service/tmpFileDir/1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx, run.id=19, TIMESTAMP=1638865538201}]
2021-12-30 18:58:40,694 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [cleanDBStep]
2021-12-30 18:58:41,127 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [cleanDBStep] executed in 431ms
2021-12-30 18:58:41,167 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [importFilmsStep]
2021-12-30 18:58:41,198 ERROR org.springframework.batch.core.step.AbstractStep [main] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.batch.item.ItemStreamException: Failed to initialize the reader
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:153)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader$$FastClassBySpringCGLIB$$ebb633d0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:137)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
	at org.springframework.batch.item.file.FlatFileItemReader$$EnhancerBySpringCGLIB$$47a8ed73.open(<generated>)
	at org.springframework.batch.item.support.CompositeItemStream.open(CompositeItemStream.java:104)
	at org.springframework.batch.core.step.tasklet.TaskletStep.open(TaskletStep.java:311)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:205)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:173)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:160)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:155)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:150)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:793)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:783)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:345)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at fr.fredos.dvdtheque.batch.BatchApplication.main(BatchApplication.java:19)
Caused by: java.lang.IllegalStateException: Input resource must exist (reader is in 'strict' mode): file [D:\opt\dvdtheque_rest_service\tmpFileDir\1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx]
	at org.springframework.batch.item.file.FlatFileItemReader.doOpen(FlatFileItemReader.java:257)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:150)
	... 43 common frames omitted
2021-12-30 18:58:41,202 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [importFilmsStep] executed in 35ms
2021-12-30 18:58:41,230 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{INPUT_FILE_PATH=/opt/dvdtheque_rest_service/tmpFileDir/1638865532946_ListeDvdExport-1638750767851-TOUS.xlsx, run.id=19, TIMESTAMP=1638865538201}] and the following status: [FAILED] in 649ms
2021-12-30 18:59:15,753 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8089-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-30 18:59:15,755 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Initializing Servlet 'dispatcherServlet'
2021-12-30 18:59:15,760 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Completed initialization in 4 ms
2021-12-30 18:59:16,053 WARN org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver [http-nio-8089-exec-1] Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public java.lang.String fr.fredos.dvdtheque.batch.controller.JobInvokerController.handleImportFilmsJob(java.lang.String) throws java.lang.Exception]
2021-12-30 18:59:56,901 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-2] Job: [SimpleJob: [name=exportFilms]] launched with the following parameters: [{time=1640887196848}]
2021-12-30 18:59:56,945 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-2] Executing step: [exportFilms]
2021-12-30 18:59:56,991 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-2] Step: [exportFilms] executed in 46ms
2021-12-30 18:59:57,058 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-2] Job: [SimpleJob: [name=exportFilms]] completed with the following parameters: [{time=1640887196848}] and the following status: [COMPLETED] in 144ms
2021-12-30 19:00:19,136 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-3] Job: [SimpleJob: [name=exportFilms]] launched with the following parameters: [{time=1640887219096}]
2021-12-30 19:00:19,174 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-3] Executing step: [exportFilms]
2021-12-30 19:00:19,211 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-3] Step: [exportFilms] executed in 37ms
2021-12-30 19:00:19,266 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-3] Job: [SimpleJob: [name=exportFilms]] completed with the following parameters: [{time=1640887219096}] and the following status: [COMPLETED] in 118ms
2021-12-30 19:02:08,405 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-5] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{time=1640887328368, INPUT_FILE_PATH=filePath=D%3A%5Cdev%5Cliste_dvd%5CListeDVD.xlsx}]
2021-12-30 19:02:08,439 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-5] Executing step: [cleanDBStep]
2021-12-30 19:02:08,533 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-5] Step: [cleanDBStep] executed in 93ms
2021-12-30 19:02:08,568 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-5] Executing step: [importFilmsStep]
2021-12-30 19:02:08,584 ERROR org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-5] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.batch.item.ItemStreamException: Failed to initialize the reader
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:153)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader$$FastClassBySpringCGLIB$$ebb633d0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:137)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
	at org.springframework.batch.item.file.FlatFileItemReader$$EnhancerBySpringCGLIB$$47a8ed73.open(<generated>)
	at org.springframework.batch.item.support.CompositeItemStream.open(CompositeItemStream.java:104)
	at org.springframework.batch.core.step.tasklet.TaskletStep.open(TaskletStep.java:311)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:205)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at fr.fredos.dvdtheque.batch.controller.JobInvokerController.handleImportFilmsJob(JobInvokerController.java:41)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.lang.IllegalStateException: Input resource must exist (reader is in 'strict' mode): file [D:\dev\eclipse-06-2021\workspace\dvdtheque\dvdtheque-batch\filePath=D%3A%5Cdev%5Cliste_dvd%5CListeDVD.xlsx]
	at org.springframework.batch.item.file.FlatFileItemReader.doOpen(FlatFileItemReader.java:257)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:150)
	... 140 common frames omitted
2021-12-30 19:02:08,594 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-5] Step: [importFilmsStep] executed in 25ms
2021-12-30 19:02:08,624 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-5] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{time=1640887328368, INPUT_FILE_PATH=filePath=D%3A%5Cdev%5Cliste_dvd%5CListeDVD.xlsx}] and the following status: [FAILED] in 204ms
2021-12-30 19:03:12,393 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-7] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{time=1640887392358, INPUT_FILE_PATH=filePath=src%2Ftest%2Fresources%2FListeDVD.xlsx}]
2021-12-30 19:03:12,431 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-7] Executing step: [cleanDBStep]
2021-12-30 19:03:12,507 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-7] Step: [cleanDBStep] executed in 75ms
2021-12-30 19:03:12,545 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-7] Executing step: [importFilmsStep]
2021-12-30 19:03:12,557 ERROR org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-7] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.batch.item.ItemStreamException: Failed to initialize the reader
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:153)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader$$FastClassBySpringCGLIB$$ebb633d0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:137)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
	at org.springframework.batch.item.file.FlatFileItemReader$$EnhancerBySpringCGLIB$$47a8ed73.open(<generated>)
	at org.springframework.batch.item.support.CompositeItemStream.open(CompositeItemStream.java:104)
	at org.springframework.batch.core.step.tasklet.TaskletStep.open(TaskletStep.java:311)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:205)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at fr.fredos.dvdtheque.batch.controller.JobInvokerController.handleImportFilmsJob(JobInvokerController.java:41)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.lang.IllegalStateException: Input resource must exist (reader is in 'strict' mode): file [D:\dev\eclipse-06-2021\workspace\dvdtheque\dvdtheque-batch\filePath=src%2Ftest%2Fresources%2FListeDVD.xlsx]
	at org.springframework.batch.item.file.FlatFileItemReader.doOpen(FlatFileItemReader.java:257)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:150)
	... 140 common frames omitted
2021-12-30 19:03:12,561 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-7] Step: [importFilmsStep] executed in 16ms
2021-12-30 19:03:12,586 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-7] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{time=1640887392358, INPUT_FILE_PATH=filePath=src%2Ftest%2Fresources%2FListeDVD.xlsx}] and the following status: [FAILED] in 180ms
2021-12-30 19:03:21,132 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8089-exec-8] Invalid chunk starting at byte [0] and ending at byte [39] with a value of [=src%2Ftest%2Fresources%2FListeDVD.xlsx] ignored
 Note: further occurrences of Parameter errors will be logged at DEBUG level.
2021-12-30 19:03:21,136 WARN org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver [http-nio-8089-exec-8] Resolved [org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public java.lang.String fr.fredos.dvdtheque.batch.controller.JobInvokerController.handleImportFilmsJob(java.lang.String) throws java.lang.Exception]
2021-12-30 19:03:39,057 INFO com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver [AsyncResolver-bootstrap-executor-0] Resolving eureka endpoints via configuration
2021-12-30 19:03:51,438 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-9] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{time=1640887431403, INPUT_FILE_PATH=INPUT_FILE_PATH=src%2Ftest%2Fresources%2FListeDVD.xlsx}]
2021-12-30 19:03:51,469 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-9] Executing step: [cleanDBStep]
2021-12-30 19:03:51,529 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-9] Step: [cleanDBStep] executed in 60ms
2021-12-30 19:03:51,562 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-9] Executing step: [importFilmsStep]
2021-12-30 19:03:51,572 ERROR org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-9] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.batch.item.ItemStreamException: Failed to initialize the reader
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:153)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader$$FastClassBySpringCGLIB$$ebb633d0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:137)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
	at org.springframework.batch.item.file.FlatFileItemReader$$EnhancerBySpringCGLIB$$47a8ed73.open(<generated>)
	at org.springframework.batch.item.support.CompositeItemStream.open(CompositeItemStream.java:104)
	at org.springframework.batch.core.step.tasklet.TaskletStep.open(TaskletStep.java:311)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:205)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at fr.fredos.dvdtheque.batch.controller.JobInvokerController.handleImportFilmsJob(JobInvokerController.java:41)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.lang.IllegalStateException: Input resource must exist (reader is in 'strict' mode): file [D:\dev\eclipse-06-2021\workspace\dvdtheque\dvdtheque-batch\INPUT_FILE_PATH=src%2Ftest%2Fresources%2FListeDVD.xlsx]
	at org.springframework.batch.item.file.FlatFileItemReader.doOpen(FlatFileItemReader.java:257)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:150)
	... 140 common frames omitted
2021-12-30 19:03:51,575 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-9] Step: [importFilmsStep] executed in 13ms
2021-12-30 19:03:51,598 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-9] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{time=1640887431403, INPUT_FILE_PATH=INPUT_FILE_PATH=src%2Ftest%2Fresources%2FListeDVD.xlsx}] and the following status: [FAILED] in 149ms
2021-12-30 19:04:55,521 INFO org.hibernate.validator.internal.util.Version [background-preinit] HV000001: Hibernate Validator 6.2.0.Final
2021-12-30 19:04:56,521 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Fetching config from server at : http://localhost:8888
2021-12-30 19:04:57,177 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Located environment: name=dvdtheque-batch-service, profiles=[local], label=develop, version=5a84e492aa29c05fc0b6c883e92047f6e3946907, state=null
2021-12-30 19:04:57,178 INFO org.springframework.cloud.bootstrap.config.PropertySourceBootstrapConfiguration [main] Located property source: [BootstrapPropertySource {name='bootstrapProperties-configClient'}, BootstrapPropertySource {name='bootstrapProperties-https://github.com/fredo1975/spring-cloud-server-config.git/file:C:\Users\fredo\AppData\Local\Temp\config-repo-6509514101851484087\dvdtheque-batch-service-local.yml'}]
2021-12-30 19:04:57,209 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: local
2021-12-30 19:04:58,939 INFO org.springframework.cloud.context.scope.GenericScope [main] BeanFactory id=0c1151a1-d259-3920-9b8b-e9eb47a1c358
2021-12-30 19:04:59,315 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@4607d78b' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 19:04:59,321 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 19:04:59,836 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8089 (http)
2021-12-30 19:04:59,857 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8089"]
2021-12-30 19:04:59,858 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2021-12-30 19:04:59,859 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.56]
2021-12-30 19:05:00,097 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2021-12-30 19:05:00,097 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2872 ms
2021-12-30 19:05:00,607 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsJob
2021-12-30 19:05:00,608 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsStep
2021-12-30 19:05:00,614 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### ListItemReader
2021-12-30 19:05:10,155 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### excelFilmWriter
2021-12-30 19:05:10,383 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsJob
2021-12-30 19:05:10,394 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsStep
2021-12-30 19:05:11,836 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2021-12-30 19:05:12,230 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2021-12-30 19:05:12,243 INFO org.springframework.batch.core.repository.support.JobRepositoryFactoryBean [main] No database type set, using meta data indicating: MYSQL
2021-12-30 19:05:12,280 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher [main] No TaskExecutor has been set, defaulting to synchronous executor.
2021-12-30 19:05:12,801 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5f14590c, org.springframework.security.web.context.SecurityContextPersistenceFilter@792b9dd3, org.springframework.security.web.header.HeaderWriterFilter@73230721, org.springframework.security.web.csrf.CsrfFilter@5d01a2eb, org.springframework.security.web.authentication.logout.LogoutFilter@2202c92f, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@2fe2fcc2, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@69926b6e, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@62264d4f, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@46051269, org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter@15c3585, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@31f9f9b3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3085befb, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@67baa05, org.springframework.security.web.session.SessionManagementFilter@27234b7c, org.springframework.security.web.access.ExceptionTranslationFilter@4abfa2ff, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@37b5a51c]
2021-12-30 19:05:12,958 INFO org.springframework.cloud.netflix.eureka.config.DiscoveryClientOptionalArgsConfiguration [main] Eureka HTTP Client uses RestTemplate.
2021-12-30 19:05:13,053 WARN org.springframework.cloud.loadbalancer.config.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger [main] Spring Cloud LoadBalancer is currently working with the default cache. You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2021-12-30 19:05:13,062 INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver [main] Exposing 16 endpoint(s) beneath base path '/actuator'
2021-12-30 19:05:13,136 INFO org.springframework.cloud.netflix.eureka.InstanceInfoFactory [main] Setting initial instance status as: STARTING
2021-12-30 19:05:13,228 INFO com.netflix.discovery.DiscoveryClient [main] Initializing Eureka in region us-east-1
2021-12-30 19:05:13,235 INFO com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver [main] Resolving eureka endpoints via configuration
2021-12-30 19:05:13,268 INFO com.netflix.discovery.DiscoveryClient [main] Disable delta property : false
2021-12-30 19:05:13,269 INFO com.netflix.discovery.DiscoveryClient [main] Single vip registry refresh property : null
2021-12-30 19:05:13,269 INFO com.netflix.discovery.DiscoveryClient [main] Force full registry fetch : false
2021-12-30 19:05:13,270 INFO com.netflix.discovery.DiscoveryClient [main] Application is null : false
2021-12-30 19:05:13,270 INFO com.netflix.discovery.DiscoveryClient [main] Registered Applications size is zero : true
2021-12-30 19:05:13,270 INFO com.netflix.discovery.DiscoveryClient [main] Application version is -1: true
2021-12-30 19:05:13,271 INFO com.netflix.discovery.DiscoveryClient [main] Getting all instance registry info from the eureka server
2021-12-30 19:05:13,641 INFO com.netflix.discovery.DiscoveryClient [main] The response status is 200
2021-12-30 19:05:13,646 INFO com.netflix.discovery.DiscoveryClient [main] Starting heartbeat executor: renew interval is: 2
2021-12-30 19:05:13,653 INFO com.netflix.discovery.InstanceInfoReplicator [main] InstanceInfoReplicator onDemand update allowed rate per min is 4
2021-12-30 19:05:13,665 INFO com.netflix.discovery.DiscoveryClient [main] Discovery Client initialized at timestamp 1640887513664 with initial instances count: 5
2021-12-30 19:05:13,670 INFO org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry [main] Registering application DVDTHEQUE-BATCH-SERVICE with eureka with status UP
2021-12-30 19:05:13,672 INFO com.netflix.discovery.DiscoveryClient$3 [main] Saw local status change event StatusChangeEvent [timestamp=1640887513672, current=UP, previous=STARTING]
2021-12-30 19:05:13,675 WARN com.netflix.discovery.InstanceInfoReplicator [main] Ignoring onDemand update due to rate limiter
2021-12-30 19:05:13,678 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8089"]
2021-12-30 19:05:13,716 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8089 (http) with context path ''
2021-12-30 19:05:13,718 INFO org.springframework.cloud.netflix.eureka.serviceregistry.EurekaAutoServiceRegistration [main] Updating port to 8089
2021-12-30 19:05:13,933 INFO org.springframework.boot.StartupInfoLogger [main] Started BatchApplication in 20.135 seconds (JVM running for 20.96)
2021-12-30 19:05:13,942 INFO org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner [main] Running default command line with: []
2021-12-30 19:05:14,050 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Loaded the Bouncy Castle security provider.
2021-12-30 19:05:14,110 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] launched with the following parameters: [{run.id=1, time=1640887219096}]
2021-12-30 19:05:14,128 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Using Persistence Adapter: MemoryPersistenceAdapter
2021-12-30 19:05:14,178 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [exportFilms]
2021-12-30 19:05:14,212 INFO org.apache.activemq.broker.jmx.ManagementContext$1 [JMX connector] JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi
2021-12-30 19:05:14,333 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-1365-1640887514168-0:1) is starting
2021-12-30 19:05:14,339 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-1365-1640887514168-0:1) started
2021-12-30 19:05:14,339 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] For help or more information please see: http://activemq.apache.org
2021-12-30 19:05:14,353 WARN org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Temporary Store limit is 51200 mb (current store usage is 0 mb). The data directory: D:\dev\eclipse-06-2021\workspace\dvdtheque\dvdtheque-batch only has 9200 mb of usable space. - resetting to maximum available disk space: 9200 mb
2021-12-30 19:05:14,395 INFO org.apache.activemq.broker.TransportConnector [DiscoveryClient-InstanceInfoReplicator-0] Connector vm://localhost started
2021-12-30 19:05:14,666 INFO com.netflix.discovery.DiscoveryClient [DiscoveryClient-InstanceInfoReplicator-0] DiscoveryClient_DVDTHEQUE-BATCH-SERVICE/dvdtheque-batch-service:5a6044484fc64f105aba7d4a2c748d14: registering service...
2021-12-30 19:05:14,754 INFO com.netflix.discovery.DiscoveryClient [DiscoveryClient-InstanceInfoReplicator-0] DiscoveryClient_DVDTHEQUE-BATCH-SERVICE/dvdtheque-batch-service:5a6044484fc64f105aba7d4a2c748d14 - registration status: 204
2021-12-30 19:05:29,376 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [exportFilms] executed in 15s197ms
2021-12-30 19:05:29,563 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] completed with the following parameters: [{run.id=1, time=1640887219096}] and the following status: [COMPLETED] in 15s428ms
2021-12-30 19:05:29,639 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{INPUT_FILE_PATH=INPUT_FILE_PATH=src%2Ftest%2Fresources%2FListeDVD.xlsx, time=1640887431403, run.id=1}]
2021-12-30 19:05:29,731 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [cleanDBStep]
2021-12-30 19:05:29,822 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [cleanDBStep] executed in 91ms
2021-12-30 19:05:29,878 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [importFilmsStep]
2021-12-30 19:06:55,164 ERROR org.springframework.batch.core.step.AbstractStep [main] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.batch.item.ItemStreamException: Failed to initialize the reader
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:153)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader$$FastClassBySpringCGLIB$$ebb633d0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:137)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
	at org.springframework.batch.item.file.FlatFileItemReader$$EnhancerBySpringCGLIB$$f7a82743.open(<generated>)
	at org.springframework.batch.item.support.CompositeItemStream.open(CompositeItemStream.java:104)
	at org.springframework.batch.core.step.tasklet.TaskletStep.open(TaskletStep.java:311)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:205)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:173)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:160)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:155)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:150)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:793)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:783)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:345)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at fr.fredos.dvdtheque.batch.BatchApplication.main(BatchApplication.java:19)
Caused by: java.lang.IllegalStateException: Input resource must exist (reader is in 'strict' mode): file [D:\dev\eclipse-06-2021\workspace\dvdtheque\dvdtheque-batch\INPUT_FILE_PATH=src%2Ftest%2Fresources%2FListeDVD.xlsx]
	at org.springframework.batch.item.file.FlatFileItemReader.doOpen(FlatFileItemReader.java:257)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:150)
	... 43 common frames omitted
2021-12-30 19:06:55,171 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [importFilmsStep] executed in 1m25s292ms
2021-12-30 19:06:55,205 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{INPUT_FILE_PATH=INPUT_FILE_PATH=src%2Ftest%2Fresources%2FListeDVD.xlsx, time=1640887431403, run.id=1}] and the following status: [FAILED] in 1m25s551ms
2021-12-30 19:06:58,690 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8089-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-30 19:06:58,691 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Initializing Servlet 'dispatcherServlet'
2021-12-30 19:06:58,694 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Completed initialization in 3 ms
2021-12-30 19:07:58,729 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-2] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{time=1640887636415, INPUT_FILE_PATH=INPUT_FILE_PATH=src%2Ftest%2Fresources%2FListeDVD.xlsx}]
2021-12-30 19:07:58,822 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-2] Executing step: [cleanDBStep]
2021-12-30 19:07:58,998 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-2] Step: [cleanDBStep] executed in 174ms
2021-12-30 19:07:59,103 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-2] Executing step: [importFilmsStep]
2021-12-30 19:08:00,253 ERROR org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-2] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.batch.item.ItemStreamException: Failed to initialize the reader
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:153)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader$$FastClassBySpringCGLIB$$ebb633d0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:137)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
	at org.springframework.batch.item.file.FlatFileItemReader$$EnhancerBySpringCGLIB$$f7a82743.open(<generated>)
	at org.springframework.batch.item.support.CompositeItemStream.open(CompositeItemStream.java:104)
	at org.springframework.batch.core.step.tasklet.TaskletStep.open(TaskletStep.java:311)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:205)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at fr.fredos.dvdtheque.batch.controller.JobInvokerController.handleImportFilmsJob(JobInvokerController.java:41)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.lang.IllegalStateException: Input resource must exist (reader is in 'strict' mode): file [D:\dev\eclipse-06-2021\workspace\dvdtheque\dvdtheque-batch\INPUT_FILE_PATH=src%2Ftest%2Fresources%2FListeDVD.xlsx]
	at org.springframework.batch.item.file.FlatFileItemReader.doOpen(FlatFileItemReader.java:257)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:150)
	... 140 common frames omitted
2021-12-30 19:08:00,302 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-2] Step: [importFilmsStep] executed in 1s196ms
2021-12-30 19:08:00,368 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-2] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{time=1640887636415, INPUT_FILE_PATH=INPUT_FILE_PATH=src%2Ftest%2Fresources%2FListeDVD.xlsx}] and the following status: [FAILED] in 1s605ms
2021-12-30 19:08:59,876 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-3] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{time=1640887735905, INPUT_FILE_PATH=src/test/resources/ListeDVD.xlsx}]
2021-12-30 19:09:00,006 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-3] Executing step: [cleanDBStep]
2021-12-30 19:09:00,124 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-3] Step: [cleanDBStep] executed in 115ms
2021-12-30 19:09:00,211 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-3] Executing step: [importFilmsStep]
2021-12-30 19:09:08,124 ERROR org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-3] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.batch.item.ItemStreamException: Failed to initialize the reader
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:153)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader$$FastClassBySpringCGLIB$$ebb633d0.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:137)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)
	at org.springframework.batch.item.file.FlatFileItemReader$$EnhancerBySpringCGLIB$$f7a82743.open(<generated>)
	at org.springframework.batch.item.support.CompositeItemStream.open(CompositeItemStream.java:104)
	at org.springframework.batch.core.step.tasklet.TaskletStep.open(TaskletStep.java:311)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:205)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at fr.fredos.dvdtheque.batch.controller.JobInvokerController.handleImportFilmsJob(JobInvokerController.java:41)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.lang.IllegalStateException: Input resource must exist (reader is in 'strict' mode): file [D:\dev\eclipse-06-2021\workspace\dvdtheque\dvdtheque-batch\src\test\resources\ListeDVD.xlsx]
	at org.springframework.batch.item.file.FlatFileItemReader.doOpen(FlatFileItemReader.java:257)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:150)
	... 140 common frames omitted
2021-12-30 19:09:08,158 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-3] Step: [importFilmsStep] executed in 7s944ms
2021-12-30 19:09:08,230 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-3] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{time=1640887735905, INPUT_FILE_PATH=src/test/resources/ListeDVD.xlsx}] and the following status: [FAILED] in 8s316ms
2021-12-30 19:10:13,276 INFO com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver [AsyncResolver-bootstrap-executor-0] Resolving eureka endpoints via configuration
2021-12-30 19:10:26,754 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-5] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{time=1640887826694, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}]
2021-12-30 19:10:26,804 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-5] Executing step: [cleanDBStep]
2021-12-30 19:10:26,913 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-5] Step: [cleanDBStep] executed in 108ms
2021-12-30 19:10:26,955 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-5] Executing step: [importFilmsStep]
2021-12-30 19:10:29,654 ERROR org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-5] Encountered an error executing step importFilmsStep in job importFilms
java.lang.IllegalStateException: Required key 'get-results' not found
	at org.springframework.core.env.AbstractPropertyResolver.getRequiredProperty(AbstractPropertyResolver.java:183)
	at org.springframework.core.env.AbstractEnvironment.getRequiredProperty(AbstractEnvironment.java:615)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:66)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:1)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.doProcess(SimpleChunkProcessor.java:134)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.transform(SimpleChunkProcessor.java:319)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210)
	at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)
	at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at fr.fredos.dvdtheque.batch.controller.JobInvokerController.handleImportFilmsJob(JobInvokerController.java:41)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2021-12-30 19:10:29,664 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-5] Step: [importFilmsStep] executed in 2s709ms
2021-12-30 19:10:29,693 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-5] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{time=1640887826694, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}] and the following status: [FAILED] in 2s923ms
2021-12-30 19:12:36,775 INFO org.hibernate.validator.internal.util.Version [background-preinit] HV000001: Hibernate Validator 6.2.0.Final
2021-12-30 19:12:37,778 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Fetching config from server at : http://localhost:8888
2021-12-30 19:12:38,443 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Located environment: name=dvdtheque-batch-service, profiles=[local], label=develop, version=5a84e492aa29c05fc0b6c883e92047f6e3946907, state=null
2021-12-30 19:12:38,444 INFO org.springframework.cloud.bootstrap.config.PropertySourceBootstrapConfiguration [main] Located property source: [BootstrapPropertySource {name='bootstrapProperties-configClient'}, BootstrapPropertySource {name='bootstrapProperties-https://github.com/fredo1975/spring-cloud-server-config.git/file:C:\Users\fredo\AppData\Local\Temp\config-repo-6509514101851484087\dvdtheque-batch-service-local.yml'}]
2021-12-30 19:12:38,475 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: local
2021-12-30 19:12:40,042 INFO org.springframework.cloud.context.scope.GenericScope [main] BeanFactory id=0c1151a1-d259-3920-9b8b-e9eb47a1c358
2021-12-30 19:12:40,525 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@1883871b' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 19:12:40,532 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 19:12:40,967 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8089 (http)
2021-12-30 19:12:40,982 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8089"]
2021-12-30 19:12:40,983 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2021-12-30 19:12:40,983 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.56]
2021-12-30 19:12:41,250 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2021-12-30 19:12:41,252 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2758 ms
2021-12-30 19:12:41,789 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsJob
2021-12-30 19:12:41,791 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsStep
2021-12-30 19:12:41,797 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### ListItemReader
2021-12-30 19:12:41,894 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### excelFilmWriter
2021-12-30 19:12:41,933 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsJob
2021-12-30 19:12:41,938 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsStep
2021-12-30 19:12:43,149 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2021-12-30 19:12:43,519 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2021-12-30 19:12:43,534 INFO org.springframework.batch.core.repository.support.JobRepositoryFactoryBean [main] No database type set, using meta data indicating: MYSQL
2021-12-30 19:12:43,564 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher [main] No TaskExecutor has been set, defaulting to synchronous executor.
2021-12-30 19:12:43,946 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3c2f310c, org.springframework.security.web.context.SecurityContextPersistenceFilter@8ad6d29, org.springframework.security.web.header.HeaderWriterFilter@25e24908, org.springframework.security.web.csrf.CsrfFilter@5f2ad3d5, org.springframework.security.web.authentication.logout.LogoutFilter@5169db2f, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@64df8422, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@2b30b627, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@34ab398b, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@74f92d14, org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter@68cb8e52, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4e35a219, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@8dc3019, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@40071890, org.springframework.security.web.session.SessionManagementFilter@6130a6f5, org.springframework.security.web.access.ExceptionTranslationFilter@4930213b, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@799206ad]
2021-12-30 19:12:44,154 INFO org.springframework.cloud.netflix.eureka.config.DiscoveryClientOptionalArgsConfiguration [main] Eureka HTTP Client uses RestTemplate.
2021-12-30 19:12:44,259 WARN org.springframework.cloud.loadbalancer.config.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger [main] Spring Cloud LoadBalancer is currently working with the default cache. You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2021-12-30 19:12:44,270 INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver [main] Exposing 16 endpoint(s) beneath base path '/actuator'
2021-12-30 19:12:44,435 INFO org.springframework.cloud.netflix.eureka.InstanceInfoFactory [main] Setting initial instance status as: STARTING
2021-12-30 19:12:44,555 INFO com.netflix.discovery.DiscoveryClient [main] Initializing Eureka in region us-east-1
2021-12-30 19:12:44,565 INFO com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver [main] Resolving eureka endpoints via configuration
2021-12-30 19:12:44,601 INFO com.netflix.discovery.DiscoveryClient [main] Disable delta property : false
2021-12-30 19:12:44,602 INFO com.netflix.discovery.DiscoveryClient [main] Single vip registry refresh property : null
2021-12-30 19:12:44,603 INFO com.netflix.discovery.DiscoveryClient [main] Force full registry fetch : false
2021-12-30 19:12:44,603 INFO com.netflix.discovery.DiscoveryClient [main] Application is null : false
2021-12-30 19:12:44,604 INFO com.netflix.discovery.DiscoveryClient [main] Registered Applications size is zero : true
2021-12-30 19:12:44,604 INFO com.netflix.discovery.DiscoveryClient [main] Application version is -1: true
2021-12-30 19:12:44,604 INFO com.netflix.discovery.DiscoveryClient [main] Getting all instance registry info from the eureka server
2021-12-30 19:12:44,877 INFO com.netflix.discovery.DiscoveryClient [main] The response status is 200
2021-12-30 19:12:44,882 INFO com.netflix.discovery.DiscoveryClient [main] Starting heartbeat executor: renew interval is: 2
2021-12-30 19:12:44,889 INFO com.netflix.discovery.InstanceInfoReplicator [main] InstanceInfoReplicator onDemand update allowed rate per min is 4
2021-12-30 19:12:44,897 INFO com.netflix.discovery.DiscoveryClient [main] Discovery Client initialized at timestamp 1640887964896 with initial instances count: 5
2021-12-30 19:12:44,909 INFO org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry [main] Registering application DVDTHEQUE-BATCH-SERVICE with eureka with status UP
2021-12-30 19:12:44,910 INFO com.netflix.discovery.DiscoveryClient$3 [main] Saw local status change event StatusChangeEvent [timestamp=1640887964910, current=UP, previous=STARTING]
2021-12-30 19:12:44,912 WARN com.netflix.discovery.InstanceInfoReplicator [main] Ignoring onDemand update due to rate limiter
2021-12-30 19:12:44,913 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8089"]
2021-12-30 19:12:44,949 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8089 (http) with context path ''
2021-12-30 19:12:44,951 INFO org.springframework.cloud.netflix.eureka.serviceregistry.EurekaAutoServiceRegistration [main] Updating port to 8089
2021-12-30 19:12:45,259 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Loaded the Bouncy Castle security provider.
2021-12-30 19:12:45,311 INFO org.springframework.boot.StartupInfoLogger [main] Started BatchApplication in 9.469 seconds (JVM running for 10.219)
2021-12-30 19:12:45,336 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Using Persistence Adapter: MemoryPersistenceAdapter
2021-12-30 19:12:45,339 INFO org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner [main] Running default command line with: []
2021-12-30 19:12:45,511 INFO org.apache.activemq.broker.jmx.ManagementContext$1 [JMX connector] JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi
2021-12-30 19:12:45,592 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-3091-1640887965362-0:1) is starting
2021-12-30 19:12:45,600 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-3091-1640887965362-0:1) started
2021-12-30 19:12:45,600 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] For help or more information please see: http://activemq.apache.org
2021-12-30 19:12:45,603 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] launched with the following parameters: [{run.id=2, time=1640887219096}]
2021-12-30 19:12:45,606 WARN org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Temporary Store limit is 51200 mb (current store usage is 0 mb). The data directory: D:\dev\eclipse-06-2021\workspace\dvdtheque\dvdtheque-batch only has 9200 mb of usable space. - resetting to maximum available disk space: 9200 mb
2021-12-30 19:12:45,641 INFO org.apache.activemq.broker.TransportConnector [DiscoveryClient-InstanceInfoReplicator-0] Connector vm://localhost started
2021-12-30 19:12:45,652 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [exportFilms]
2021-12-30 19:12:45,906 INFO com.netflix.discovery.DiscoveryClient [DiscoveryClient-InstanceInfoReplicator-0] DiscoveryClient_DVDTHEQUE-BATCH-SERVICE/dvdtheque-batch-service:93e3ecf09c3d69aa6a639b84be97fd98: registering service...
2021-12-30 19:12:45,984 INFO com.netflix.discovery.DiscoveryClient [DiscoveryClient-InstanceInfoReplicator-0] DiscoveryClient_DVDTHEQUE-BATCH-SERVICE/dvdtheque-batch-service:93e3ecf09c3d69aa6a639b84be97fd98 - registration status: 204
2021-12-30 19:12:58,365 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [exportFilms] executed in 12s712ms
2021-12-30 19:12:58,566 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] completed with the following parameters: [{run.id=2, time=1640887219096}] and the following status: [COMPLETED] in 12s940ms
2021-12-30 19:12:58,641 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{INPUT_FILE_PATH=src/test/resources/ListeDVD.csv, time=1640887826694, run.id=1}]
2021-12-30 19:12:58,725 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [cleanDBStep]
2021-12-30 19:12:58,807 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [cleanDBStep] executed in 81ms
2021-12-30 19:12:58,849 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [importFilmsStep]
2021-12-30 19:12:59,323 ERROR org.springframework.batch.core.step.AbstractStep [main] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error: "{"status":"INTERNAL_SERVER_ERROR","timestamp":"30-12-2021 07:12:59","message":"Accès refusé","debugMessage":null,"subErrors":null}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:100)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:170)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:122)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:819)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:777)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:602)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:65)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:1)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.doProcess(SimpleChunkProcessor.java:134)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.transform(SimpleChunkProcessor.java:319)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210)
	at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)
	at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:173)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:160)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:155)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:150)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:793)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:783)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:345)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at fr.fredos.dvdtheque.batch.BatchApplication.main(BatchApplication.java:19)
2021-12-30 19:12:59,363 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [importFilmsStep] executed in 513ms
2021-12-30 19:12:59,457 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{INPUT_FILE_PATH=src/test/resources/ListeDVD.csv, time=1640887826694, run.id=1}] and the following status: [FAILED] in 801ms
2021-12-30 19:13:43,786 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8089-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-30 19:13:43,787 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Initializing Servlet 'dispatcherServlet'
2021-12-30 19:13:43,799 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Completed initialization in 12 ms
2021-12-30 19:13:44,566 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-1] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{time=1640888024527, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}]
2021-12-30 19:13:44,615 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-1] Executing step: [cleanDBStep]
2021-12-30 19:13:44,689 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Step: [cleanDBStep] executed in 73ms
2021-12-30 19:13:44,727 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-1] Executing step: [importFilmsStep]
2021-12-30 19:13:44,838 ERROR org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error: "{"status":"INTERNAL_SERVER_ERROR","timestamp":"30-12-2021 07:13:44","message":"Accès refusé","debugMessage":null,"subErrors":null}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:100)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:170)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:122)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:819)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:777)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:602)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:65)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:1)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.doProcess(SimpleChunkProcessor.java:134)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.transform(SimpleChunkProcessor.java:319)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210)
	at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)
	at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at fr.fredos.dvdtheque.batch.controller.JobInvokerController.handleImportFilmsJob(JobInvokerController.java:41)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2021-12-30 19:13:44,855 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Step: [importFilmsStep] executed in 128ms
2021-12-30 19:13:44,886 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-1] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{time=1640888024527, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}] and the following status: [FAILED] in 303ms
2021-12-30 19:17:37,367 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-3] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{time=1640888257294, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}]
2021-12-30 19:17:37,430 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-3] Executing step: [cleanDBStep]
2021-12-30 19:17:37,539 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-3] Step: [cleanDBStep] executed in 109ms
2021-12-30 19:17:37,581 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-3] Executing step: [importFilmsStep]
2021-12-30 19:17:38,284 ERROR org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-3] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error: "{"status":"INTERNAL_SERVER_ERROR","timestamp":"30-12-2021 07:17:38","message":"Accès refusé","debugMessage":null,"subErrors":null}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:100)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:170)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:122)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:819)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:777)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:602)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:65)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:1)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.doProcess(SimpleChunkProcessor.java:134)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.transform(SimpleChunkProcessor.java:319)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210)
	at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)
	at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at fr.fredos.dvdtheque.batch.controller.JobInvokerController.handleImportFilmsJob(JobInvokerController.java:41)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2021-12-30 19:17:38,336 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-3] Step: [importFilmsStep] executed in 754ms
2021-12-30 19:17:38,491 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-3] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{time=1640888257294, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}] and the following status: [FAILED] in 1s88ms
2021-12-30 19:17:44,618 INFO com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver [AsyncResolver-bootstrap-executor-0] Resolving eureka endpoints via configuration
2021-12-30 19:18:00,254 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-4] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{time=1640888280205, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}]
2021-12-30 19:18:00,326 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-4] Executing step: [cleanDBStep]
2021-12-30 19:18:00,427 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-4] Step: [cleanDBStep] executed in 101ms
2021-12-30 19:18:00,476 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-4] Executing step: [importFilmsStep]
2021-12-30 19:18:00,661 ERROR org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-4] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error: "{"status":"INTERNAL_SERVER_ERROR","timestamp":"30-12-2021 07:18:00","message":"Accès refusé","debugMessage":null,"subErrors":null}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:100)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:170)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:122)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:819)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:777)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:602)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:65)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:1)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.doProcess(SimpleChunkProcessor.java:134)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.transform(SimpleChunkProcessor.java:319)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210)
	at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)
	at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at fr.fredos.dvdtheque.batch.controller.JobInvokerController.handleImportFilmsJob(JobInvokerController.java:41)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2021-12-30 19:18:00,675 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-4] Step: [importFilmsStep] executed in 199ms
2021-12-30 19:18:00,708 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-4] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{time=1640888280205, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}] and the following status: [FAILED] in 437ms
2021-12-30 19:18:22,822 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-5] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{time=1640888302785, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}]
2021-12-30 19:18:22,877 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-5] Executing step: [cleanDBStep]
2021-12-30 19:18:22,933 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-5] Step: [cleanDBStep] executed in 55ms
2021-12-30 19:18:22,967 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-5] Executing step: [importFilmsStep]
2021-12-30 19:18:23,026 ERROR org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-5] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 Internal Server Error: "{"status":"INTERNAL_SERVER_ERROR","timestamp":"30-12-2021 07:18:23","message":"Accès refusé","debugMessage":null,"subErrors":null}"
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:100)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:170)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:122)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:819)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:777)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:602)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:65)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:1)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.doProcess(SimpleChunkProcessor.java:134)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.transform(SimpleChunkProcessor.java:319)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210)
	at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)
	at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at fr.fredos.dvdtheque.batch.controller.JobInvokerController.handleImportFilmsJob(JobInvokerController.java:41)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2021-12-30 19:18:23,032 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-5] Step: [importFilmsStep] executed in 65ms
2021-12-30 19:18:23,054 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-5] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{time=1640888302785, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}] and the following status: [FAILED] in 221ms
2021-12-30 19:30:18,949 INFO org.hibernate.validator.internal.util.Version [background-preinit] HV000001: Hibernate Validator 6.2.0.Final
2021-12-30 19:30:19,786 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Fetching config from server at : http://localhost:8888
2021-12-30 19:30:20,372 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Located environment: name=dvdtheque-batch-service, profiles=[local], label=develop, version=5a84e492aa29c05fc0b6c883e92047f6e3946907, state=null
2021-12-30 19:30:20,373 INFO org.springframework.cloud.bootstrap.config.PropertySourceBootstrapConfiguration [main] Located property source: [BootstrapPropertySource {name='bootstrapProperties-configClient'}, BootstrapPropertySource {name='bootstrapProperties-https://github.com/fredo1975/spring-cloud-server-config.git/file:C:\Users\fredo\AppData\Local\Temp\config-repo-6509514101851484087\dvdtheque-batch-service-local.yml'}]
2021-12-30 19:30:20,390 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: local
2021-12-30 19:30:21,728 INFO org.springframework.cloud.context.scope.GenericScope [main] BeanFactory id=0c1151a1-d259-3920-9b8b-e9eb47a1c358
2021-12-30 19:30:22,012 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@706f6d26' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 19:30:22,019 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 19:30:22,476 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8089 (http)
2021-12-30 19:30:22,489 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8089"]
2021-12-30 19:30:22,489 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2021-12-30 19:30:22,490 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.56]
2021-12-30 19:30:22,677 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2021-12-30 19:30:22,677 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2273 ms
2021-12-30 19:30:23,102 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsJob
2021-12-30 19:30:23,104 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsStep
2021-12-30 19:30:23,110 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### ListItemReader
2021-12-30 19:30:23,191 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### excelFilmWriter
2021-12-30 19:30:23,226 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsJob
2021-12-30 19:30:23,229 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsStep
2021-12-30 19:30:24,173 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2021-12-30 19:30:24,337 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2021-12-30 19:30:24,350 INFO org.springframework.batch.core.repository.support.JobRepositoryFactoryBean [main] No database type set, using meta data indicating: MYSQL
2021-12-30 19:30:24,454 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher [main] No TaskExecutor has been set, defaulting to synchronous executor.
2021-12-30 19:30:24,765 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3ba96967, org.springframework.security.web.context.SecurityContextPersistenceFilter@780dbed7, org.springframework.security.web.header.HeaderWriterFilter@1d535b78, org.springframework.security.web.csrf.CsrfFilter@75784062, org.springframework.security.web.authentication.logout.LogoutFilter@690e4b00, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@19e5e110, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@1e295f7f, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@47374fa5, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@5764d421, org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter@4a3516fd, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5718e77c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2bda7a5b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1237cade, org.springframework.security.web.session.SessionManagementFilter@55a66bbf, org.springframework.security.web.access.ExceptionTranslationFilter@44a485bc, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@285b491f]
2021-12-30 19:30:24,913 INFO org.springframework.cloud.netflix.eureka.config.DiscoveryClientOptionalArgsConfiguration [main] Eureka HTTP Client uses RestTemplate.
2021-12-30 19:30:24,986 WARN org.springframework.cloud.loadbalancer.config.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger [main] Spring Cloud LoadBalancer is currently working with the default cache. You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2021-12-30 19:30:24,993 INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver [main] Exposing 16 endpoint(s) beneath base path '/actuator'
2021-12-30 19:30:25,063 INFO org.springframework.cloud.netflix.eureka.InstanceInfoFactory [main] Setting initial instance status as: STARTING
2021-12-30 19:30:25,142 INFO com.netflix.discovery.DiscoveryClient [main] Initializing Eureka in region us-east-1
2021-12-30 19:30:25,147 INFO com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver [main] Resolving eureka endpoints via configuration
2021-12-30 19:30:25,174 INFO com.netflix.discovery.DiscoveryClient [main] Disable delta property : false
2021-12-30 19:30:25,175 INFO com.netflix.discovery.DiscoveryClient [main] Single vip registry refresh property : null
2021-12-30 19:30:25,175 INFO com.netflix.discovery.DiscoveryClient [main] Force full registry fetch : false
2021-12-30 19:30:25,176 INFO com.netflix.discovery.DiscoveryClient [main] Application is null : false
2021-12-30 19:30:25,176 INFO com.netflix.discovery.DiscoveryClient [main] Registered Applications size is zero : true
2021-12-30 19:30:25,176 INFO com.netflix.discovery.DiscoveryClient [main] Application version is -1: true
2021-12-30 19:30:25,176 INFO com.netflix.discovery.DiscoveryClient [main] Getting all instance registry info from the eureka server
2021-12-30 19:30:25,535 INFO com.netflix.discovery.DiscoveryClient [main] The response status is 200
2021-12-30 19:30:25,541 INFO com.netflix.discovery.DiscoveryClient [main] Starting heartbeat executor: renew interval is: 2
2021-12-30 19:30:25,544 INFO com.netflix.discovery.InstanceInfoReplicator [main] InstanceInfoReplicator onDemand update allowed rate per min is 4
2021-12-30 19:30:25,551 INFO com.netflix.discovery.DiscoveryClient [main] Discovery Client initialized at timestamp 1640889025550 with initial instances count: 4
2021-12-30 19:30:25,555 INFO org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry [main] Registering application DVDTHEQUE-BATCH-SERVICE with eureka with status UP
2021-12-30 19:30:25,557 INFO com.netflix.discovery.DiscoveryClient$3 [main] Saw local status change event StatusChangeEvent [timestamp=1640889025557, current=UP, previous=STARTING]
2021-12-30 19:30:25,560 WARN com.netflix.discovery.InstanceInfoReplicator [main] Ignoring onDemand update due to rate limiter
2021-12-30 19:30:25,563 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8089"]
2021-12-30 19:30:25,743 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8089 (http) with context path ''
2021-12-30 19:30:25,744 INFO org.springframework.cloud.netflix.eureka.serviceregistry.EurekaAutoServiceRegistration [main] Updating port to 8089
2021-12-30 19:30:25,913 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Loaded the Bouncy Castle security provider.
2021-12-30 19:30:25,923 INFO org.springframework.boot.StartupInfoLogger [main] Started BatchApplication in 7.709 seconds (JVM running for 8.336)
2021-12-30 19:30:25,931 INFO org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner [main] Running default command line with: []
2021-12-30 19:30:25,974 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Using Persistence Adapter: MemoryPersistenceAdapter
2021-12-30 19:30:26,038 INFO org.apache.activemq.broker.jmx.ManagementContext$1 [JMX connector] JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi
2021-12-30 19:30:26,104 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] launched with the following parameters: [{run.id=3, time=1640887219096}]
2021-12-30 19:30:26,132 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-3215-1640889025996-0:1) is starting
2021-12-30 19:30:26,140 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-3215-1640889025996-0:1) started
2021-12-30 19:30:26,140 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] For help or more information please see: http://activemq.apache.org
2021-12-30 19:30:26,146 WARN org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Temporary Store limit is 51200 mb (current store usage is 0 mb). The data directory: D:\dev\eclipse-06-2021\workspace\dvdtheque\dvdtheque-batch only has 9199 mb of usable space. - resetting to maximum available disk space: 9199 mb
2021-12-30 19:30:26,173 INFO org.apache.activemq.broker.TransportConnector [DiscoveryClient-InstanceInfoReplicator-0] Connector vm://localhost started
2021-12-30 19:30:26,181 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [exportFilms]
2021-12-30 19:30:26,249 INFO com.netflix.discovery.DiscoveryClient [DiscoveryClient-InstanceInfoReplicator-0] DiscoveryClient_DVDTHEQUE-BATCH-SERVICE/dvdtheque-batch-service:c3a2a17773420435e783700bc57c0ff9: registering service...
2021-12-30 19:30:26,290 INFO com.netflix.discovery.DiscoveryClient [DiscoveryClient-InstanceInfoReplicator-0] DiscoveryClient_DVDTHEQUE-BATCH-SERVICE/dvdtheque-batch-service:c3a2a17773420435e783700bc57c0ff9 - registration status: 204
2021-12-30 19:30:26,721 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [exportFilms] executed in 539ms
2021-12-30 19:30:26,903 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] completed with the following parameters: [{run.id=3, time=1640887219096}] and the following status: [COMPLETED] in 778ms
2021-12-30 19:30:26,967 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{INPUT_FILE_PATH=src/test/resources/ListeDVD.csv, time=1640888302785, run.id=1}]
2021-12-30 19:30:27,050 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [cleanDBStep]
2021-12-30 19:30:27,114 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [cleanDBStep] executed in 64ms
2021-12-30 19:30:27,160 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [importFilmsStep]
2021-12-30 19:30:28,108 ERROR org.springframework.batch.core.step.AbstractStep [main] Encountered an error executing step importFilmsStep in job importFilms
java.lang.IllegalStateException: Required key 'transformTmdbFilmToDvdThequeFilm' not found
	at org.springframework.core.env.AbstractPropertyResolver.getRequiredProperty(AbstractPropertyResolver.java:183)
	at org.springframework.core.env.AbstractEnvironment.getRequiredProperty(AbstractEnvironment.java:615)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:92)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:1)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.doProcess(SimpleChunkProcessor.java:134)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.transform(SimpleChunkProcessor.java:319)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210)
	at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)
	at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:173)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:160)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:155)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:150)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:793)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:783)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:345)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at fr.fredos.dvdtheque.batch.BatchApplication.main(BatchApplication.java:19)
2021-12-30 19:30:28,113 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [importFilmsStep] executed in 953ms
2021-12-30 19:30:28,137 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{INPUT_FILE_PATH=src/test/resources/ListeDVD.csv, time=1640888302785, run.id=1}] and the following status: [FAILED] in 1s159ms
2021-12-30 19:30:58,517 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8089-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-30 19:30:58,518 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Initializing Servlet 'dispatcherServlet'
2021-12-30 19:30:58,523 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Completed initialization in 4 ms
2021-12-30 19:30:58,965 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-1] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{time=1640889058910, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}]
2021-12-30 19:30:59,003 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-1] Executing step: [cleanDBStep]
2021-12-30 19:30:59,193 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Step: [cleanDBStep] executed in 190ms
2021-12-30 19:30:59,227 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-1] Executing step: [importFilmsStep]
2021-12-30 19:30:59,452 ERROR org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Encountered an error executing step importFilmsStep in job importFilms
java.lang.IllegalStateException: Required key 'transformTmdbFilmToDvdThequeFilm' not found
	at org.springframework.core.env.AbstractPropertyResolver.getRequiredProperty(AbstractPropertyResolver.java:183)
	at org.springframework.core.env.AbstractEnvironment.getRequiredProperty(AbstractEnvironment.java:615)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:92)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:1)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.doProcess(SimpleChunkProcessor.java:134)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.transform(SimpleChunkProcessor.java:319)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210)
	at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)
	at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at fr.fredos.dvdtheque.batch.controller.JobInvokerController.handleImportFilmsJob(JobInvokerController.java:41)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2021-12-30 19:30:59,473 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Step: [importFilmsStep] executed in 246ms
2021-12-30 19:30:59,500 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-1] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{time=1640889058910, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}] and the following status: [FAILED] in 522ms
2021-12-30 19:31:47,423 INFO org.hibernate.validator.internal.util.Version [background-preinit] HV000001: Hibernate Validator 6.2.0.Final
2021-12-30 19:31:48,265 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Fetching config from server at : http://localhost:8888
2021-12-30 19:31:48,783 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Located environment: name=dvdtheque-batch-service, profiles=[local], label=develop, version=5a84e492aa29c05fc0b6c883e92047f6e3946907, state=null
2021-12-30 19:31:48,784 INFO org.springframework.cloud.bootstrap.config.PropertySourceBootstrapConfiguration [main] Located property source: [BootstrapPropertySource {name='bootstrapProperties-configClient'}, BootstrapPropertySource {name='bootstrapProperties-https://github.com/fredo1975/spring-cloud-server-config.git/file:C:\Users\fredo\AppData\Local\Temp\config-repo-6509514101851484087\dvdtheque-batch-service-local.yml'}]
2021-12-30 19:31:48,805 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: local
2021-12-30 19:31:50,232 INFO org.springframework.cloud.context.scope.GenericScope [main] BeanFactory id=0c1151a1-d259-3920-9b8b-e9eb47a1c358
2021-12-30 19:31:50,518 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@15d114ce' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 19:31:50,526 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 19:31:50,973 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8089 (http)
2021-12-30 19:31:50,983 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8089"]
2021-12-30 19:31:50,984 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2021-12-30 19:31:50,985 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.56]
2021-12-30 19:31:51,186 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2021-12-30 19:31:51,187 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2365 ms
2021-12-30 19:31:51,665 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsJob
2021-12-30 19:31:51,667 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsStep
2021-12-30 19:31:51,672 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### ListItemReader
2021-12-30 19:31:51,856 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### excelFilmWriter
2021-12-30 19:31:51,889 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsJob
2021-12-30 19:31:51,892 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsStep
2021-12-30 19:31:52,853 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2021-12-30 19:31:53,030 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2021-12-30 19:31:53,043 INFO org.springframework.batch.core.repository.support.JobRepositoryFactoryBean [main] No database type set, using meta data indicating: MYSQL
2021-12-30 19:31:53,069 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher [main] No TaskExecutor has been set, defaulting to synchronous executor.
2021-12-30 19:31:53,385 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@38a27ace, org.springframework.security.web.context.SecurityContextPersistenceFilter@73db7df0, org.springframework.security.web.header.HeaderWriterFilter@64a8d575, org.springframework.security.web.csrf.CsrfFilter@60b4c754, org.springframework.security.web.authentication.logout.LogoutFilter@5e8698c0, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@56193e3a, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@6cf3b3d7, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@289da1bc, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@41289e88, org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter@1002d1c8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3d667b59, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@47374fa5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7e8783b0, org.springframework.security.web.session.SessionManagementFilter@36cdcae0, org.springframework.security.web.access.ExceptionTranslationFilter@301e5d23, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@65f470f8]
2021-12-30 19:31:53,535 INFO org.springframework.cloud.netflix.eureka.config.DiscoveryClientOptionalArgsConfiguration [main] Eureka HTTP Client uses RestTemplate.
2021-12-30 19:31:53,612 WARN org.springframework.cloud.loadbalancer.config.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger [main] Spring Cloud LoadBalancer is currently working with the default cache. You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2021-12-30 19:31:53,620 INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver [main] Exposing 16 endpoint(s) beneath base path '/actuator'
2021-12-30 19:31:53,690 INFO org.springframework.cloud.netflix.eureka.InstanceInfoFactory [main] Setting initial instance status as: STARTING
2021-12-30 19:31:53,771 INFO com.netflix.discovery.DiscoveryClient [main] Initializing Eureka in region us-east-1
2021-12-30 19:31:53,777 INFO com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver [main] Resolving eureka endpoints via configuration
2021-12-30 19:31:53,888 INFO com.netflix.discovery.DiscoveryClient [main] Disable delta property : false
2021-12-30 19:31:53,890 INFO com.netflix.discovery.DiscoveryClient [main] Single vip registry refresh property : null
2021-12-30 19:31:53,893 INFO com.netflix.discovery.DiscoveryClient [main] Force full registry fetch : false
2021-12-30 19:31:53,895 INFO com.netflix.discovery.DiscoveryClient [main] Application is null : false
2021-12-30 19:31:53,896 INFO com.netflix.discovery.DiscoveryClient [main] Registered Applications size is zero : true
2021-12-30 19:31:53,898 INFO com.netflix.discovery.DiscoveryClient [main] Application version is -1: true
2021-12-30 19:31:53,900 INFO com.netflix.discovery.DiscoveryClient [main] Getting all instance registry info from the eureka server
2021-12-30 19:31:54,156 INFO com.netflix.discovery.DiscoveryClient [main] The response status is 200
2021-12-30 19:31:54,161 INFO com.netflix.discovery.DiscoveryClient [main] Starting heartbeat executor: renew interval is: 2
2021-12-30 19:31:54,165 INFO com.netflix.discovery.InstanceInfoReplicator [main] InstanceInfoReplicator onDemand update allowed rate per min is 4
2021-12-30 19:31:54,172 INFO com.netflix.discovery.DiscoveryClient [main] Discovery Client initialized at timestamp 1640889114171 with initial instances count: 5
2021-12-30 19:31:54,179 INFO org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry [main] Registering application DVDTHEQUE-BATCH-SERVICE with eureka with status UP
2021-12-30 19:31:54,180 INFO com.netflix.discovery.DiscoveryClient$3 [main] Saw local status change event StatusChangeEvent [timestamp=1640889114180, current=UP, previous=STARTING]
2021-12-30 19:31:54,181 WARN com.netflix.discovery.InstanceInfoReplicator [main] Ignoring onDemand update due to rate limiter
2021-12-30 19:31:54,184 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8089"]
2021-12-30 19:31:54,355 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8089 (http) with context path ''
2021-12-30 19:31:54,357 INFO org.springframework.cloud.netflix.eureka.serviceregistry.EurekaAutoServiceRegistration [main] Updating port to 8089
2021-12-30 19:31:54,519 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Loaded the Bouncy Castle security provider.
2021-12-30 19:31:54,560 INFO org.springframework.boot.StartupInfoLogger [main] Started BatchApplication in 7.945 seconds (JVM running for 8.639)
2021-12-30 19:31:54,567 INFO org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner [main] Running default command line with: []
2021-12-30 19:31:54,579 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Using Persistence Adapter: MemoryPersistenceAdapter
2021-12-30 19:31:54,645 INFO org.apache.activemq.broker.jmx.ManagementContext$1 [JMX connector] JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi
2021-12-30 19:31:54,738 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-3256-1640889114603-0:1) is starting
2021-12-30 19:31:54,743 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-3256-1640889114603-0:1) started
2021-12-30 19:31:54,744 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] For help or more information please see: http://activemq.apache.org
2021-12-30 19:31:54,747 WARN org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Temporary Store limit is 51200 mb (current store usage is 0 mb). The data directory: D:\dev\eclipse-06-2021\workspace\dvdtheque\dvdtheque-batch only has 9199 mb of usable space. - resetting to maximum available disk space: 9199 mb
2021-12-30 19:31:54,750 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] launched with the following parameters: [{run.id=4, time=1640887219096}]
2021-12-30 19:31:54,774 INFO org.apache.activemq.broker.TransportConnector [DiscoveryClient-InstanceInfoReplicator-0] Connector vm://localhost started
2021-12-30 19:31:54,805 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [exportFilms]
2021-12-30 19:31:54,862 INFO com.netflix.discovery.DiscoveryClient [DiscoveryClient-InstanceInfoReplicator-0] DiscoveryClient_DVDTHEQUE-BATCH-SERVICE/dvdtheque-batch-service:b39e4f371691ec109a55893a3b1aac28: registering service...
2021-12-30 19:31:54,978 INFO com.netflix.discovery.DiscoveryClient [DiscoveryClient-InstanceInfoReplicator-0] DiscoveryClient_DVDTHEQUE-BATCH-SERVICE/dvdtheque-batch-service:b39e4f371691ec109a55893a3b1aac28 - registration status: 204
2021-12-30 19:31:55,351 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [exportFilms] executed in 544ms
2021-12-30 19:31:55,532 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] completed with the following parameters: [{run.id=4, time=1640887219096}] and the following status: [COMPLETED] in 759ms
2021-12-30 19:31:55,606 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{INPUT_FILE_PATH=src/test/resources/ListeDVD.csv, time=1640889058910, run.id=1}]
2021-12-30 19:31:55,688 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [cleanDBStep]
2021-12-30 19:31:55,760 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [cleanDBStep] executed in 71ms
2021-12-30 19:31:55,802 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [importFilmsStep]
2021-12-30 19:31:56,116 ERROR org.springframework.batch.core.step.AbstractStep [main] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: "{"timestamp":"2021-12-30T18:31:56.089+00:00","status":404,"error":"Not Found","path":"/dvdtheque-service/transformTmdbFilmToDvdThequeFilm/tmdb"}"
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:113)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:168)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:122)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:819)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:777)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:602)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:91)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:1)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.doProcess(SimpleChunkProcessor.java:134)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.transform(SimpleChunkProcessor.java:319)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210)
	at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)
	at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:173)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:160)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:155)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:150)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:793)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:783)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:345)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at fr.fredos.dvdtheque.batch.BatchApplication.main(BatchApplication.java:19)
2021-12-30 19:31:56,122 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [importFilmsStep] executed in 319ms
2021-12-30 19:31:56,148 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{INPUT_FILE_PATH=src/test/resources/ListeDVD.csv, time=1640889058910, run.id=1}] and the following status: [FAILED] in 532ms
2021-12-30 19:32:15,142 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8089-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-30 19:32:15,142 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Initializing Servlet 'dispatcherServlet'
2021-12-30 19:32:15,144 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Completed initialization in 2 ms
2021-12-30 19:32:15,587 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-1] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{time=1640889135548, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}]
2021-12-30 19:32:15,621 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-1] Executing step: [cleanDBStep]
2021-12-30 19:32:15,724 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Step: [cleanDBStep] executed in 102ms
2021-12-30 19:32:15,759 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-1] Executing step: [importFilmsStep]
2021-12-30 19:32:15,861 ERROR org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.web.client.HttpClientErrorException$NotFound: 404 Not Found: "{"timestamp":"2021-12-30T18:32:15.853+00:00","status":404,"error":"Not Found","path":"/dvdtheque-service/transformTmdbFilmToDvdThequeFilm/tmdb"}"
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:113)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:168)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:122)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:819)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:777)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:602)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:91)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:1)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.doProcess(SimpleChunkProcessor.java:134)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.transform(SimpleChunkProcessor.java:319)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210)
	at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)
	at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at fr.fredos.dvdtheque.batch.controller.JobInvokerController.handleImportFilmsJob(JobInvokerController.java:41)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2021-12-30 19:32:15,870 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Step: [importFilmsStep] executed in 111ms
2021-12-30 19:32:15,901 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-1] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{time=1640889135548, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}] and the following status: [FAILED] in 299ms
2021-12-30 19:33:44,219 INFO org.hibernate.validator.internal.util.Version [background-preinit] HV000001: Hibernate Validator 6.2.0.Final
2021-12-30 19:33:45,160 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Fetching config from server at : http://localhost:8888
2021-12-30 19:33:45,674 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Located environment: name=dvdtheque-batch-service, profiles=[local], label=develop, version=5a84e492aa29c05fc0b6c883e92047f6e3946907, state=null
2021-12-30 19:33:45,675 INFO org.springframework.cloud.bootstrap.config.PropertySourceBootstrapConfiguration [main] Located property source: [BootstrapPropertySource {name='bootstrapProperties-configClient'}, BootstrapPropertySource {name='bootstrapProperties-https://github.com/fredo1975/spring-cloud-server-config.git/file:C:\Users\fredo\AppData\Local\Temp\config-repo-6509514101851484087\dvdtheque-batch-service-local.yml'}]
2021-12-30 19:33:45,693 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: local
2021-12-30 19:33:47,030 INFO org.springframework.cloud.context.scope.GenericScope [main] BeanFactory id=0c1151a1-d259-3920-9b8b-e9eb47a1c358
2021-12-30 19:33:47,397 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@21f7e537' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 19:33:47,406 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 19:33:47,921 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8089 (http)
2021-12-30 19:33:47,932 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8089"]
2021-12-30 19:33:47,933 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2021-12-30 19:33:47,933 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.56]
2021-12-30 19:33:48,187 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2021-12-30 19:33:48,188 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2480 ms
2021-12-30 19:33:48,809 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsJob
2021-12-30 19:33:48,812 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsStep
2021-12-30 19:33:48,817 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### ListItemReader
2021-12-30 19:33:48,907 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### excelFilmWriter
2021-12-30 19:33:48,944 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsJob
2021-12-30 19:33:48,948 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsStep
2021-12-30 19:33:50,211 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2021-12-30 19:33:50,419 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2021-12-30 19:33:50,463 INFO org.springframework.batch.core.repository.support.JobRepositoryFactoryBean [main] No database type set, using meta data indicating: MYSQL
2021-12-30 19:33:50,524 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher [main] No TaskExecutor has been set, defaulting to synchronous executor.
2021-12-30 19:33:50,919 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@56a72887, org.springframework.security.web.context.SecurityContextPersistenceFilter@42fa5cb, org.springframework.security.web.header.HeaderWriterFilter@56554365, org.springframework.security.web.csrf.CsrfFilter@54d46c8, org.springframework.security.web.authentication.logout.LogoutFilter@5e9cb95, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@60484429, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@42c55978, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@c86c486, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@3c8dea0b, org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter@1fb30e5d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@44e4cf8a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7af56b26, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4b9beefe, org.springframework.security.web.session.SessionManagementFilter@66130c3b, org.springframework.security.web.access.ExceptionTranslationFilter@51aa2a58, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@301e5d23]
2021-12-30 19:33:51,082 INFO org.springframework.cloud.netflix.eureka.config.DiscoveryClientOptionalArgsConfiguration [main] Eureka HTTP Client uses RestTemplate.
2021-12-30 19:33:51,172 WARN org.springframework.cloud.loadbalancer.config.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger [main] Spring Cloud LoadBalancer is currently working with the default cache. You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2021-12-30 19:33:51,179 INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver [main] Exposing 16 endpoint(s) beneath base path '/actuator'
2021-12-30 19:33:51,259 INFO org.springframework.cloud.netflix.eureka.InstanceInfoFactory [main] Setting initial instance status as: STARTING
2021-12-30 19:33:51,342 INFO com.netflix.discovery.DiscoveryClient [main] Initializing Eureka in region us-east-1
2021-12-30 19:33:51,348 INFO com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver [main] Resolving eureka endpoints via configuration
2021-12-30 19:33:51,378 INFO com.netflix.discovery.DiscoveryClient [main] Disable delta property : false
2021-12-30 19:33:51,379 INFO com.netflix.discovery.DiscoveryClient [main] Single vip registry refresh property : null
2021-12-30 19:33:51,379 INFO com.netflix.discovery.DiscoveryClient [main] Force full registry fetch : false
2021-12-30 19:33:51,380 INFO com.netflix.discovery.DiscoveryClient [main] Application is null : false
2021-12-30 19:33:51,380 INFO com.netflix.discovery.DiscoveryClient [main] Registered Applications size is zero : true
2021-12-30 19:33:51,380 INFO com.netflix.discovery.DiscoveryClient [main] Application version is -1: true
2021-12-30 19:33:51,381 INFO com.netflix.discovery.DiscoveryClient [main] Getting all instance registry info from the eureka server
2021-12-30 19:33:51,719 INFO com.netflix.discovery.DiscoveryClient [main] The response status is 200
2021-12-30 19:33:51,726 INFO com.netflix.discovery.DiscoveryClient [main] Starting heartbeat executor: renew interval is: 2
2021-12-30 19:33:51,731 INFO com.netflix.discovery.InstanceInfoReplicator [main] InstanceInfoReplicator onDemand update allowed rate per min is 4
2021-12-30 19:33:51,738 INFO com.netflix.discovery.DiscoveryClient [main] Discovery Client initialized at timestamp 1640889231737 with initial instances count: 5
2021-12-30 19:33:51,744 INFO org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry [main] Registering application DVDTHEQUE-BATCH-SERVICE with eureka with status UP
2021-12-30 19:33:51,745 INFO com.netflix.discovery.DiscoveryClient$3 [main] Saw local status change event StatusChangeEvent [timestamp=1640889231745, current=UP, previous=STARTING]
2021-12-30 19:33:51,747 WARN com.netflix.discovery.InstanceInfoReplicator [main] Ignoring onDemand update due to rate limiter
2021-12-30 19:33:51,751 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8089"]
2021-12-30 19:33:51,893 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8089 (http) with context path ''
2021-12-30 19:33:51,895 INFO org.springframework.cloud.netflix.eureka.serviceregistry.EurekaAutoServiceRegistration [main] Updating port to 8089
2021-12-30 19:33:52,123 INFO org.springframework.boot.StartupInfoLogger [main] Started BatchApplication in 8.918 seconds (JVM running for 9.599)
2021-12-30 19:33:52,137 INFO org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner [main] Running default command line with: []
2021-12-30 19:33:52,304 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] launched with the following parameters: [{run.id=5, time=1640887219096}]
2021-12-30 19:33:52,353 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [exportFilms]
2021-12-30 19:33:52,412 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Loaded the Bouncy Castle security provider.
2021-12-30 19:33:52,473 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Using Persistence Adapter: MemoryPersistenceAdapter
2021-12-30 19:33:52,537 INFO org.apache.activemq.broker.jmx.ManagementContext$1 [JMX connector] JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi
2021-12-30 19:33:52,641 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-3299-1640889232501-0:1) is starting
2021-12-30 19:33:52,648 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-3299-1640889232501-0:1) started
2021-12-30 19:33:52,651 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] For help or more information please see: http://activemq.apache.org
2021-12-30 19:33:52,656 WARN org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Temporary Store limit is 51200 mb (current store usage is 0 mb). The data directory: D:\dev\eclipse-06-2021\workspace\dvdtheque\dvdtheque-batch only has 9199 mb of usable space. - resetting to maximum available disk space: 9199 mb
2021-12-30 19:33:52,688 INFO org.apache.activemq.broker.TransportConnector [DiscoveryClient-InstanceInfoReplicator-0] Connector vm://localhost started
2021-12-30 19:33:52,744 INFO com.netflix.discovery.DiscoveryClient [DiscoveryClient-InstanceInfoReplicator-0] DiscoveryClient_DVDTHEQUE-BATCH-SERVICE/dvdtheque-batch-service:12eecede3d534a7b16d8b05e72f59f7d: registering service...
2021-12-30 19:33:52,780 INFO com.netflix.discovery.DiscoveryClient [DiscoveryClient-InstanceInfoReplicator-0] DiscoveryClient_DVDTHEQUE-BATCH-SERVICE/dvdtheque-batch-service:12eecede3d534a7b16d8b05e72f59f7d - registration status: 204
2021-12-30 19:33:52,984 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [exportFilms] executed in 631ms
2021-12-30 19:33:53,257 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] completed with the following parameters: [{run.id=5, time=1640887219096}] and the following status: [COMPLETED] in 927ms
2021-12-30 19:33:53,332 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{INPUT_FILE_PATH=src/test/resources/ListeDVD.csv, time=1640889135548, run.id=1}]
2021-12-30 19:33:53,433 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [cleanDBStep]
2021-12-30 19:33:53,514 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [cleanDBStep] executed in 80ms
2021-12-30 19:33:53,551 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [importFilmsStep]
2021-12-30 19:33:54,021 ERROR org.springframework.batch.core.step.AbstractStep [main] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.web.client.HttpClientErrorException$BadRequest: 400 Bad Request: "{"status":"BAD_REQUEST","timestamp":"30-12-2021 07:33:53","message":"Malformed JSON request","debugMessage":"Required request body is missing: org.springframework.http.ResponseEntity<fr.fredos.dvdtheque.rest.dao.domain.Film> fr.fredos.dvdtheque.rest.controller.FilmController.transformTmdbFilmToDvdThequeFilm(fr.fredos.dvdtheque.common.tmdb.model.Results,java.lang.Long)","subErrors":null}"
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:101)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:168)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:122)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:819)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:777)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:602)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:91)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:1)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.doProcess(SimpleChunkProcessor.java:134)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.transform(SimpleChunkProcessor.java:319)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210)
	at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)
	at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:173)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:160)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:155)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:150)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:793)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:783)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:345)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at fr.fredos.dvdtheque.batch.BatchApplication.main(BatchApplication.java:19)
2021-12-30 19:33:54,032 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [importFilmsStep] executed in 480ms
2021-12-30 19:33:54,061 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{INPUT_FILE_PATH=src/test/resources/ListeDVD.csv, time=1640889135548, run.id=1}] and the following status: [FAILED] in 716ms
2021-12-30 19:34:07,439 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8089-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-30 19:34:07,439 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Initializing Servlet 'dispatcherServlet'
2021-12-30 19:34:07,444 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Completed initialization in 4 ms
2021-12-30 19:34:07,778 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-1] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{time=1640889247730, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}]
2021-12-30 19:34:07,821 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-1] Executing step: [cleanDBStep]
2021-12-30 19:34:07,921 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Step: [cleanDBStep] executed in 99ms
2021-12-30 19:34:07,959 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-1] Executing step: [importFilmsStep]
2021-12-30 19:34:08,077 ERROR org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.web.client.HttpClientErrorException$BadRequest: 400 Bad Request: "{"status":"BAD_REQUEST","timestamp":"30-12-2021 07:34:08","message":"Malformed JSON request","debugMessage":"Required request body is missing: org.springframework.http.ResponseEntity<fr.fredos.dvdtheque.rest.dao.domain.Film> fr.fredos.dvdtheque.rest.controller.FilmController.transformTmdbFilmToDvdThequeFilm(fr.fredos.dvdtheque.common.tmdb.model.Results,java.lang.Long)","subErrors":null}"
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:101)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:168)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:122)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:819)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:777)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:602)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:91)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:1)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.doProcess(SimpleChunkProcessor.java:134)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.transform(SimpleChunkProcessor.java:319)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210)
	at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)
	at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at fr.fredos.dvdtheque.batch.controller.JobInvokerController.handleImportFilmsJob(JobInvokerController.java:41)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2021-12-30 19:34:08,085 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Step: [importFilmsStep] executed in 126ms
2021-12-30 19:34:08,108 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-1] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{time=1640889247730, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}] and the following status: [FAILED] in 319ms
2021-12-30 19:35:52,625 INFO org.hibernate.validator.internal.util.Version [background-preinit] HV000001: Hibernate Validator 6.2.0.Final
2021-12-30 19:35:53,388 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Fetching config from server at : http://localhost:8888
2021-12-30 19:35:53,931 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Located environment: name=dvdtheque-batch-service, profiles=[local], label=develop, version=5a84e492aa29c05fc0b6c883e92047f6e3946907, state=null
2021-12-30 19:35:53,932 INFO org.springframework.cloud.bootstrap.config.PropertySourceBootstrapConfiguration [main] Located property source: [BootstrapPropertySource {name='bootstrapProperties-configClient'}, BootstrapPropertySource {name='bootstrapProperties-https://github.com/fredo1975/spring-cloud-server-config.git/file:C:\Users\fredo\AppData\Local\Temp\config-repo-6509514101851484087\dvdtheque-batch-service-local.yml'}]
2021-12-30 19:35:53,950 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: local
2021-12-30 19:35:55,334 INFO org.springframework.cloud.context.scope.GenericScope [main] BeanFactory id=0c1151a1-d259-3920-9b8b-e9eb47a1c358
2021-12-30 19:35:55,639 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@26be9a6' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 19:35:55,649 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 19:35:56,080 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8089 (http)
2021-12-30 19:35:56,092 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8089"]
2021-12-30 19:35:56,093 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2021-12-30 19:35:56,093 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.56]
2021-12-30 19:35:56,356 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2021-12-30 19:35:56,356 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2391 ms
2021-12-30 19:35:56,784 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsJob
2021-12-30 19:35:56,785 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsStep
2021-12-30 19:35:56,790 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### ListItemReader
2021-12-30 19:35:56,886 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### excelFilmWriter
2021-12-30 19:35:56,921 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsJob
2021-12-30 19:35:56,925 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsStep
2021-12-30 19:35:57,875 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2021-12-30 19:35:58,061 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2021-12-30 19:35:58,100 INFO org.springframework.batch.core.repository.support.JobRepositoryFactoryBean [main] No database type set, using meta data indicating: MYSQL
2021-12-30 19:35:58,138 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher [main] No TaskExecutor has been set, defaulting to synchronous executor.
2021-12-30 19:35:58,476 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4fce3ed7, org.springframework.security.web.context.SecurityContextPersistenceFilter@54530644, org.springframework.security.web.header.HeaderWriterFilter@54d46c8, org.springframework.security.web.csrf.CsrfFilter@306bf4c3, org.springframework.security.web.authentication.logout.LogoutFilter@45cf0c15, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@1aaf73b7, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@731d0d5c, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@42fa5cb, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@54033a65, org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter@2728add3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3a45308f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2d23a5be, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4fb99927, org.springframework.security.web.session.SessionManagementFilter@4ae6451d, org.springframework.security.web.access.ExceptionTranslationFilter@49338f3, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7aca299e]
2021-12-30 19:35:58,627 INFO org.springframework.cloud.netflix.eureka.config.DiscoveryClientOptionalArgsConfiguration [main] Eureka HTTP Client uses RestTemplate.
2021-12-30 19:35:58,706 WARN org.springframework.cloud.loadbalancer.config.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger [main] Spring Cloud LoadBalancer is currently working with the default cache. You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2021-12-30 19:35:58,713 INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver [main] Exposing 16 endpoint(s) beneath base path '/actuator'
2021-12-30 19:35:58,782 INFO org.springframework.cloud.netflix.eureka.InstanceInfoFactory [main] Setting initial instance status as: STARTING
2021-12-30 19:35:58,861 INFO com.netflix.discovery.DiscoveryClient [main] Initializing Eureka in region us-east-1
2021-12-30 19:35:58,868 INFO com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver [main] Resolving eureka endpoints via configuration
2021-12-30 19:35:58,895 INFO com.netflix.discovery.DiscoveryClient [main] Disable delta property : false
2021-12-30 19:35:58,896 INFO com.netflix.discovery.DiscoveryClient [main] Single vip registry refresh property : null
2021-12-30 19:35:58,896 INFO com.netflix.discovery.DiscoveryClient [main] Force full registry fetch : false
2021-12-30 19:35:58,897 INFO com.netflix.discovery.DiscoveryClient [main] Application is null : false
2021-12-30 19:35:58,897 INFO com.netflix.discovery.DiscoveryClient [main] Registered Applications size is zero : true
2021-12-30 19:35:58,897 INFO com.netflix.discovery.DiscoveryClient [main] Application version is -1: true
2021-12-30 19:35:58,897 INFO com.netflix.discovery.DiscoveryClient [main] Getting all instance registry info from the eureka server
2021-12-30 19:35:59,149 INFO com.netflix.discovery.DiscoveryClient [main] The response status is 200
2021-12-30 19:35:59,153 INFO com.netflix.discovery.DiscoveryClient [main] Starting heartbeat executor: renew interval is: 2
2021-12-30 19:35:59,156 INFO com.netflix.discovery.InstanceInfoReplicator [main] InstanceInfoReplicator onDemand update allowed rate per min is 4
2021-12-30 19:35:59,163 INFO com.netflix.discovery.DiscoveryClient [main] Discovery Client initialized at timestamp 1640889359162 with initial instances count: 5
2021-12-30 19:35:59,167 INFO org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry [main] Registering application DVDTHEQUE-BATCH-SERVICE with eureka with status UP
2021-12-30 19:35:59,169 INFO com.netflix.discovery.DiscoveryClient$3 [main] Saw local status change event StatusChangeEvent [timestamp=1640889359169, current=UP, previous=STARTING]
2021-12-30 19:35:59,171 WARN com.netflix.discovery.InstanceInfoReplicator [main] Ignoring onDemand update due to rate limiter
2021-12-30 19:35:59,172 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8089"]
2021-12-30 19:35:59,194 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8089 (http) with context path ''
2021-12-30 19:35:59,197 INFO org.springframework.cloud.netflix.eureka.serviceregistry.EurekaAutoServiceRegistration [main] Updating port to 8089
2021-12-30 19:35:59,499 INFO org.springframework.boot.StartupInfoLogger [main] Started BatchApplication in 7.652 seconds (JVM running for 8.226)
2021-12-30 19:35:59,506 INFO org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner [main] Running default command line with: []
2021-12-30 19:35:59,616 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Loaded the Bouncy Castle security provider.
2021-12-30 19:35:59,643 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] launched with the following parameters: [{run.id=6, time=1640887219096}]
2021-12-30 19:35:59,682 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Using Persistence Adapter: MemoryPersistenceAdapter
2021-12-30 19:35:59,697 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [exportFilms]
2021-12-30 19:35:59,773 INFO org.apache.activemq.broker.jmx.ManagementContext$1 [JMX connector] JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi
2021-12-30 19:35:59,840 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-3345-1640889359706-0:1) is starting
2021-12-30 19:35:59,846 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-3345-1640889359706-0:1) started
2021-12-30 19:35:59,847 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] For help or more information please see: http://activemq.apache.org
2021-12-30 19:35:59,851 WARN org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Temporary Store limit is 51200 mb (current store usage is 0 mb). The data directory: D:\dev\eclipse-06-2021\workspace\dvdtheque\dvdtheque-batch only has 9199 mb of usable space. - resetting to maximum available disk space: 9199 mb
2021-12-30 19:35:59,873 INFO org.apache.activemq.broker.TransportConnector [DiscoveryClient-InstanceInfoReplicator-0] Connector vm://localhost started
2021-12-30 19:35:59,932 INFO com.netflix.discovery.DiscoveryClient [DiscoveryClient-InstanceInfoReplicator-0] DiscoveryClient_DVDTHEQUE-BATCH-SERVICE/dvdtheque-batch-service:e3bf258201d7b864a5085bb7b03df012: registering service...
2021-12-30 19:35:59,977 INFO com.netflix.discovery.DiscoveryClient [DiscoveryClient-InstanceInfoReplicator-0] DiscoveryClient_DVDTHEQUE-BATCH-SERVICE/dvdtheque-batch-service:e3bf258201d7b864a5085bb7b03df012 - registration status: 204
2021-12-30 19:36:00,202 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [exportFilms] executed in 504ms
2021-12-30 19:36:00,444 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] completed with the following parameters: [{run.id=6, time=1640887219096}] and the following status: [COMPLETED] in 778ms
2021-12-30 19:36:00,520 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{INPUT_FILE_PATH=src/test/resources/ListeDVD.csv, time=1640889247730, run.id=1}]
2021-12-30 19:36:00,603 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [cleanDBStep]
2021-12-30 19:36:00,673 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [cleanDBStep] executed in 69ms
2021-12-30 19:36:00,716 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [importFilmsStep]
2021-12-30 19:36:00,854 ERROR org.springframework.batch.core.step.AbstractStep [main] Encountered an error executing step importFilmsStep in job importFilms
java.lang.UnsupportedOperationException: null
	at org.springframework.http.ReadOnlyHttpHeaders.add(ReadOnlyHttpHeaders.java:91)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:92)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:1)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.doProcess(SimpleChunkProcessor.java:134)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.transform(SimpleChunkProcessor.java:319)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210)
	at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)
	at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:173)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:160)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:155)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:150)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:793)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:783)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:345)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at fr.fredos.dvdtheque.batch.BatchApplication.main(BatchApplication.java:19)
2021-12-30 19:36:00,859 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [importFilmsStep] executed in 142ms
2021-12-30 19:36:00,888 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{INPUT_FILE_PATH=src/test/resources/ListeDVD.csv, time=1640889247730, run.id=1}] and the following status: [FAILED] in 353ms
2021-12-30 19:37:04,068 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8089-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-30 19:37:04,068 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Initializing Servlet 'dispatcherServlet'
2021-12-30 19:37:04,073 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Completed initialization in 4 ms
2021-12-30 19:37:04,563 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-1] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{time=1640889424517, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}]
2021-12-30 19:37:04,618 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-1] Executing step: [cleanDBStep]
2021-12-30 19:37:04,697 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Step: [cleanDBStep] executed in 76ms
2021-12-30 19:37:04,738 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-1] Executing step: [importFilmsStep]
2021-12-30 19:37:04,822 ERROR org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Encountered an error executing step importFilmsStep in job importFilms
java.lang.UnsupportedOperationException: null
	at org.springframework.http.ReadOnlyHttpHeaders.add(ReadOnlyHttpHeaders.java:91)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:92)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:1)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.doProcess(SimpleChunkProcessor.java:134)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.transform(SimpleChunkProcessor.java:319)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210)
	at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)
	at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at fr.fredos.dvdtheque.batch.controller.JobInvokerController.handleImportFilmsJob(JobInvokerController.java:41)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2021-12-30 19:37:04,833 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Step: [importFilmsStep] executed in 94ms
2021-12-30 19:37:04,856 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-1] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{time=1640889424517, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}] and the following status: [FAILED] in 281ms
2021-12-30 19:38:58,055 INFO org.hibernate.validator.internal.util.Version [background-preinit] HV000001: Hibernate Validator 6.2.0.Final
2021-12-30 19:38:58,820 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Fetching config from server at : http://localhost:8888
2021-12-30 19:38:59,389 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Located environment: name=dvdtheque-batch-service, profiles=[local], label=develop, version=5a84e492aa29c05fc0b6c883e92047f6e3946907, state=null
2021-12-30 19:38:59,392 INFO org.springframework.cloud.bootstrap.config.PropertySourceBootstrapConfiguration [main] Located property source: [BootstrapPropertySource {name='bootstrapProperties-configClient'}, BootstrapPropertySource {name='bootstrapProperties-https://github.com/fredo1975/spring-cloud-server-config.git/file:C:\Users\fredo\AppData\Local\Temp\config-repo-6509514101851484087\dvdtheque-batch-service-local.yml'}]
2021-12-30 19:38:59,441 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: local
2021-12-30 19:39:00,815 INFO org.springframework.cloud.context.scope.GenericScope [main] BeanFactory id=0c1151a1-d259-3920-9b8b-e9eb47a1c358
2021-12-30 19:39:01,128 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@6b27b2d0' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 19:39:01,134 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 19:39:01,631 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8089 (http)
2021-12-30 19:39:01,642 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8089"]
2021-12-30 19:39:01,643 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2021-12-30 19:39:01,643 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.56]
2021-12-30 19:39:01,807 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2021-12-30 19:39:01,807 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2350 ms
2021-12-30 19:39:02,272 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsJob
2021-12-30 19:39:02,275 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsStep
2021-12-30 19:39:02,280 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### ListItemReader
2021-12-30 19:39:02,389 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### excelFilmWriter
2021-12-30 19:39:02,438 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsJob
2021-12-30 19:39:02,443 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsStep
2021-12-30 19:39:03,547 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2021-12-30 19:39:03,789 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2021-12-30 19:39:03,825 INFO org.springframework.batch.core.repository.support.JobRepositoryFactoryBean [main] No database type set, using meta data indicating: MYSQL
2021-12-30 19:39:03,861 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher [main] No TaskExecutor has been set, defaulting to synchronous executor.
2021-12-30 19:39:04,131 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@31859960, org.springframework.security.web.context.SecurityContextPersistenceFilter@4abdd5e, org.springframework.security.web.header.HeaderWriterFilter@39403943, org.springframework.security.web.csrf.CsrfFilter@746f8520, org.springframework.security.web.authentication.logout.LogoutFilter@3cc817bd, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@393bcd6b, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@64a8d575, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@54d46c8, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@5718e77c, org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter@780dbed7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7b9fea11, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6fe9c048, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3d667b59, org.springframework.security.web.session.SessionManagementFilter@49338f3, org.springframework.security.web.access.ExceptionTranslationFilter@4aea57dc, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5e9cb95]
2021-12-30 19:39:04,286 INFO org.springframework.cloud.netflix.eureka.config.DiscoveryClientOptionalArgsConfiguration [main] Eureka HTTP Client uses RestTemplate.
2021-12-30 19:39:04,363 WARN org.springframework.cloud.loadbalancer.config.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger [main] Spring Cloud LoadBalancer is currently working with the default cache. You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2021-12-30 19:39:04,372 INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver [main] Exposing 16 endpoint(s) beneath base path '/actuator'
2021-12-30 19:39:04,444 INFO org.springframework.cloud.netflix.eureka.InstanceInfoFactory [main] Setting initial instance status as: STARTING
2021-12-30 19:39:04,528 INFO com.netflix.discovery.DiscoveryClient [main] Initializing Eureka in region us-east-1
2021-12-30 19:39:04,534 INFO com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver [main] Resolving eureka endpoints via configuration
2021-12-30 19:39:04,562 INFO com.netflix.discovery.DiscoveryClient [main] Disable delta property : false
2021-12-30 19:39:04,563 INFO com.netflix.discovery.DiscoveryClient [main] Single vip registry refresh property : null
2021-12-30 19:39:04,563 INFO com.netflix.discovery.DiscoveryClient [main] Force full registry fetch : false
2021-12-30 19:39:04,564 INFO com.netflix.discovery.DiscoveryClient [main] Application is null : false
2021-12-30 19:39:04,564 INFO com.netflix.discovery.DiscoveryClient [main] Registered Applications size is zero : true
2021-12-30 19:39:04,564 INFO com.netflix.discovery.DiscoveryClient [main] Application version is -1: true
2021-12-30 19:39:04,564 INFO com.netflix.discovery.DiscoveryClient [main] Getting all instance registry info from the eureka server
2021-12-30 19:39:04,917 INFO com.netflix.discovery.DiscoveryClient [main] The response status is 200
2021-12-30 19:39:04,921 INFO com.netflix.discovery.DiscoveryClient [main] Starting heartbeat executor: renew interval is: 2
2021-12-30 19:39:04,925 INFO com.netflix.discovery.InstanceInfoReplicator [main] InstanceInfoReplicator onDemand update allowed rate per min is 4
2021-12-30 19:39:04,931 INFO com.netflix.discovery.DiscoveryClient [main] Discovery Client initialized at timestamp 1640889544930 with initial instances count: 5
2021-12-30 19:39:04,935 INFO org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry [main] Registering application DVDTHEQUE-BATCH-SERVICE with eureka with status UP
2021-12-30 19:39:04,937 INFO com.netflix.discovery.DiscoveryClient$3 [main] Saw local status change event StatusChangeEvent [timestamp=1640889544937, current=UP, previous=STARTING]
2021-12-30 19:39:04,939 WARN com.netflix.discovery.InstanceInfoReplicator [main] Ignoring onDemand update due to rate limiter
2021-12-30 19:39:04,941 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8089"]
2021-12-30 19:39:04,961 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8089 (http) with context path ''
2021-12-30 19:39:04,963 INFO org.springframework.cloud.netflix.eureka.serviceregistry.EurekaAutoServiceRegistration [main] Updating port to 8089
2021-12-30 19:39:05,138 INFO org.springframework.boot.StartupInfoLogger [main] Started BatchApplication in 7.864 seconds (JVM running for 8.453)
2021-12-30 19:39:05,149 INFO org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner [main] Running default command line with: []
2021-12-30 19:39:05,276 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] launched with the following parameters: [{run.id=7, time=1640887219096}]
2021-12-30 19:39:05,335 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [exportFilms]
2021-12-30 19:39:05,340 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Loaded the Bouncy Castle security provider.
2021-12-30 19:39:05,410 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Using Persistence Adapter: MemoryPersistenceAdapter
2021-12-30 19:39:05,466 INFO org.apache.activemq.broker.jmx.ManagementContext$1 [JMX connector] JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi
2021-12-30 19:39:05,564 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-3394-1640889545429-0:1) is starting
2021-12-30 19:39:05,572 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-3394-1640889545429-0:1) started
2021-12-30 19:39:05,573 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] For help or more information please see: http://activemq.apache.org
2021-12-30 19:39:05,577 WARN org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Temporary Store limit is 51200 mb (current store usage is 0 mb). The data directory: D:\dev\eclipse-06-2021\workspace\dvdtheque\dvdtheque-batch only has 9199 mb of usable space. - resetting to maximum available disk space: 9199 mb
2021-12-30 19:39:05,604 INFO org.apache.activemq.broker.TransportConnector [DiscoveryClient-InstanceInfoReplicator-0] Connector vm://localhost started
2021-12-30 19:39:05,753 INFO com.netflix.discovery.DiscoveryClient [DiscoveryClient-InstanceInfoReplicator-0] DiscoveryClient_DVDTHEQUE-BATCH-SERVICE/dvdtheque-batch-service:3c4b8011ba803e0b0336e770ad18d6c3: registering service...
2021-12-30 19:39:05,803 INFO com.netflix.discovery.DiscoveryClient [DiscoveryClient-InstanceInfoReplicator-0] DiscoveryClient_DVDTHEQUE-BATCH-SERVICE/dvdtheque-batch-service:3c4b8011ba803e0b0336e770ad18d6c3 - registration status: 204
2021-12-30 19:39:05,935 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [exportFilms] executed in 600ms
2021-12-30 19:39:06,124 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] completed with the following parameters: [{run.id=7, time=1640887219096}] and the following status: [COMPLETED] in 821ms
2021-12-30 19:39:06,207 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{INPUT_FILE_PATH=src/test/resources/ListeDVD.csv, time=1640889424517, run.id=1}]
2021-12-30 19:39:06,286 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [cleanDBStep]
2021-12-30 19:39:06,352 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [cleanDBStep] executed in 66ms
2021-12-30 19:39:06,384 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [importFilmsStep]
2021-12-30 19:39:06,559 ERROR org.springframework.batch.core.step.AbstractStep [main] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.web.client.HttpClientErrorException$Forbidden: 403 Forbidden: "{"timestamp":"2021-12-30T18:39:06.544+00:00","status":403,"error":"Forbidden","path":"/dvdtheque-service/transformTmdbFilmToDvdThequeFilm/tmdb/62"}"
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:109)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:168)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:122)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:819)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:777)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:602)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:92)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:1)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.doProcess(SimpleChunkProcessor.java:134)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.transform(SimpleChunkProcessor.java:319)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210)
	at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)
	at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:173)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:160)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:155)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:150)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:793)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:783)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:345)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at fr.fredos.dvdtheque.batch.BatchApplication.main(BatchApplication.java:19)
2021-12-30 19:39:06,562 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [importFilmsStep] executed in 177ms
2021-12-30 19:39:06,587 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{INPUT_FILE_PATH=src/test/resources/ListeDVD.csv, time=1640889424517, run.id=1}] and the following status: [FAILED] in 369ms
2021-12-30 19:39:52,422 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8089-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-30 19:39:52,423 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Initializing Servlet 'dispatcherServlet'
2021-12-30 19:39:52,428 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Completed initialization in 5 ms
2021-12-30 19:39:52,780 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-1] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{time=1640889592743, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}]
2021-12-30 19:39:52,814 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-1] Executing step: [cleanDBStep]
2021-12-30 19:39:52,892 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Step: [cleanDBStep] executed in 77ms
2021-12-30 19:39:52,938 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-1] Executing step: [importFilmsStep]
2021-12-30 19:39:53,180 ERROR org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.web.client.HttpClientErrorException$Forbidden: 403 Forbidden: "{"timestamp":"2021-12-30T18:39:53.138+00:00","status":403,"error":"Forbidden","path":"/dvdtheque-service/transformTmdbFilmToDvdThequeFilm/tmdb/62"}"
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:109)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:168)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:122)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:819)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:777)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:602)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:92)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:1)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.doProcess(SimpleChunkProcessor.java:134)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.transform(SimpleChunkProcessor.java:319)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210)
	at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)
	at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at fr.fredos.dvdtheque.batch.controller.JobInvokerController.handleImportFilmsJob(JobInvokerController.java:41)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2021-12-30 19:39:53,201 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Step: [importFilmsStep] executed in 263ms
2021-12-30 19:39:53,231 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-1] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{time=1640889592743, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}] and the following status: [FAILED] in 436ms
2021-12-30 19:42:26,880 INFO org.hibernate.validator.internal.util.Version [background-preinit] HV000001: Hibernate Validator 6.2.0.Final
2021-12-30 19:42:27,588 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Fetching config from server at : http://localhost:8888
2021-12-30 19:42:28,179 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Located environment: name=dvdtheque-batch-service, profiles=[local], label=develop, version=5a84e492aa29c05fc0b6c883e92047f6e3946907, state=null
2021-12-30 19:42:28,180 INFO org.springframework.cloud.bootstrap.config.PropertySourceBootstrapConfiguration [main] Located property source: [BootstrapPropertySource {name='bootstrapProperties-configClient'}, BootstrapPropertySource {name='bootstrapProperties-https://github.com/fredo1975/spring-cloud-server-config.git/file:C:\Users\fredo\AppData\Local\Temp\config-repo-6509514101851484087\dvdtheque-batch-service-local.yml'}]
2021-12-30 19:42:28,198 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: local
2021-12-30 19:42:29,519 INFO org.springframework.cloud.context.scope.GenericScope [main] BeanFactory id=0c1151a1-d259-3920-9b8b-e9eb47a1c358
2021-12-30 19:42:29,814 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@76cdafa3' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 19:42:29,820 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 19:42:30,268 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8089 (http)
2021-12-30 19:42:30,281 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8089"]
2021-12-30 19:42:30,281 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2021-12-30 19:42:30,282 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.56]
2021-12-30 19:42:30,503 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2021-12-30 19:42:30,503 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2291 ms
2021-12-30 19:42:31,007 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsJob
2021-12-30 19:42:31,012 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsStep
2021-12-30 19:42:31,019 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### ListItemReader
2021-12-30 19:42:31,124 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### excelFilmWriter
2021-12-30 19:42:31,158 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsJob
2021-12-30 19:42:31,161 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsStep
2021-12-30 19:42:32,176 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2021-12-30 19:42:32,340 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2021-12-30 19:42:32,352 INFO org.springframework.batch.core.repository.support.JobRepositoryFactoryBean [main] No database type set, using meta data indicating: MYSQL
2021-12-30 19:42:32,374 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher [main] No TaskExecutor has been set, defaulting to synchronous executor.
2021-12-30 19:42:32,769 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@d0e4972, org.springframework.security.web.context.SecurityContextPersistenceFilter@2ec156fb, org.springframework.security.web.header.HeaderWriterFilter@2c846d55, org.springframework.security.web.csrf.CsrfFilter@2f2dc407, org.springframework.security.web.authentication.logout.LogoutFilter@1d535b78, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@254cc548, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@65f470f8, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@1bf52f10, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@1978b0d5, org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter@1d0f7bcf, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@75784062, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7aca299e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6556471b, org.springframework.security.web.session.SessionManagementFilter@67689c81, org.springframework.security.web.access.ExceptionTranslationFilter@6e6f5842, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2d9df336]
2021-12-30 19:42:32,915 INFO org.springframework.cloud.netflix.eureka.config.DiscoveryClientOptionalArgsConfiguration [main] Eureka HTTP Client uses RestTemplate.
2021-12-30 19:42:32,986 WARN org.springframework.cloud.loadbalancer.config.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger [main] Spring Cloud LoadBalancer is currently working with the default cache. You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2021-12-30 19:42:32,993 INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver [main] Exposing 16 endpoint(s) beneath base path '/actuator'
2021-12-30 19:42:33,148 INFO org.springframework.cloud.netflix.eureka.InstanceInfoFactory [main] Setting initial instance status as: STARTING
2021-12-30 19:42:33,225 INFO com.netflix.discovery.DiscoveryClient [main] Initializing Eureka in region us-east-1
2021-12-30 19:42:33,231 INFO com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver [main] Resolving eureka endpoints via configuration
2021-12-30 19:42:33,256 INFO com.netflix.discovery.DiscoveryClient [main] Disable delta property : false
2021-12-30 19:42:33,257 INFO com.netflix.discovery.DiscoveryClient [main] Single vip registry refresh property : null
2021-12-30 19:42:33,257 INFO com.netflix.discovery.DiscoveryClient [main] Force full registry fetch : false
2021-12-30 19:42:33,257 INFO com.netflix.discovery.DiscoveryClient [main] Application is null : false
2021-12-30 19:42:33,258 INFO com.netflix.discovery.DiscoveryClient [main] Registered Applications size is zero : true
2021-12-30 19:42:33,258 INFO com.netflix.discovery.DiscoveryClient [main] Application version is -1: true
2021-12-30 19:42:33,258 INFO com.netflix.discovery.DiscoveryClient [main] Getting all instance registry info from the eureka server
2021-12-30 19:42:33,513 INFO com.netflix.discovery.DiscoveryClient [main] The response status is 200
2021-12-30 19:42:33,518 INFO com.netflix.discovery.DiscoveryClient [main] Starting heartbeat executor: renew interval is: 2
2021-12-30 19:42:33,522 INFO com.netflix.discovery.InstanceInfoReplicator [main] InstanceInfoReplicator onDemand update allowed rate per min is 4
2021-12-30 19:42:33,528 INFO com.netflix.discovery.DiscoveryClient [main] Discovery Client initialized at timestamp 1640889753527 with initial instances count: 5
2021-12-30 19:42:33,532 INFO org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry [main] Registering application DVDTHEQUE-BATCH-SERVICE with eureka with status UP
2021-12-30 19:42:33,534 INFO com.netflix.discovery.DiscoveryClient$3 [main] Saw local status change event StatusChangeEvent [timestamp=1640889753533, current=UP, previous=STARTING]
2021-12-30 19:42:33,535 WARN com.netflix.discovery.InstanceInfoReplicator [main] Ignoring onDemand update due to rate limiter
2021-12-30 19:42:33,537 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8089"]
2021-12-30 19:42:33,559 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8089 (http) with context path ''
2021-12-30 19:42:33,562 INFO org.springframework.cloud.netflix.eureka.serviceregistry.EurekaAutoServiceRegistration [main] Updating port to 8089
2021-12-30 19:42:33,756 INFO org.springframework.boot.StartupInfoLogger [main] Started BatchApplication in 7.676 seconds (JVM running for 8.366)
2021-12-30 19:42:33,767 INFO org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner [main] Running default command line with: []
2021-12-30 19:42:33,921 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] launched with the following parameters: [{run.id=8, time=1640887219096}]
2021-12-30 19:42:33,943 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Loaded the Bouncy Castle security provider.
2021-12-30 19:42:33,973 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [exportFilms]
2021-12-30 19:42:34,018 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Using Persistence Adapter: MemoryPersistenceAdapter
2021-12-30 19:42:34,210 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-3438-1640889754050-0:1) is starting
2021-12-30 19:42:34,244 INFO org.apache.activemq.broker.jmx.ManagementContext$1 [JMX connector] JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi
2021-12-30 19:42:34,248 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-3438-1640889754050-0:1) started
2021-12-30 19:42:34,249 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] For help or more information please see: http://activemq.apache.org
2021-12-30 19:42:34,252 WARN org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Temporary Store limit is 51200 mb (current store usage is 0 mb). The data directory: D:\dev\eclipse-06-2021\workspace\dvdtheque\dvdtheque-batch only has 9199 mb of usable space. - resetting to maximum available disk space: 9199 mb
2021-12-30 19:42:34,277 INFO org.apache.activemq.broker.TransportConnector [DiscoveryClient-InstanceInfoReplicator-0] Connector vm://localhost started
2021-12-30 19:42:34,336 INFO com.netflix.discovery.DiscoveryClient [DiscoveryClient-InstanceInfoReplicator-0] DiscoveryClient_DVDTHEQUE-BATCH-SERVICE/dvdtheque-batch-service:b47c72d47d5333fc4189b28d7fe171e2: registering service...
2021-12-30 19:42:34,386 INFO com.netflix.discovery.DiscoveryClient [DiscoveryClient-InstanceInfoReplicator-0] DiscoveryClient_DVDTHEQUE-BATCH-SERVICE/dvdtheque-batch-service:b47c72d47d5333fc4189b28d7fe171e2 - registration status: 204
2021-12-30 19:42:34,603 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [exportFilms] executed in 630ms
2021-12-30 19:42:34,809 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] completed with the following parameters: [{run.id=8, time=1640887219096}] and the following status: [COMPLETED] in 865ms
2021-12-30 19:42:34,888 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{INPUT_FILE_PATH=src/test/resources/ListeDVD.csv, time=1640889592743, run.id=1}]
2021-12-30 19:42:34,970 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [cleanDBStep]
2021-12-30 19:42:35,041 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [cleanDBStep] executed in 71ms
2021-12-30 19:42:35,085 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [importFilmsStep]
2021-12-30 19:42:35,368 ERROR org.springframework.batch.core.step.AbstractStep [main] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.web.client.HttpClientErrorException$Forbidden: 403 Forbidden: "{"timestamp":"2021-12-30T18:42:35.321+00:00","status":403,"error":"Forbidden","path":"/dvdtheque-service/transformTmdbFilmToDvdThequeFilm/tmdb/62"}"
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:109)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:168)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:122)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:819)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:777)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:602)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:101)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:1)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.doProcess(SimpleChunkProcessor.java:134)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.transform(SimpleChunkProcessor.java:319)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210)
	at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)
	at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:173)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:160)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:155)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:150)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:793)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:783)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:345)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at fr.fredos.dvdtheque.batch.BatchApplication.main(BatchApplication.java:19)
2021-12-30 19:42:35,375 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [importFilmsStep] executed in 290ms
2021-12-30 19:42:35,400 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{INPUT_FILE_PATH=src/test/resources/ListeDVD.csv, time=1640889592743, run.id=1}] and the following status: [FAILED] in 499ms
2021-12-30 19:42:51,589 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8089-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-30 19:42:51,589 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Initializing Servlet 'dispatcherServlet'
2021-12-30 19:42:51,598 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Completed initialization in 9 ms
2021-12-30 19:42:51,932 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-1] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{time=1640889771884, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}]
2021-12-30 19:42:52,030 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-1] Executing step: [cleanDBStep]
2021-12-30 19:42:52,107 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Step: [cleanDBStep] executed in 76ms
2021-12-30 19:42:52,149 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-1] Executing step: [importFilmsStep]
2021-12-30 19:42:52,266 ERROR org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.web.client.HttpClientErrorException$Forbidden: 403 Forbidden: "{"timestamp":"2021-12-30T18:42:52.254+00:00","status":403,"error":"Forbidden","path":"/dvdtheque-service/transformTmdbFilmToDvdThequeFilm/tmdb/62"}"
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:109)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:168)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:122)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:819)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:777)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:602)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:101)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:1)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.doProcess(SimpleChunkProcessor.java:134)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.transform(SimpleChunkProcessor.java:319)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210)
	at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)
	at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at fr.fredos.dvdtheque.batch.controller.JobInvokerController.handleImportFilmsJob(JobInvokerController.java:41)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2021-12-30 19:42:52,278 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Step: [importFilmsStep] executed in 129ms
2021-12-30 19:42:52,388 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-1] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{time=1640889771884, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}] and the following status: [FAILED] in 442ms
2021-12-30 19:45:08,866 INFO org.hibernate.validator.internal.util.Version [background-preinit] HV000001: Hibernate Validator 6.2.0.Final
2021-12-30 19:45:09,612 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Fetching config from server at : http://localhost:8888
2021-12-30 19:45:10,195 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Located environment: name=dvdtheque-batch-service, profiles=[local], label=develop, version=5a84e492aa29c05fc0b6c883e92047f6e3946907, state=null
2021-12-30 19:45:10,196 INFO org.springframework.cloud.bootstrap.config.PropertySourceBootstrapConfiguration [main] Located property source: [BootstrapPropertySource {name='bootstrapProperties-configClient'}, BootstrapPropertySource {name='bootstrapProperties-https://github.com/fredo1975/spring-cloud-server-config.git/file:C:\Users\fredo\AppData\Local\Temp\config-repo-6509514101851484087\dvdtheque-batch-service-local.yml'}]
2021-12-30 19:45:10,214 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: local
2021-12-30 19:45:11,534 INFO org.springframework.cloud.context.scope.GenericScope [main] BeanFactory id=0c1151a1-d259-3920-9b8b-e9eb47a1c358
2021-12-30 19:45:11,813 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@4b9dbf07' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 19:45:11,820 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 19:45:12,265 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8089 (http)
2021-12-30 19:45:12,275 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8089"]
2021-12-30 19:45:12,276 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2021-12-30 19:45:12,277 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.56]
2021-12-30 19:45:12,457 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2021-12-30 19:45:12,458 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2230 ms
2021-12-30 19:45:12,959 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsJob
2021-12-30 19:45:12,965 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsStep
2021-12-30 19:45:12,974 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### ListItemReader
2021-12-30 19:45:14,445 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### excelFilmWriter
2021-12-30 19:45:14,479 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsJob
2021-12-30 19:45:14,482 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsStep
2021-12-30 19:45:15,455 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2021-12-30 19:45:15,645 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2021-12-30 19:45:15,659 INFO org.springframework.batch.core.repository.support.JobRepositoryFactoryBean [main] No database type set, using meta data indicating: MYSQL
2021-12-30 19:45:15,686 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher [main] No TaskExecutor has been set, defaulting to synchronous executor.
2021-12-30 19:45:16,114 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2a341e3d, org.springframework.security.web.context.SecurityContextPersistenceFilter@acd115d, org.springframework.security.web.header.HeaderWriterFilter@6fdb1a59, org.springframework.security.web.csrf.CsrfFilter@70e54ec3, org.springframework.security.web.authentication.logout.LogoutFilter@2c846d55, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@4b9beefe, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@4cddc036, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@5dfec221, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@a4dcede, org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter@2c731a16, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2f2dc407, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@28654aff, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7ee02968, org.springframework.security.web.session.SessionManagementFilter@348bd063, org.springframework.security.web.access.ExceptionTranslationFilter@67ceaa9, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5718e77c]
2021-12-30 19:45:16,267 INFO org.springframework.cloud.netflix.eureka.config.DiscoveryClientOptionalArgsConfiguration [main] Eureka HTTP Client uses RestTemplate.
2021-12-30 19:45:16,338 WARN org.springframework.cloud.loadbalancer.config.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger [main] Spring Cloud LoadBalancer is currently working with the default cache. You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2021-12-30 19:45:16,345 INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver [main] Exposing 16 endpoint(s) beneath base path '/actuator'
2021-12-30 19:45:16,411 INFO org.springframework.cloud.netflix.eureka.InstanceInfoFactory [main] Setting initial instance status as: STARTING
2021-12-30 19:45:16,495 INFO com.netflix.discovery.DiscoveryClient [main] Initializing Eureka in region us-east-1
2021-12-30 19:45:16,502 INFO com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver [main] Resolving eureka endpoints via configuration
2021-12-30 19:45:16,526 INFO com.netflix.discovery.DiscoveryClient [main] Disable delta property : false
2021-12-30 19:45:16,527 INFO com.netflix.discovery.DiscoveryClient [main] Single vip registry refresh property : null
2021-12-30 19:45:16,527 INFO com.netflix.discovery.DiscoveryClient [main] Force full registry fetch : false
2021-12-30 19:45:16,528 INFO com.netflix.discovery.DiscoveryClient [main] Application is null : false
2021-12-30 19:45:16,528 INFO com.netflix.discovery.DiscoveryClient [main] Registered Applications size is zero : true
2021-12-30 19:45:16,528 INFO com.netflix.discovery.DiscoveryClient [main] Application version is -1: true
2021-12-30 19:45:16,529 INFO com.netflix.discovery.DiscoveryClient [main] Getting all instance registry info from the eureka server
2021-12-30 19:45:16,778 INFO com.netflix.discovery.DiscoveryClient [main] The response status is 200
2021-12-30 19:45:16,783 INFO com.netflix.discovery.DiscoveryClient [main] Starting heartbeat executor: renew interval is: 2
2021-12-30 19:45:16,787 INFO com.netflix.discovery.InstanceInfoReplicator [main] InstanceInfoReplicator onDemand update allowed rate per min is 4
2021-12-30 19:45:16,792 INFO com.netflix.discovery.DiscoveryClient [main] Discovery Client initialized at timestamp 1640889916791 with initial instances count: 5
2021-12-30 19:45:16,798 INFO org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry [main] Registering application DVDTHEQUE-BATCH-SERVICE with eureka with status UP
2021-12-30 19:45:16,801 INFO com.netflix.discovery.DiscoveryClient$3 [main] Saw local status change event StatusChangeEvent [timestamp=1640889916800, current=UP, previous=STARTING]
2021-12-30 19:45:16,802 WARN com.netflix.discovery.InstanceInfoReplicator [main] Ignoring onDemand update due to rate limiter
2021-12-30 19:45:16,804 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8089"]
2021-12-30 19:45:16,984 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8089 (http) with context path ''
2021-12-30 19:45:16,986 INFO org.springframework.cloud.netflix.eureka.serviceregistry.EurekaAutoServiceRegistration [main] Updating port to 8089
2021-12-30 19:45:17,251 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Loaded the Bouncy Castle security provider.
2021-12-30 19:45:17,278 INFO org.springframework.boot.StartupInfoLogger [main] Started BatchApplication in 9.263 seconds (JVM running for 9.902)
2021-12-30 19:45:17,286 INFO org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner [main] Running default command line with: []
2021-12-30 19:45:17,310 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Using Persistence Adapter: MemoryPersistenceAdapter
2021-12-30 19:45:17,374 INFO org.apache.activemq.broker.jmx.ManagementContext$1 [JMX connector] JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi
2021-12-30 19:45:17,437 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] launched with the following parameters: [{run.id=9, time=1640887219096}]
2021-12-30 19:45:17,462 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-3531-1640889917327-0:1) is starting
2021-12-30 19:45:17,472 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-3531-1640889917327-0:1) started
2021-12-30 19:45:17,473 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] For help or more information please see: http://activemq.apache.org
2021-12-30 19:45:17,477 WARN org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Temporary Store limit is 51200 mb (current store usage is 0 mb). The data directory: D:\dev\eclipse-06-2021\workspace\dvdtheque\dvdtheque-batch only has 9198 mb of usable space. - resetting to maximum available disk space: 9198 mb
2021-12-30 19:45:17,484 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [exportFilms]
2021-12-30 19:45:17,518 INFO org.apache.activemq.broker.TransportConnector [DiscoveryClient-InstanceInfoReplicator-0] Connector vm://localhost started
2021-12-30 19:45:17,580 INFO com.netflix.discovery.DiscoveryClient [DiscoveryClient-InstanceInfoReplicator-0] DiscoveryClient_DVDTHEQUE-BATCH-SERVICE/dvdtheque-batch-service:c6c78b7b9f888500941d70bd95803d84: registering service...
2021-12-30 19:45:17,617 INFO com.netflix.discovery.DiscoveryClient [DiscoveryClient-InstanceInfoReplicator-0] DiscoveryClient_DVDTHEQUE-BATCH-SERVICE/dvdtheque-batch-service:c6c78b7b9f888500941d70bd95803d84 - registration status: 204
2021-12-30 19:45:17,943 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [exportFilms] executed in 458ms
2021-12-30 19:45:18,224 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] completed with the following parameters: [{run.id=9, time=1640887219096}] and the following status: [COMPLETED] in 764ms
2021-12-30 19:45:18,377 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{INPUT_FILE_PATH=src/test/resources/ListeDVD.csv, time=1640889771884, run.id=1}]
2021-12-30 19:45:18,459 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [cleanDBStep]
2021-12-30 19:45:18,640 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [cleanDBStep] executed in 181ms
2021-12-30 19:45:18,675 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [importFilmsStep]
2021-12-30 19:45:20,375 ERROR org.springframework.batch.core.step.AbstractStep [main] Encountered an error executing step importFilmsStep in job importFilms
java.lang.IllegalStateException: Required key 'tmdb-service.buildDvd' not found
	at org.springframework.core.env.AbstractPropertyResolver.getRequiredProperty(AbstractPropertyResolver.java:183)
	at org.springframework.core.env.AbstractEnvironment.getRequiredProperty(AbstractEnvironment.java:615)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:118)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:1)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.doProcess(SimpleChunkProcessor.java:134)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.transform(SimpleChunkProcessor.java:319)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210)
	at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)
	at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:173)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:160)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:155)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:150)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:793)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:783)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:345)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at fr.fredos.dvdtheque.batch.BatchApplication.main(BatchApplication.java:19)
2021-12-30 19:45:20,380 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [importFilmsStep] executed in 1s705ms
2021-12-30 19:45:20,406 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{INPUT_FILE_PATH=src/test/resources/ListeDVD.csv, time=1640889771884, run.id=1}] and the following status: [FAILED] in 2s16ms
2021-12-30 19:45:54,174 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8089-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-30 19:45:54,175 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Initializing Servlet 'dispatcherServlet'
2021-12-30 19:45:54,182 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Completed initialization in 7 ms
2021-12-30 19:45:54,613 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-1] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{time=1640889954567, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}]
2021-12-30 19:45:54,657 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-1] Executing step: [cleanDBStep]
2021-12-30 19:45:54,773 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Step: [cleanDBStep] executed in 115ms
2021-12-30 19:45:54,815 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-1] Executing step: [importFilmsStep]
2021-12-30 19:45:55,742 ERROR org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Encountered an error executing step importFilmsStep in job importFilms
java.lang.IllegalStateException: Required key 'tmdb-service.buildDvd' not found
	at org.springframework.core.env.AbstractPropertyResolver.getRequiredProperty(AbstractPropertyResolver.java:183)
	at org.springframework.core.env.AbstractEnvironment.getRequiredProperty(AbstractEnvironment.java:615)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:118)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:1)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.doProcess(SimpleChunkProcessor.java:134)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.transform(SimpleChunkProcessor.java:319)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210)
	at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)
	at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at fr.fredos.dvdtheque.batch.controller.JobInvokerController.handleImportFilmsJob(JobInvokerController.java:41)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2021-12-30 19:45:55,760 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Step: [importFilmsStep] executed in 944ms
2021-12-30 19:45:55,785 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-1] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{time=1640889954567, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}] and the following status: [FAILED] in 1s160ms
2021-12-30 19:47:37,481 INFO org.hibernate.validator.internal.util.Version [background-preinit] HV000001: Hibernate Validator 6.2.0.Final
2021-12-30 19:47:38,300 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Fetching config from server at : http://localhost:8888
2021-12-30 19:47:38,912 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Located environment: name=dvdtheque-batch-service, profiles=[local], label=develop, version=5a84e492aa29c05fc0b6c883e92047f6e3946907, state=null
2021-12-30 19:47:38,913 INFO org.springframework.cloud.bootstrap.config.PropertySourceBootstrapConfiguration [main] Located property source: [BootstrapPropertySource {name='bootstrapProperties-configClient'}, BootstrapPropertySource {name='bootstrapProperties-https://github.com/fredo1975/spring-cloud-server-config.git/file:C:\Users\fredo\AppData\Local\Temp\config-repo-6509514101851484087\dvdtheque-batch-service-local.yml'}]
2021-12-30 19:47:38,930 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: local
2021-12-30 19:47:40,311 INFO org.springframework.cloud.context.scope.GenericScope [main] BeanFactory id=0c1151a1-d259-3920-9b8b-e9eb47a1c358
2021-12-30 19:47:40,616 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@706f6d26' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 19:47:40,624 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 19:47:40,974 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8089 (http)
2021-12-30 19:47:40,985 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8089"]
2021-12-30 19:47:40,986 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2021-12-30 19:47:40,987 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.56]
2021-12-30 19:47:41,159 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2021-12-30 19:47:41,160 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2216 ms
2021-12-30 19:47:41,666 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsJob
2021-12-30 19:47:41,669 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsStep
2021-12-30 19:47:41,674 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### ListItemReader
2021-12-30 19:47:41,767 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### excelFilmWriter
2021-12-30 19:47:41,800 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsJob
2021-12-30 19:47:41,804 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsStep
2021-12-30 19:47:42,758 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2021-12-30 19:47:42,924 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2021-12-30 19:47:42,936 INFO org.springframework.batch.core.repository.support.JobRepositoryFactoryBean [main] No database type set, using meta data indicating: MYSQL
2021-12-30 19:47:42,961 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher [main] No TaskExecutor has been set, defaulting to synchronous executor.
2021-12-30 19:47:43,269 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@b2e1df3, org.springframework.security.web.context.SecurityContextPersistenceFilter@301e5d23, org.springframework.security.web.header.HeaderWriterFilter@66048c9e, org.springframework.security.web.csrf.CsrfFilter@22ab1b8a, org.springframework.security.web.authentication.logout.LogoutFilter@79349b61, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@3346e906, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@443ac5b8, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@5718e77c, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@56193e3a, org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter@3c6fc4cd, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@64a8d575, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@31859960, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6cf3b3d7, org.springframework.security.web.session.SessionManagementFilter@71458178, org.springframework.security.web.access.ExceptionTranslationFilter@6148827c, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7ee02968]
2021-12-30 19:47:43,497 INFO org.springframework.cloud.netflix.eureka.config.DiscoveryClientOptionalArgsConfiguration [main] Eureka HTTP Client uses RestTemplate.
2021-12-30 19:47:43,575 WARN org.springframework.cloud.loadbalancer.config.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger [main] Spring Cloud LoadBalancer is currently working with the default cache. You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2021-12-30 19:47:43,582 INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver [main] Exposing 16 endpoint(s) beneath base path '/actuator'
2021-12-30 19:47:43,652 INFO org.springframework.cloud.netflix.eureka.InstanceInfoFactory [main] Setting initial instance status as: STARTING
2021-12-30 19:47:43,729 INFO com.netflix.discovery.DiscoveryClient [main] Initializing Eureka in region us-east-1
2021-12-30 19:47:43,735 INFO com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver [main] Resolving eureka endpoints via configuration
2021-12-30 19:47:43,762 INFO com.netflix.discovery.DiscoveryClient [main] Disable delta property : false
2021-12-30 19:47:43,763 INFO com.netflix.discovery.DiscoveryClient [main] Single vip registry refresh property : null
2021-12-30 19:47:43,764 INFO com.netflix.discovery.DiscoveryClient [main] Force full registry fetch : false
2021-12-30 19:47:43,764 INFO com.netflix.discovery.DiscoveryClient [main] Application is null : false
2021-12-30 19:47:43,764 INFO com.netflix.discovery.DiscoveryClient [main] Registered Applications size is zero : true
2021-12-30 19:47:43,764 INFO com.netflix.discovery.DiscoveryClient [main] Application version is -1: true
2021-12-30 19:47:43,765 INFO com.netflix.discovery.DiscoveryClient [main] Getting all instance registry info from the eureka server
2021-12-30 19:47:44,012 INFO com.netflix.discovery.DiscoveryClient [main] The response status is 200
2021-12-30 19:47:44,017 INFO com.netflix.discovery.DiscoveryClient [main] Starting heartbeat executor: renew interval is: 2
2021-12-30 19:47:44,020 INFO com.netflix.discovery.InstanceInfoReplicator [main] InstanceInfoReplicator onDemand update allowed rate per min is 4
2021-12-30 19:47:44,026 INFO com.netflix.discovery.DiscoveryClient [main] Discovery Client initialized at timestamp 1640890064025 with initial instances count: 5
2021-12-30 19:47:44,030 INFO org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry [main] Registering application DVDTHEQUE-BATCH-SERVICE with eureka with status UP
2021-12-30 19:47:44,032 INFO com.netflix.discovery.DiscoveryClient$3 [main] Saw local status change event StatusChangeEvent [timestamp=1640890064032, current=UP, previous=STARTING]
2021-12-30 19:47:44,034 WARN com.netflix.discovery.InstanceInfoReplicator [main] Ignoring onDemand update due to rate limiter
2021-12-30 19:47:44,035 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8089"]
2021-12-30 19:47:44,055 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8089 (http) with context path ''
2021-12-30 19:47:44,056 INFO org.springframework.cloud.netflix.eureka.serviceregistry.EurekaAutoServiceRegistration [main] Updating port to 8089
2021-12-30 19:47:44,233 INFO org.springframework.boot.StartupInfoLogger [main] Started BatchApplication in 7.582 seconds (JVM running for 8.187)
2021-12-30 19:47:44,244 INFO org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner [main] Running default command line with: []
2021-12-30 19:47:44,404 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] launched with the following parameters: [{run.id=10, time=1640887219096}]
2021-12-30 19:47:44,414 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Loaded the Bouncy Castle security provider.
2021-12-30 19:47:44,532 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [exportFilms]
2021-12-30 19:47:44,580 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Using Persistence Adapter: MemoryPersistenceAdapter
2021-12-30 19:47:44,654 INFO org.apache.activemq.broker.jmx.ManagementContext$1 [JMX connector] JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi
2021-12-30 19:47:44,749 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-3569-1640890064612-0:1) is starting
2021-12-30 19:47:44,755 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-3569-1640890064612-0:1) started
2021-12-30 19:47:44,756 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] For help or more information please see: http://activemq.apache.org
2021-12-30 19:47:44,760 WARN org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Temporary Store limit is 51200 mb (current store usage is 0 mb). The data directory: D:\dev\eclipse-06-2021\workspace\dvdtheque\dvdtheque-batch only has 9198 mb of usable space. - resetting to maximum available disk space: 9198 mb
2021-12-30 19:47:44,784 INFO org.apache.activemq.broker.TransportConnector [DiscoveryClient-InstanceInfoReplicator-0] Connector vm://localhost started
2021-12-30 19:47:44,840 INFO com.netflix.discovery.DiscoveryClient [DiscoveryClient-InstanceInfoReplicator-0] DiscoveryClient_DVDTHEQUE-BATCH-SERVICE/dvdtheque-batch-service:6dc533109e4a2f28de24ea6f2cc20f0c: registering service...
2021-12-30 19:47:44,874 INFO com.netflix.discovery.DiscoveryClient [DiscoveryClient-InstanceInfoReplicator-0] DiscoveryClient_DVDTHEQUE-BATCH-SERVICE/dvdtheque-batch-service:6dc533109e4a2f28de24ea6f2cc20f0c - registration status: 204
2021-12-30 19:47:45,073 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [exportFilms] executed in 540ms
2021-12-30 19:47:45,283 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] completed with the following parameters: [{run.id=10, time=1640887219096}] and the following status: [COMPLETED] in 854ms
2021-12-30 19:47:45,356 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{INPUT_FILE_PATH=src/test/resources/ListeDVD.csv, time=1640889954567, run.id=1}]
2021-12-30 19:47:45,442 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [cleanDBStep]
2021-12-30 19:47:45,654 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [cleanDBStep] executed in 211ms
2021-12-30 19:47:45,688 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [importFilmsStep]
2021-12-30 19:47:46,682 ERROR org.springframework.batch.core.step.AbstractStep [main] Encountered an error executing step importFilmsStep in job importFilms
java.lang.IllegalStateException: Required key 'dvdtheque-service.buildDvd' not found
	at org.springframework.core.env.AbstractPropertyResolver.getRequiredProperty(AbstractPropertyResolver.java:183)
	at org.springframework.core.env.AbstractEnvironment.getRequiredProperty(AbstractEnvironment.java:615)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:109)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:1)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.doProcess(SimpleChunkProcessor.java:134)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.transform(SimpleChunkProcessor.java:319)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210)
	at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)
	at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:173)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:160)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:155)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:150)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:793)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:783)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:345)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at fr.fredos.dvdtheque.batch.BatchApplication.main(BatchApplication.java:19)
2021-12-30 19:47:46,689 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [importFilmsStep] executed in 1s0ms
2021-12-30 19:47:46,718 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{INPUT_FILE_PATH=src/test/resources/ListeDVD.csv, time=1640889954567, run.id=1}] and the following status: [FAILED] in 1s349ms
2021-12-30 19:47:59,331 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8089-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-30 19:47:59,331 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Initializing Servlet 'dispatcherServlet'
2021-12-30 19:47:59,336 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Completed initialization in 4 ms
2021-12-30 19:47:59,751 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-1] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{time=1640890079712, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}]
2021-12-30 19:47:59,795 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-1] Executing step: [cleanDBStep]
2021-12-30 19:47:59,866 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Step: [cleanDBStep] executed in 71ms
2021-12-30 19:47:59,904 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-1] Executing step: [importFilmsStep]
2021-12-30 19:48:00,553 ERROR org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Encountered an error executing step importFilmsStep in job importFilms
java.lang.IllegalStateException: Required key 'dvdtheque-service.buildDvd' not found
	at org.springframework.core.env.AbstractPropertyResolver.getRequiredProperty(AbstractPropertyResolver.java:183)
	at org.springframework.core.env.AbstractEnvironment.getRequiredProperty(AbstractEnvironment.java:615)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:109)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:1)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.doProcess(SimpleChunkProcessor.java:134)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.transform(SimpleChunkProcessor.java:319)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210)
	at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)
	at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at fr.fredos.dvdtheque.batch.controller.JobInvokerController.handleImportFilmsJob(JobInvokerController.java:41)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2021-12-30 19:48:00,566 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Step: [importFilmsStep] executed in 662ms
2021-12-30 19:48:00,590 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-1] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{time=1640890079712, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}] and the following status: [FAILED] in 827ms
2021-12-30 19:48:41,723 INFO org.hibernate.validator.internal.util.Version [background-preinit] HV000001: Hibernate Validator 6.2.0.Final
2021-12-30 19:48:42,520 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Fetching config from server at : http://localhost:8888
2021-12-30 19:48:43,322 INFO org.springframework.cloud.config.client.ConfigServicePropertySourceLocator [main] Located environment: name=dvdtheque-batch-service, profiles=[local], label=develop, version=d394120751565755c13c9fcca59091363db65413, state=null
2021-12-30 19:48:43,323 INFO org.springframework.cloud.bootstrap.config.PropertySourceBootstrapConfiguration [main] Located property source: [BootstrapPropertySource {name='bootstrapProperties-configClient'}, BootstrapPropertySource {name='bootstrapProperties-https://github.com/fredo1975/spring-cloud-server-config.git/file:C:\Users\fredo\AppData\Local\Temp\config-repo-6509514101851484087\dvdtheque-batch-service-local.yml'}]
2021-12-30 19:48:43,340 INFO org.springframework.boot.SpringApplication [main] The following profiles are active: local
2021-12-30 19:48:44,708 INFO org.springframework.cloud.context.scope.GenericScope [main] BeanFactory id=1304d2cc-b27a-36f1-b05a-83d34b1b0466
2021-12-30 19:48:45,032 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@15d114ce' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 19:48:45,039 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [main] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2021-12-30 19:48:45,414 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8089 (http)
2021-12-30 19:48:45,426 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing ProtocolHandler ["http-nio-8089"]
2021-12-30 19:48:45,427 INFO org.apache.juli.logging.DirectJDKLog [main] Starting service [Tomcat]
2021-12-30 19:48:45,429 INFO org.apache.juli.logging.DirectJDKLog [main] Starting Servlet engine: [Apache Tomcat/9.0.56]
2021-12-30 19:48:45,752 INFO org.apache.juli.logging.DirectJDKLog [main] Initializing Spring embedded WebApplicationContext
2021-12-30 19:48:45,752 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 2397 ms
2021-12-30 19:48:46,173 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsJob
2021-12-30 19:48:46,175 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### exportFilmsStep
2021-12-30 19:48:46,181 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### ListItemReader
2021-12-30 19:48:46,266 INFO fr.fredos.dvdtheque.batch.configuration.BatchExportFilmsConfiguration [main] ########### excelFilmWriter
2021-12-30 19:48:46,300 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsJob
2021-12-30 19:48:46,303 INFO fr.fredos.dvdtheque.batch.configuration.BatchImportFilmsConfiguration [main] ######## importFilmsStep
2021-12-30 19:48:47,324 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2021-12-30 19:48:47,557 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2021-12-30 19:48:47,597 INFO org.springframework.batch.core.repository.support.JobRepositoryFactoryBean [main] No database type set, using meta data indicating: MYSQL
2021-12-30 19:48:47,692 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher [main] No TaskExecutor has been set, defaulting to synchronous executor.
2021-12-30 19:48:47,978 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3ba8ef4e, org.springframework.security.web.context.SecurityContextPersistenceFilter@1331d6fd, org.springframework.security.web.header.HeaderWriterFilter@69a294d8, org.springframework.security.web.csrf.CsrfFilter@363ba634, org.springframework.security.web.authentication.logout.LogoutFilter@1fa796a4, org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter@69abeb14, org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter@7db2b614, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@42e4431, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@6d0bcf8c, org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter@78829412, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5b1f0f26, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3340ff7c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@a1a72d4, org.springframework.security.web.session.SessionManagementFilter@11d422fd, org.springframework.security.web.access.ExceptionTranslationFilter@53564a4c, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2e2cd42c]
2021-12-30 19:48:48,129 INFO org.springframework.cloud.netflix.eureka.config.DiscoveryClientOptionalArgsConfiguration [main] Eureka HTTP Client uses RestTemplate.
2021-12-30 19:48:48,208 WARN org.springframework.cloud.loadbalancer.config.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger [main] Spring Cloud LoadBalancer is currently working with the default cache. You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2021-12-30 19:48:48,216 INFO org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver [main] Exposing 16 endpoint(s) beneath base path '/actuator'
2021-12-30 19:48:48,293 INFO org.springframework.cloud.netflix.eureka.InstanceInfoFactory [main] Setting initial instance status as: STARTING
2021-12-30 19:48:48,376 INFO com.netflix.discovery.DiscoveryClient [main] Initializing Eureka in region us-east-1
2021-12-30 19:48:48,383 INFO com.netflix.discovery.shared.resolver.aws.ConfigClusterResolver [main] Resolving eureka endpoints via configuration
2021-12-30 19:48:48,410 INFO com.netflix.discovery.DiscoveryClient [main] Disable delta property : false
2021-12-30 19:48:48,411 INFO com.netflix.discovery.DiscoveryClient [main] Single vip registry refresh property : null
2021-12-30 19:48:48,411 INFO com.netflix.discovery.DiscoveryClient [main] Force full registry fetch : false
2021-12-30 19:48:48,412 INFO com.netflix.discovery.DiscoveryClient [main] Application is null : false
2021-12-30 19:48:48,413 INFO com.netflix.discovery.DiscoveryClient [main] Registered Applications size is zero : true
2021-12-30 19:48:48,413 INFO com.netflix.discovery.DiscoveryClient [main] Application version is -1: true
2021-12-30 19:48:48,414 INFO com.netflix.discovery.DiscoveryClient [main] Getting all instance registry info from the eureka server
2021-12-30 19:48:48,723 INFO com.netflix.discovery.DiscoveryClient [main] The response status is 200
2021-12-30 19:48:48,734 INFO com.netflix.discovery.DiscoveryClient [main] Starting heartbeat executor: renew interval is: 2
2021-12-30 19:48:48,740 INFO com.netflix.discovery.InstanceInfoReplicator [main] InstanceInfoReplicator onDemand update allowed rate per min is 4
2021-12-30 19:48:48,747 INFO com.netflix.discovery.DiscoveryClient [main] Discovery Client initialized at timestamp 1640890128746 with initial instances count: 5
2021-12-30 19:48:48,752 INFO org.springframework.cloud.netflix.eureka.serviceregistry.EurekaServiceRegistry [main] Registering application DVDTHEQUE-BATCH-SERVICE with eureka with status UP
2021-12-30 19:48:48,754 INFO com.netflix.discovery.DiscoveryClient$3 [main] Saw local status change event StatusChangeEvent [timestamp=1640890128754, current=UP, previous=STARTING]
2021-12-30 19:48:48,757 WARN com.netflix.discovery.InstanceInfoReplicator [main] Ignoring onDemand update due to rate limiter
2021-12-30 19:48:48,759 INFO org.apache.juli.logging.DirectJDKLog [main] Starting ProtocolHandler ["http-nio-8089"]
2021-12-30 19:48:48,900 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8089 (http) with context path ''
2021-12-30 19:48:48,902 INFO org.springframework.cloud.netflix.eureka.serviceregistry.EurekaAutoServiceRegistration [main] Updating port to 8089
2021-12-30 19:48:49,060 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Loaded the Bouncy Castle security provider.
2021-12-30 19:48:49,100 INFO org.springframework.boot.StartupInfoLogger [main] Started BatchApplication in 8.144 seconds (JVM running for 8.771)
2021-12-30 19:48:49,109 INFO org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner [main] Running default command line with: []
2021-12-30 19:48:49,120 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Using Persistence Adapter: MemoryPersistenceAdapter
2021-12-30 19:48:49,189 INFO org.apache.activemq.broker.jmx.ManagementContext$1 [JMX connector] JMX consoles can connect to service:jmx:rmi:///jndi/rmi://localhost:1099/jmxrmi
2021-12-30 19:48:49,261 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] launched with the following parameters: [{run.id=11, time=1640887219096}]
2021-12-30 19:48:49,287 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-3609-1640890129147-0:1) is starting
2021-12-30 19:48:49,308 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Apache ActiveMQ 5.15.10 (localhost, ID:bluechipit-1-3609-1640890129147-0:1) started
2021-12-30 19:48:49,311 INFO org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] For help or more information please see: http://activemq.apache.org
2021-12-30 19:48:49,318 WARN org.apache.activemq.broker.BrokerService [DiscoveryClient-InstanceInfoReplicator-0] Temporary Store limit is 51200 mb (current store usage is 0 mb). The data directory: D:\dev\eclipse-06-2021\workspace\dvdtheque\dvdtheque-batch only has 9198 mb of usable space. - resetting to maximum available disk space: 9198 mb
2021-12-30 19:48:49,320 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [exportFilms]
2021-12-30 19:48:49,356 INFO org.apache.activemq.broker.TransportConnector [DiscoveryClient-InstanceInfoReplicator-0] Connector vm://localhost started
2021-12-30 19:48:49,420 INFO com.netflix.discovery.DiscoveryClient [DiscoveryClient-InstanceInfoReplicator-0] DiscoveryClient_DVDTHEQUE-BATCH-SERVICE/dvdtheque-batch-service:03809a1797c461d7a89cbc745fd0d4d0: registering service...
2021-12-30 19:48:49,467 INFO com.netflix.discovery.DiscoveryClient [DiscoveryClient-InstanceInfoReplicator-0] DiscoveryClient_DVDTHEQUE-BATCH-SERVICE/dvdtheque-batch-service:03809a1797c461d7a89cbc745fd0d4d0 - registration status: 204
2021-12-30 19:48:49,879 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [exportFilms] executed in 559ms
2021-12-30 19:48:50,125 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=exportFilms]] completed with the following parameters: [{run.id=11, time=1640887219096}] and the following status: [COMPLETED] in 839ms
2021-12-30 19:48:50,197 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{INPUT_FILE_PATH=src/test/resources/ListeDVD.csv, time=1640890079712, run.id=1}]
2021-12-30 19:48:50,279 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [cleanDBStep]
2021-12-30 19:48:50,370 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [cleanDBStep] executed in 90ms
2021-12-30 19:48:50,415 INFO org.springframework.batch.core.job.SimpleStepHandler [main] Executing step: [importFilmsStep]
2021-12-30 19:48:51,309 ERROR org.springframework.batch.core.step.AbstractStep [main] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.web.client.HttpClientErrorException$Forbidden: 403 Forbidden: "{"timestamp":"2021-12-30T18:48:51.291+00:00","status":403,"error":"Forbidden","path":"/dvdtheque-service/films/buildDvd"}"
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:109)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:168)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:122)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:819)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:777)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:602)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:109)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:1)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.doProcess(SimpleChunkProcessor.java:134)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.transform(SimpleChunkProcessor.java:319)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210)
	at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)
	at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:173)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:160)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:155)
	at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:150)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:793)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:783)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:345)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at fr.fredos.dvdtheque.batch.BatchApplication.main(BatchApplication.java:19)
2021-12-30 19:48:51,314 INFO org.springframework.batch.core.step.AbstractStep [main] Step: [importFilmsStep] executed in 899ms
2021-12-30 19:48:51,340 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [main] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{INPUT_FILE_PATH=src/test/resources/ListeDVD.csv, time=1640890079712, run.id=1}] and the following status: [FAILED] in 1s130ms
2021-12-30 19:49:11,934 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8089-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2021-12-30 19:49:11,935 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Initializing Servlet 'dispatcherServlet'
2021-12-30 19:49:11,938 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8089-exec-1] Completed initialization in 3 ms
2021-12-30 19:49:12,158 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-1] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{time=1640890152106, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}]
2021-12-30 19:49:12,201 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-1] Executing step: [cleanDBStep]
2021-12-30 19:49:12,294 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Step: [cleanDBStep] executed in 93ms
2021-12-30 19:49:12,369 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-1] Executing step: [importFilmsStep]
2021-12-30 19:49:13,107 ERROR org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Encountered an error executing step importFilmsStep in job importFilms
org.springframework.web.client.HttpClientErrorException$Forbidden: 403 Forbidden: "{"timestamp":"2021-12-30T18:49:13.099+00:00","status":403,"error":"Forbidden","path":"/dvdtheque-service/films/buildDvd"}"
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:109)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:168)
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:122)
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:819)
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:777)
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711)
	at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:602)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:109)
	at fr.fredos.dvdtheque.batch.film.processor.FilmProcessor.process(FilmProcessor.java:1)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.doProcess(SimpleChunkProcessor.java:134)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.transform(SimpleChunkProcessor.java:319)
	at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210)
	at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)
	at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:413)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy114.run(Unknown Source)
	at fr.fredos.dvdtheque.batch.controller.JobInvokerController.handleImportFilmsJob(JobInvokerController.java:41)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:137)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter.doFilterInternal(DefaultLogoutPageGeneratingFilter.java:58)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:237)
	at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:223)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
2021-12-30 19:49:13,114 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-1] Step: [importFilmsStep] executed in 743ms
2021-12-30 19:49:13,143 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-1] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{time=1640890152106, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}] and the following status: [FAILED] in 970ms
2021-12-30 19:50:44,923 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-3] Job: [SimpleJob: [name=importFilms]] launched with the following parameters: [{time=1640890244880, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}]
2021-12-30 19:50:44,962 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-3] Executing step: [cleanDBStep]
2021-12-30 19:50:45,802 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-3] Step: [cleanDBStep] executed in 840ms
2021-12-30 19:50:45,849 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-3] Executing step: [importFilmsStep]
2021-12-30 19:50:53,905 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-3] Step: [importFilmsStep] executed in 8s55ms
2021-12-30 19:50:53,950 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-3] Executing step: [rippedFlagStep]
2021-12-30 19:50:53,986 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-3] Step: [rippedFlagStep] executed in 36ms
2021-12-30 19:50:54,030 INFO org.springframework.batch.core.job.SimpleStepHandler [http-nio-8089-exec-3] Executing step: [retrieveDateInsertionStep]
2021-12-30 19:50:54,062 INFO org.springframework.batch.core.step.AbstractStep [http-nio-8089-exec-3] Step: [retrieveDateInsertionStep] executed in 32ms
2021-12-30 19:50:54,088 INFO org.springframework.batch.core.launch.support.SimpleJobLauncher$1 [http-nio-8089-exec-3] Job: [SimpleJob: [name=importFilms]] completed with the following parameters: [{time=1640890244880, INPUT_FILE_PATH=src/test/resources/ListeDVD.csv}] and the following status: [COMPLETED] in 9s152ms
