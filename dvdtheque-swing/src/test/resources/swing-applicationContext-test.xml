<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:aop="http://www.springframework.org/schema/aop" xmlns:util="http://www.springframework.org/schema/util"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:jee="http://www.springframework.org/schema/jee"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
                           http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd
                           http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-2.0.xsd
                           http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.0.xsd
                           http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.0.xsd"
	default-lazy-init="false">

	<import resource="classpath*:business-config.xml" />
	<bean id="session" class="fr.dvdtheque.console.Session">
		<property name="etatMenuListe" value="true"/>
		<property name="etatMenuLogin" value="true"/>
		<property name="etatMenuLogout" value="false"/>
		<property name="etatMenuQuitter" value="true"/>
	</bean>

	<bean id="synchro" class="fr.dvdtheque.console.Barriere" />
	<!-- les vues -->
	<bean id="vueHome" class="fr.dvdtheque.console.vue.VueHome">
		<property name="nom">
			<value>home</value>
		</property>
		<property name="session">
			<ref bean="session" />
		</property>
		<property name="synchro">
			<ref bean="synchro" />
		</property>
	</bean>
	<bean id="vueListe" class="fr.dvdtheque.console.vue.VueListe">
		<property name="nom">
			<value>liste</value>
		</property>
		<property name="session">
			<ref bean="session" />
		</property>
		<property name="synchro">
			<ref bean="synchro" />
		</property>
	</bean>
	<bean id="vueLogin" class="fr.dvdtheque.console.vue.VueLogin">
		<property name="nom">
			<value>login</value>
		</property>
		<property name="session">
			<ref bean="session" />
		</property>
		<property name="synchro">
			<ref bean="synchro" />
		</property>
	</bean>
	<bean id="vueFilm" class="fr.dvdtheque.console.vue.VueFilm">
		<property name="nom">
			<value>filminfos</value>
		</property>
		<property name="session">
			<ref bean="session" />
		</property>
		<property name="synchro">
			<ref bean="synchro" />
		</property>
	</bean>
	<bean id="vueLogged" class="fr.dvdtheque.console.vue.VueLogged">
		<property name="nom">
			<value>logged</value>
		</property>
		<property name="session">
			<ref bean="session" />
		</property>
		<property name="synchro">
			<ref bean="synchro" />
		</property>
	</bean>
	<bean id="vueNotLogged" class="fr.dvdtheque.console.vue.VueNotLogged">
		<property name="nom">
			<value>notlogged</value>
		</property>
		<property name="session">
			<ref bean="session" />
		</property>
		<property name="synchro">
			<ref bean="synchro" />
		</property>
	</bean>
	<bean id="vueLogout" class="fr.dvdtheque.console.vue.VueLogout">
		<property name="nom">
			<value>logout</value>
		</property>
		<property name="session">
			<ref bean="session" />
		</property>
		<property name="synchro">
			<ref bean="synchro" />
		</property>
	</bean>
	<bean id="vueErreurs" class="fr.dvdtheque.console.vue.VueErreurs">
		<property name="nom">
			<value>erreurs</value>
		</property>
		<property name="session">
			<ref bean="session" />
		</property>
		<property name="synchro">
			<ref bean="synchro" />
		</property>
	</bean>
	<bean id="maVue" class="fr.dvdtheque.console.vue.MaVue">
		<property name="nom">
			<value>mavue</value>
		</property>
		<property name="session">
			<ref bean="session" />
		</property>
		<property name="synchro">
			<ref bean="synchro" />
		</property>
	</bean>

	<!-- les actions -->
	<bean id="actionListe" class="fr.dvdtheque.console.action.ActionListe">
		<property name="session">
			<ref bean="session" />
		</property>
	</bean>
	<bean id="actionLogin" class="fr.dvdtheque.console.action.ActionLogin">
		<property name="session">
			<ref bean="session" />
		</property>
	</bean>
	<bean id="actionTryLogin" class="fr.dvdtheque.console.action.ActionTryLogin">
		<property name="session">
			<ref bean="session" />
		</property>
	</bean>
	<bean id="actionFilm" class="fr.dvdtheque.console.action.ActionFilm">
		<property name="session">
			<ref bean="session" />
		</property>
	</bean>
	<bean id="actionUpdateFilm" class="fr.dvdtheque.console.action.ActionUpdateFilm">
		<property name="session">
			<ref bean="session" />
		</property>
	</bean>
	<bean id="actionLogout" class="fr.dvdtheque.console.action.ActionLogout">
		<property name="session">
			<ref bean="session" />
		</property>
	</bean>
	<bean id="actionHome" class="fr.dvdtheque.console.action.ActionHome">
		<property name="session">
			<ref bean="session" />
		</property>
	</bean>
	<!-- la configuration des actions -->
	<bean id="infosActionMaVue" class="fr.dvdtheque.console.action.InfosAction">
		<property name="action">
			<ref bean="actionListe" />
		</property>
	</bean>
	<bean id="infosActionListe" class="fr.dvdtheque.console.action.InfosAction">
		<property name="action">
			<ref bean="actionListe" />
		</property>
		<property name="etats">
			<map>
				<entry key="succès">
					<ref bean="vueListe" />
				</entry>
				<entry key="échec">
					<ref bean="vueErreurs" />
				</entry>
			</map>
		</property>
	</bean>
	<bean id="infosActionLogin" class="fr.dvdtheque.console.action.InfosAction">
		<property name="action">
			<ref bean="actionLogin" />
		</property>
		<property name="etats">
			<map>
				<entry key="succès">
					<ref bean="vueLogin" />
				</entry>
				<entry key="échec">
					<ref bean="vueErreurs" />
				</entry>
			</map>
		</property>
	</bean>
	<bean id="infosActionTryLogin" class="fr.dvdtheque.console.action.InfosAction">
		<property name="action">
			<ref bean="actionTryLogin" />
		</property>
		<property name="etats">
			<map>
				<entry key="succès">
					<ref bean="vueLogged" />
				</entry>
				<entry key="échec">
					<ref bean="vueNotLogged" />
				</entry>
			</map>
		</property>
	</bean>
	<bean id="infosActionFilm" class="fr.dvdtheque.console.action.InfosAction">
		<property name="action">
			<ref bean="actionFilm" />
		</property>
		<property name="etats">
			<map>
				<entry key="succès">
					<ref bean="vueFilm" />
				</entry>
				<entry key="échec">
					<ref bean="vueErreurs" />
				</entry>
			</map>
		</property>
	</bean>
	<bean id="infosActionUpdateFilm" class="fr.dvdtheque.console.action.InfosAction">
		<property name="action">
			<ref bean="actionUpdateFilm" />
		</property>
		<property name="etats">
			<map>
				<entry key="succès">
					<ref bean="vueFilm" />
				</entry>
				<entry key="échec">
					<ref bean="vueErreurs" />
				</entry>
			</map>
		</property>
	</bean>
	<bean id="infosActionLogout" class="fr.dvdtheque.console.action.InfosAction">
		<property name="action">
			<ref bean="actionLogout" />
		</property>
		<property name="etats">
			<map>
				<entry key="succès">
					<ref bean="vueLogout" />
				</entry>
				<entry key="échec">
					<ref bean="vueErreurs" />
				</entry>
			</map>
		</property>
	</bean>
	<bean id="infosActionHome" class="fr.dvdtheque.console.action.InfosAction">
		<property name="vue">
			<ref bean="vueHome" />
		</property>
	</bean>
	<bean id="infosActionQuitter" class="fr.dvdtheque.console.action.InfosAction">
		<property name="vue">
			<ref bean="vueHome" />
		</property>
	</bean>
	<!-- le controleur -->
	<bean id="controleur" class="fr.dvdtheque.console.controleur.Controleur">
		<property name="synchro">
			<ref bean="synchro" />
		</property>
		<property name="session">
			<ref bean="session" />
		</property>
		<property name="firstActionName">
			<value>home</value>
		</property>
		<property name="lastActionName">
			<value>quitter</value>
		</property>
		<property name="actions">
			<map>
				<entry key="login">
					<ref bean="infosActionLogin" />
				</entry>
				<entry key="trylogin">
					<ref bean="infosActionTryLogin" />
				</entry>
				<entry key="filminfos">
					<ref bean="infosActionFilm" />
				</entry>
				<entry key="updatefilm">
					<ref bean="infosActionUpdateFilm" />
				</entry>
				<entry key="logout">
					<ref bean="infosActionLogout" />
				</entry>
				<entry key="liste">
					<ref bean="infosActionListe" />
				</entry>
				<entry key="home">
					<ref bean="infosActionHome" />
				</entry>
				<entry key="quitter">
					<ref bean="infosActionQuitter" />
				</entry>
			</map>
		</property>
	</bean>

	<!-- TaskExecutor for example use of @Asynchronous -->
	<bean id="springThreadPoolTaskExecutor"
		class="org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor" />
</beans>
